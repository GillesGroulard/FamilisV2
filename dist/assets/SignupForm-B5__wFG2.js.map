{"version":3,"file":"SignupForm-B5__wFG2.js","sources":["../../src/components/auth/SignupForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Mail, Lock, User, Users, Loader2 } from 'lucide-react';\nimport { useAuth } from '../../hooks/useAuth';\nimport { Toast } from '../Toast';\n\ninterface SignupFormProps {\n  onSuccess: () => void;\n}\n\nconst SignupForm: React.FC<SignupFormProps> = ({ onSuccess }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [step, setStep] = useState<'details' | 'family'>('details');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [familyAction, setFamilyAction] = useState<'create' | 'join' | null>(null);\n  const [familyName, setFamilyName] = useState('');\n  const [joinCode, setJoinCode] = useState('');\n\n  const { signUp } = useAuth();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    if (step === 'details') {\n      if (!email || !password || !name) {\n        setError('Please fill in all fields');\n        return;\n      }\n      setStep('family');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      await signUp({\n        email,\n        password,\n        name,\n        familyAction,\n        familyName: familyAction === 'create' ? familyName : undefined,\n        joinCode: familyAction === 'join' ? joinCode : undefined,\n      });\n      onSuccess();\n    } catch (err) {\n      console.error('Signup error:', err);\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (step === 'details') {\n    return (\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700\">\n            Full Name\n          </label>\n          <div className=\"mt-1 relative\">\n            <input\n              type=\"text\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              className=\"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n              required\n            />\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n              <User className=\"h-5 w-5 text-gray-400\" />\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700\">\n            Email address\n          </label>\n          <div className=\"mt-1 relative\">\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n              required\n            />\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n              <Mail className=\"h-5 w-5 text-gray-400\" />\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700\">\n            Password\n          </label>\n          <div className=\"mt-1 relative\">\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n              required\n              minLength={6}\n            />\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center\">\n              <Lock className=\"h-5 w-5 text-gray-400\" />\n            </div>\n          </div>\n        </div>\n\n        {error && (\n          <Toast\n            message={error}\n            type=\"error\"\n            onClose={() => setError(null)}\n          />\n        )}\n\n        <button\n          type=\"submit\"\n          className=\"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n        >\n          Continue\n        </button>\n      </form>\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      {!familyAction ? (\n        <div className=\"space-y-4\">\n          <button\n            type=\"button\"\n            onClick={() => setFamilyAction('create')}\n            className=\"w-full flex items-center justify-center gap-3 p-4 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors\"\n          >\n            <Users className=\"w-5 h-5\" />\n            <span className=\"font-medium\">Create a New Family</span>\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => setFamilyAction('join')}\n            className=\"w-full flex items-center justify-center gap-3 p-4 bg-white text-primary-500 border-2 border-primary-500 rounded-lg hover:bg-primary-50 transition-colors\"\n          >\n            <User className=\"w-5 h-5\" />\n            <span className=\"font-medium\">Join Existing Family</span>\n          </button>\n        </div>\n      ) : familyAction === 'create' ? (\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700\">\n            Family Name\n          </label>\n          <input\n            type=\"text\"\n            value={familyName}\n            onChange={(e) => setFamilyName(e.target.value)}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n            required\n          />\n        </div>\n      ) : (\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700\">\n            Family Join Code\n          </label>\n          <input\n            type=\"text\"\n            value={joinCode}\n            onChange={(e) => setJoinCode(e.target.value.toUpperCase())}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n            required\n          />\n        </div>\n      )}\n\n      {error && (\n        <Toast\n          message={error}\n          type=\"error\"\n          onClose={() => setError(null)}\n        />\n      )}\n\n      <div className=\"flex gap-3\">\n        <button\n          type=\"button\"\n          onClick={() => setFamilyAction(null)}\n          className=\"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\"\n        >\n          Back\n        </button>\n        <button\n          type=\"submit\"\n          disabled={loading || !familyAction || (familyAction === 'create' && !familyName) || (familyAction === 'join' && !joinCode)}\n          className=\"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {loading ? (\n            <>\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              Creating...\n            </>\n          ) : (\n            'Create Account'\n          )}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default SignupForm;"],"names":["SignupForm","onSuccess","loading","setLoading","useState","error","setError","step","setStep","email","setEmail","password","setPassword","name","setName","familyAction","setFamilyAction","familyName","setFamilyName","joinCode","setJoinCode","signUp","useAuth","handleSubmit","e","err","jsxs","jsx","User","Mail","Lock","Toast","Users","Fragment","Loader2"],"mappings":"2FASA,MAAMA,EAAwC,CAAC,CAAE,UAAAC,KAAgB,CAC/D,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAwB,IAAI,EAChD,CAACG,EAAMC,CAAO,EAAIJ,EAAAA,SAA+B,SAAS,EAC1D,CAACK,EAAOC,CAAQ,EAAIN,EAAAA,SAAS,EAAE,EAC/B,CAACO,EAAUC,CAAW,EAAIR,EAAAA,SAAS,EAAE,EACrC,CAACS,EAAMC,CAAO,EAAIV,EAAAA,SAAS,EAAE,EAC7B,CAACW,EAAcC,CAAe,EAAIZ,EAAAA,SAAmC,IAAI,EACzE,CAACa,EAAYC,CAAa,EAAId,EAAAA,SAAS,EAAE,EACzC,CAACe,EAAUC,CAAW,EAAIhB,EAAAA,SAAS,EAAE,EAErC,CAAE,OAAAiB,CAAO,EAAIC,EAAQ,EAErBC,EAAe,MAAOC,GAAuB,CAIjD,GAHAA,EAAE,eAAe,EACjBlB,EAAS,IAAI,EAETC,IAAS,UAAW,CACtB,GAAI,CAACE,GAAS,CAACE,GAAY,CAACE,EAAM,CAChCP,EAAS,2BAA2B,EACpC,MAAA,CAEFE,EAAQ,QAAQ,EAChB,MAAA,CAGFL,EAAW,EAAI,EACX,GAAA,CACF,MAAMkB,EAAO,CACX,MAAAZ,EACA,SAAAE,EACA,KAAAE,EACA,aAAAE,EACA,WAAYA,IAAiB,SAAWE,EAAa,OACrD,SAAUF,IAAiB,OAASI,EAAW,MAAA,CAChD,EACSlB,EAAA,QACHwB,EAAK,CACJ,QAAA,MAAM,gBAAiBA,CAAG,EAClCnB,EAASmB,aAAe,MAAQA,EAAI,QAAU,mBAAmB,CAAA,QACjE,CACAtB,EAAW,EAAK,CAAA,CAEpB,EAEA,OAAII,IAAS,UAERmB,EAAAA,KAAA,OAAA,CAAK,SAAUH,EAAc,UAAU,YACtC,SAAA,CAAAG,OAAC,MACC,CAAA,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,0CAA0C,SAE3D,YAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAAC,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOd,EACP,SAAWW,GAAMV,EAAQU,EAAE,OAAO,KAAK,EACvC,UAAU,mLACV,SAAQ,EAAA,CACV,EACAG,EAAAA,IAAC,OAAI,UAAU,mDACb,eAACC,EAAK,CAAA,UAAU,uBAAwB,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACD,EAAA,IAAA,QAAA,CAAM,UAAU,0CAA0C,SAE3D,gBAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAAC,EAAA,IAAC,QAAA,CACC,KAAK,QACL,MAAOlB,EACP,SAAWe,GAAMd,EAASc,EAAE,OAAO,KAAK,EACxC,UAAU,mLACV,SAAQ,EAAA,CACV,EACAG,EAAAA,IAAC,OAAI,UAAU,mDACb,eAACE,EAAK,CAAA,UAAU,uBAAwB,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACF,EAAA,IAAA,QAAA,CAAM,UAAU,0CAA0C,SAE3D,WAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAAC,EAAA,IAAC,QAAA,CACC,KAAK,WACL,MAAOhB,EACP,SAAWa,GAAMZ,EAAYY,EAAE,OAAO,KAAK,EAC3C,UAAU,mLACV,SAAQ,GACR,UAAW,CAAA,CACb,EACAG,EAAAA,IAAC,OAAI,UAAU,mDACb,eAACG,EAAK,CAAA,UAAU,uBAAwB,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,EACF,EAECzB,GACCsB,EAAA,IAACI,EAAA,CACC,QAAS1B,EACT,KAAK,QACL,QAAS,IAAMC,EAAS,IAAI,CAAA,CAC9B,EAGFqB,EAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,uPACX,SAAA,UAAA,CAAA,CAED,EACF,EAKDD,EAAAA,KAAA,OAAA,CAAK,SAAUH,EAAc,UAAU,YACrC,SAAA,CAACR,EAmBEA,IAAiB,SACnBW,EAAAA,KAAC,MACC,CAAA,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,0CAA0C,SAE3D,cAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOV,EACP,SAAWO,GAAMN,EAAcM,EAAE,OAAO,KAAK,EAC7C,UAAU,6IACV,SAAQ,EAAA,CAAA,CAEZ,CAAA,CAAA,SAEC,MACC,CAAA,SAAA,CAACG,EAAA,IAAA,QAAA,CAAM,UAAU,0CAA0C,SAE3D,mBAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOR,EACP,SAAWK,GAAMJ,EAAYI,EAAE,OAAO,MAAM,aAAa,EACzD,UAAU,6IACV,SAAQ,EAAA,CAAA,CACV,EACF,EA3CAE,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMV,EAAgB,QAAQ,EACvC,UAAU,gIAEV,SAAA,CAACW,EAAAA,IAAAK,EAAA,CAAM,UAAU,SAAU,CAAA,EAC1BL,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAAmB,qBAAA,CAAA,CAAA,CAAA,CACnD,EACAD,EAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMV,EAAgB,MAAM,EACrC,UAAU,2JAEV,SAAA,CAACW,EAAAA,IAAAC,EAAA,CAAK,UAAU,SAAU,CAAA,EACzBD,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAAoB,sBAAA,CAAA,CAAA,CAAA,CAAA,CACpD,CACF,CAAA,EA6BDtB,GACCsB,EAAA,IAACI,EAAA,CACC,QAAS1B,EACT,KAAK,QACL,QAAS,IAAMC,EAAS,IAAI,CAAA,CAC9B,EAGFoB,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMX,EAAgB,IAAI,EACnC,UAAU,4FACX,SAAA,MAAA,CAED,EACAW,EAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUzB,GAAW,CAACa,GAAiBA,IAAiB,UAAY,CAACE,GAAgBF,IAAiB,QAAU,CAACI,EACjH,UAAU,wOAET,WAEGO,EAAAA,KAAAO,EAAA,SAAA,CAAA,SAAA,CAACN,EAAAA,IAAAO,EAAA,CAAQ,UAAU,sBAAuB,CAAA,EAAE,aAAA,CAAA,CAE9C,EAEA,gBAAA,CAAA,CAEJ,CACF,CAAA,CAAA,EACF,CAEJ"}