(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ku(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Ju={exports:{}},$i={},Xu={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=Symbol.for("react.element"),pm=Symbol.for("react.portal"),gm=Symbol.for("react.fragment"),ym=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),wm=Symbol.for("react.provider"),xm=Symbol.for("react.context"),_m=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),bm=Symbol.for("react.memo"),jm=Symbol.for("react.lazy"),lc=Symbol.iterator;function Sm(e){return e===null||typeof e!="object"?null:(e=lc&&e[lc]||e["@@iterator"],typeof e=="function"?e:null)}var Zu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ed=Object.assign,td={};function an(e,t,r){this.props=e,this.context=t,this.refs=td,this.updater=r||Zu}an.prototype.isReactComponent={};an.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};an.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rd(){}rd.prototype=an.prototype;function el(e,t,r){this.props=e,this.context=t,this.refs=td,this.updater=r||Zu}var tl=el.prototype=new rd;tl.constructor=el;ed(tl,an.prototype);tl.isPureReactComponent=!0;var cc=Array.isArray,nd=Object.prototype.hasOwnProperty,rl={current:null},sd={key:!0,ref:!0,__self:!0,__source:!0};function id(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)nd.call(t,n)&&!sd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ds,type:e,key:i,ref:o,props:s,_owner:rl.current}}function Nm(e,t){return{$$typeof:ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ds}function Em(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var uc=/\/+/g;function uo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Em(""+e.key):t.toString(36)}function Ys(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ds:case pm:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+uo(o,0):n,cc(s)?(r="",e!=null&&(r=e.replace(uc,"$&/")+"/"),Ys(s,t,r,"",function(u){return u})):s!=null&&(nl(s)&&(s=Nm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(uc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",cc(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+uo(i,l);o+=Ys(i,t,r,c,s)}else if(c=Sm(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+uo(i,l++),o+=Ys(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _s(e,t,r){if(e==null)return e;var n=[],s=0;return Ys(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Cm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ee={current:null},Gs={transition:null},Pm={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:Gs,ReactCurrentOwner:rl};function od(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:_s,forEach:function(e,t,r){_s(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _s(e,function(){t++}),t},toArray:function(e){return _s(e,function(t){return t})||[]},only:function(e){if(!nl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=an;W.Fragment=gm;W.Profiler=vm;W.PureComponent=el;W.StrictMode=ym;W.Suspense=km;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pm;W.act=od;W.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ed({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=rl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)nd.call(t,c)&&!sd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ds,type:e.type,key:s,ref:i,props:n,_owner:o}};W.createContext=function(e){return e={$$typeof:xm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wm,_context:e},e.Consumer=e};W.createElement=id;W.createFactory=function(e){var t=id.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:_m,render:e}};W.isValidElement=nl;W.lazy=function(e){return{$$typeof:jm,_payload:{_status:-1,_result:e},_init:Cm}};W.memo=function(e,t){return{$$typeof:bm,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=Gs.transition;Gs.transition={};try{e()}finally{Gs.transition=t}};W.unstable_act=od;W.useCallback=function(e,t){return Ee.current.useCallback(e,t)};W.useContext=function(e){return Ee.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return Ee.current.useDeferredValue(e)};W.useEffect=function(e,t){return Ee.current.useEffect(e,t)};W.useId=function(){return Ee.current.useId()};W.useImperativeHandle=function(e,t,r){return Ee.current.useImperativeHandle(e,t,r)};W.useInsertionEffect=function(e,t){return Ee.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Ee.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Ee.current.useMemo(e,t)};W.useReducer=function(e,t,r){return Ee.current.useReducer(e,t,r)};W.useRef=function(e){return Ee.current.useRef(e)};W.useState=function(e){return Ee.current.useState(e)};W.useSyncExternalStore=function(e,t,r){return Ee.current.useSyncExternalStore(e,t,r)};W.useTransition=function(){return Ee.current.useTransition()};W.version="18.3.1";Xu.exports=W;var w=Xu.exports;const Tm=Ku(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=w,Om=Symbol.for("react.element"),Dm=Symbol.for("react.fragment"),Mm=Object.prototype.hasOwnProperty,Lm=Rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Am={key:!0,ref:!0,__self:!0,__source:!0};function ad(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Mm.call(t,n)&&!Am.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Om,type:e,key:i,ref:o,props:s,_owner:Lm.current}}$i.Fragment=Dm;$i.jsx=ad;$i.jsxs=ad;Ju.exports=$i;var a=Ju.exports,ld={exports:{}},He={},cd={exports:{}},ud={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,O){var C=j.length;j.push(O);e:for(;0<C;){var I=C-1>>>1,U=j[I];if(0<s(U,O))j[I]=O,j[C]=U,C=I;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var O=j[0],C=j.pop();if(C!==O){j[0]=C;e:for(var I=0,U=j.length,K=U>>>1;I<K;){var te=2*(I+1)-1,Pe=j[te],Te=te+1,Et=j[Te];if(0>s(Pe,C))Te<U&&0>s(Et,Pe)?(j[I]=Et,j[Te]=C,I=Te):(j[I]=Pe,j[te]=C,I=te);else if(Te<U&&0>s(Et,C))j[I]=Et,j[Te]=C,I=Te;else break e}}return O}function s(j,O){var C=j.sortIndex-O.sortIndex;return C!==0?C:j.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,v=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var O=r(u);O!==null;){if(O.callback===null)n(u);else if(O.startTime<=j)n(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=r(u)}}function _(j){if(x=!1,y(j),!v)if(r(c)!==null)v=!0,oe(k);else{var O=r(u);O!==null&&A(_,O.startTime-j)}}function k(j,O){v=!1,x&&(x=!1,g(N),N=-1),p=!0;var C=h;try{for(y(O),f=r(c);f!==null&&(!(f.expirationTime>O)||j&&!q());){var I=f.callback;if(typeof I=="function"){f.callback=null,h=f.priorityLevel;var U=I(f.expirationTime<=O);O=e.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&n(c),y(O)}else n(c);f=r(c)}if(f!==null)var K=!0;else{var te=r(u);te!==null&&A(_,te.startTime-O),K=!1}return K}finally{f=null,h=C,p=!1}}var E=!1,b=null,N=-1,L=5,R=-1;function q(){return!(e.unstable_now()-R<L)}function $(){if(b!==null){var j=e.unstable_now();R=j;var O=!0;try{O=b(!0,j)}finally{O?Q():(E=!1,b=null)}}else E=!1}var Q;if(typeof m=="function")Q=function(){m($)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,M=fe.port2;fe.port1.onmessage=$,Q=function(){M.postMessage(null)}}else Q=function(){S($,0)};function oe(j){b=j,E||(E=!0,Q())}function A(j,O){N=S(function(){j(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,oe(k))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var C=h;h=O;try{return j()}finally{h=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,O){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var C=h;h=j;try{return O()}finally{h=C}},e.unstable_scheduleCallback=function(j,O,C){var I=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?I+C:I):C=I,j){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=C+U,j={id:d++,callback:O,priorityLevel:j,startTime:C,expirationTime:U,sortIndex:-1},C>I?(j.sortIndex=C,t(u,j),r(c)===null&&j===r(u)&&(x?(g(N),N=-1):x=!0,A(_,C-I))):(j.sortIndex=U,t(c,j),v||p||(v=!0,oe(k))),j},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(j){var O=h;return function(){var C=h;h=O;try{return j.apply(this,arguments)}finally{h=C}}}})(ud);cd.exports=ud;var $m=cd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im=w,Be=$m;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dd=new Set,Hn={};function wr(e,t){Gr(e,t),Gr(e+"Capture",t)}function Gr(e,t){for(Hn[e]=t,e=0;e<t.length;e++)dd.add(t[e])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vo=Object.prototype.hasOwnProperty,Fm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dc={},hc={};function zm(e){return Vo.call(hc,e)?!0:Vo.call(dc,e)?!1:Fm.test(e)?hc[e]=!0:(dc[e]=!0,!1)}function Um(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wm(e,t,r,n){if(t===null||typeof t>"u"||Um(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ce(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xe[e]=new Ce(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xe[t]=new Ce(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xe[e]=new Ce(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xe[e]=new Ce(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xe[e]=new Ce(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xe[e]=new Ce(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xe[e]=new Ce(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xe[e]=new Ce(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xe[e]=new Ce(e,5,!1,e.toLowerCase(),null,!1,!1)});var sl=/[\-:]([a-z])/g;function il(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sl,il);xe[t]=new Ce(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sl,il);xe[t]=new Ce(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sl,il);xe[t]=new Ce(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xe[e]=new Ce(e,1,!1,e.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xe[e]=new Ce(e,1,!1,e.toLowerCase(),null,!0,!0)});function ol(e,t,r,n){var s=xe.hasOwnProperty(t)?xe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wm(t,r,s,n)&&(r=null),n||s===null?zm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Nt=Im.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ks=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),Tr=Symbol.for("react.fragment"),al=Symbol.for("react.strict_mode"),qo=Symbol.for("react.profiler"),hd=Symbol.for("react.provider"),fd=Symbol.for("react.context"),ll=Symbol.for("react.forward_ref"),Yo=Symbol.for("react.suspense"),Go=Symbol.for("react.suspense_list"),cl=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),md=Symbol.for("react.offscreen"),fc=Symbol.iterator;function hn(e){return e===null||typeof e!="object"?null:(e=fc&&e[fc]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Object.assign,ho;function Cn(e){if(ho===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ho=t&&t[1]||""}return`
`+ho+e}var fo=!1;function mo(e,t){if(!e||fo)return"";fo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{fo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Cn(e):""}function Bm(e){switch(e.tag){case 5:return Cn(e.type);case 16:return Cn("Lazy");case 13:return Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 2:case 15:return e=mo(e.type,!1),e;case 11:return e=mo(e.type.render,!1),e;case 1:return e=mo(e.type,!0),e;default:return""}}function Qo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tr:return"Fragment";case Pr:return"Portal";case qo:return"Profiler";case al:return"StrictMode";case Yo:return"Suspense";case Go:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fd:return(e.displayName||"Context")+".Consumer";case hd:return(e._context.displayName||"Context")+".Provider";case ll:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cl:return t=e.displayName||null,t!==null?t:Qo(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return Qo(e(t))}catch{}}return null}function Hm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qo(t);case 8:return t===al?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vm(e){var t=pd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bs(e){e._valueTracker||(e._valueTracker=Vm(e))}function gd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=pd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ci(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ko(e,t){var r=t.checked;return ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function mc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Qt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yd(e,t){t=t.checked,t!=null&&ol(e,"checked",t,!1)}function Jo(e,t){yd(e,t);var r=Qt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xo(e,t.type,Qt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xo(e,t,r){(t!=="number"||ci(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pn=Array.isArray;function Ur(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Qt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Zo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(Pn(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Qt(r)}}function vd(e,t){var r=Qt(t.value),n=Qt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function yc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ea(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var js,xd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=js.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qm=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(e){qm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dn[t]=Dn[e]})});function _d(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Dn.hasOwnProperty(e)&&Dn[e]?(""+t).trim():t+"px"}function kd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=_d(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Ym=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ta(e,t){if(t){if(Ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function ra(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var na=null;function ul(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sa=null,Wr=null,Br=null;function vc(e){if(e=ms(e)){if(typeof sa!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Wi(t),sa(e.stateNode,e.type,t))}}function bd(e){Wr?Br?Br.push(e):Br=[e]:Wr=e}function jd(){if(Wr){var e=Wr,t=Br;if(Br=Wr=null,vc(e),t)for(e=0;e<t.length;e++)vc(t[e])}}function Sd(e,t){return e(t)}function Nd(){}var po=!1;function Ed(e,t,r){if(po)return e(t,r);po=!0;try{return Sd(e,t,r)}finally{po=!1,(Wr!==null||Br!==null)&&(Nd(),jd())}}function qn(e,t){var r=e.stateNode;if(r===null)return null;var n=Wi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var ia=!1;if(kt)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){ia=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{ia=!1}function Gm(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Mn=!1,ui=null,di=!1,oa=null,Qm={onError:function(e){Mn=!0,ui=e}};function Km(e,t,r,n,s,i,o,l,c){Mn=!1,ui=null,Gm.apply(Qm,arguments)}function Jm(e,t,r,n,s,i,o,l,c){if(Km.apply(this,arguments),Mn){if(Mn){var u=ui;Mn=!1,ui=null}else throw Error(P(198));di||(di=!0,oa=u)}}function xr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Cd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wc(e){if(xr(e)!==e)throw Error(P(188))}function Xm(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return wc(s),e;if(i===n)return wc(s),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function Pd(e){return e=Xm(e),e!==null?Td(e):null}function Td(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Td(e);if(t!==null)return t;e=e.sibling}return null}var Rd=Be.unstable_scheduleCallback,xc=Be.unstable_cancelCallback,Zm=Be.unstable_shouldYield,ep=Be.unstable_requestPaint,le=Be.unstable_now,tp=Be.unstable_getCurrentPriorityLevel,dl=Be.unstable_ImmediatePriority,Od=Be.unstable_UserBlockingPriority,hi=Be.unstable_NormalPriority,rp=Be.unstable_LowPriority,Dd=Be.unstable_IdlePriority,Ii=null,mt=null;function np(e){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Ii,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:op,sp=Math.log,ip=Math.LN2;function op(e){return e>>>=0,e===0?32:31-(sp(e)/ip|0)|0}var Ss=64,Ns=4194304;function Tn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Tn(l):(i&=o,i!==0&&(n=Tn(i)))}else o=r&~s,o!==0?n=Tn(o):i!==0&&(n=Tn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function ap(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=ap(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function aa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Md(){var e=Ss;return Ss<<=1,!(Ss&4194240)&&(Ss=64),e}function go(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function cp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function hl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var G=0;function Ld(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ad,fl,$d,Id,Fd,la=!1,Es=[],Ut=null,Wt=null,Bt=null,Yn=new Map,Gn=new Map,Lt=[],up="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _c(e,t){switch(e){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(t.pointerId)}}function mn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ms(t),t!==null&&fl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dp(e,t,r,n,s){switch(t){case"focusin":return Ut=mn(Ut,e,t,r,n,s),!0;case"dragenter":return Wt=mn(Wt,e,t,r,n,s),!0;case"mouseover":return Bt=mn(Bt,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Yn.set(i,mn(Yn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Gn.set(i,mn(Gn.get(i)||null,e,t,r,n,s)),!0}return!1}function zd(e){var t=lr(e.target);if(t!==null){var r=xr(t);if(r!==null){if(t=r.tag,t===13){if(t=Cd(r),t!==null){e.blockedOn=t,Fd(e.priority,function(){$d(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ca(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);na=n,r.target.dispatchEvent(n),na=null}else return t=ms(r),t!==null&&fl(t),e.blockedOn=r,!1;t.shift()}return!0}function kc(e,t,r){Qs(e)&&r.delete(t)}function hp(){la=!1,Ut!==null&&Qs(Ut)&&(Ut=null),Wt!==null&&Qs(Wt)&&(Wt=null),Bt!==null&&Qs(Bt)&&(Bt=null),Yn.forEach(kc),Gn.forEach(kc)}function pn(e,t){e.blockedOn===t&&(e.blockedOn=null,la||(la=!0,Be.unstable_scheduleCallback(Be.unstable_NormalPriority,hp)))}function Qn(e){function t(s){return pn(s,e)}if(0<Es.length){pn(Es[0],e);for(var r=1;r<Es.length;r++){var n=Es[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ut!==null&&pn(Ut,e),Wt!==null&&pn(Wt,e),Bt!==null&&pn(Bt,e),Yn.forEach(t),Gn.forEach(t),r=0;r<Lt.length;r++)n=Lt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Lt.length&&(r=Lt[0],r.blockedOn===null);)zd(r),r.blockedOn===null&&Lt.shift()}var Hr=Nt.ReactCurrentBatchConfig,mi=!0;function fp(e,t,r,n){var s=G,i=Hr.transition;Hr.transition=null;try{G=1,ml(e,t,r,n)}finally{G=s,Hr.transition=i}}function mp(e,t,r,n){var s=G,i=Hr.transition;Hr.transition=null;try{G=4,ml(e,t,r,n)}finally{G=s,Hr.transition=i}}function ml(e,t,r,n){if(mi){var s=ca(e,t,r,n);if(s===null)No(e,t,n,pi,r),_c(e,n);else if(dp(s,e,t,r,n))n.stopPropagation();else if(_c(e,n),t&4&&-1<up.indexOf(e)){for(;s!==null;){var i=ms(s);if(i!==null&&Ad(i),i=ca(e,t,r,n),i===null&&No(e,t,n,pi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else No(e,t,n,null,r)}}var pi=null;function ca(e,t,r,n){if(pi=null,e=ul(n),e=lr(e),e!==null)if(t=xr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Cd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pi=e,null}function Ud(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tp()){case dl:return 1;case Od:return 4;case hi:case rp:return 16;case Dd:return 536870912;default:return 16}default:return 16}}var Ft=null,pl=null,Ks=null;function Wd(){if(Ks)return Ks;var e,t=pl,r=t.length,n,s="value"in Ft?Ft.value:Ft.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ks=s.slice(e,1<n?1-n:void 0)}function Js(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cs(){return!0}function bc(){return!1}function Ve(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cs:bc,this.isPropagationStopped=bc,this}return ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),t}var ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=Ve(ln),fs=ie({},ln,{view:0,detail:0}),pp=Ve(fs),yo,vo,gn,Fi=ie({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gn&&(gn&&e.type==="mousemove"?(yo=e.screenX-gn.screenX,vo=e.screenY-gn.screenY):vo=yo=0,gn=e),yo)},movementY:function(e){return"movementY"in e?e.movementY:vo}}),jc=Ve(Fi),gp=ie({},Fi,{dataTransfer:0}),yp=Ve(gp),vp=ie({},fs,{relatedTarget:0}),wo=Ve(vp),wp=ie({},ln,{animationName:0,elapsedTime:0,pseudoElement:0}),xp=Ve(wp),_p=ie({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kp=Ve(_p),bp=ie({},ln,{data:0}),Sc=Ve(bp),jp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ep(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Np[e])?!!t[e]:!1}function yl(){return Ep}var Cp=ie({},fs,{key:function(e){if(e.key){var t=jp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yl,charCode:function(e){return e.type==="keypress"?Js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pp=Ve(Cp),Tp=ie({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nc=Ve(Tp),Rp=ie({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yl}),Op=Ve(Rp),Dp=ie({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mp=Ve(Dp),Lp=ie({},Fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ap=Ve(Lp),$p=[9,13,27,32],vl=kt&&"CompositionEvent"in window,Ln=null;kt&&"documentMode"in document&&(Ln=document.documentMode);var Ip=kt&&"TextEvent"in window&&!Ln,Bd=kt&&(!vl||Ln&&8<Ln&&11>=Ln),Ec=" ",Cc=!1;function Hd(e,t){switch(e){case"keyup":return $p.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rr=!1;function Fp(e,t){switch(e){case"compositionend":return Vd(t);case"keypress":return t.which!==32?null:(Cc=!0,Ec);case"textInput":return e=t.data,e===Ec&&Cc?null:e;default:return null}}function zp(e,t){if(Rr)return e==="compositionend"||!vl&&Hd(e,t)?(e=Wd(),Ks=pl=Ft=null,Rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bd&&t.locale!=="ko"?null:t.data;default:return null}}var Up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Up[e.type]:t==="textarea"}function qd(e,t,r,n){bd(n),t=gi(t,"onChange"),0<t.length&&(r=new gl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var An=null,Kn=null;function Wp(e){nh(e,0)}function zi(e){var t=Mr(e);if(gd(t))return e}function Bp(e,t){if(e==="change")return t}var Yd=!1;if(kt){var xo;if(kt){var _o="oninput"in document;if(!_o){var Tc=document.createElement("div");Tc.setAttribute("oninput","return;"),_o=typeof Tc.oninput=="function"}xo=_o}else xo=!1;Yd=xo&&(!document.documentMode||9<document.documentMode)}function Rc(){An&&(An.detachEvent("onpropertychange",Gd),Kn=An=null)}function Gd(e){if(e.propertyName==="value"&&zi(Kn)){var t=[];qd(t,Kn,e,ul(e)),Ed(Wp,t)}}function Hp(e,t,r){e==="focusin"?(Rc(),An=t,Kn=r,An.attachEvent("onpropertychange",Gd)):e==="focusout"&&Rc()}function Vp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zi(Kn)}function qp(e,t){if(e==="click")return zi(t)}function Yp(e,t){if(e==="input"||e==="change")return zi(t)}function Gp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ct=typeof Object.is=="function"?Object.is:Gp;function Jn(e,t){if(ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Vo.call(t,s)||!ct(e[s],t[s]))return!1}return!0}function Oc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dc(e,t){var r=Oc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Oc(r)}}function Qd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kd(){for(var e=window,t=ci();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ci(e.document)}return t}function wl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qp(e){var t=Kd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Qd(r.ownerDocument.documentElement,r)){if(n!==null&&wl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Dc(r,i);var o=Dc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kp=kt&&"documentMode"in document&&11>=document.documentMode,Or=null,ua=null,$n=null,da=!1;function Mc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;da||Or==null||Or!==ci(n)||(n=Or,"selectionStart"in n&&wl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$n&&Jn($n,n)||($n=n,n=gi(ua,"onSelect"),0<n.length&&(t=new gl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Or)))}function Ps(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Dr={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionend:Ps("Transition","TransitionEnd")},ko={},Jd={};kt&&(Jd=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Ui(e){if(ko[e])return ko[e];if(!Dr[e])return e;var t=Dr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Jd)return ko[e]=t[r];return e}var Xd=Ui("animationend"),Zd=Ui("animationiteration"),eh=Ui("animationstart"),th=Ui("transitionend"),rh=new Map,Lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jt(e,t){rh.set(e,t),wr(t,[e])}for(var bo=0;bo<Lc.length;bo++){var jo=Lc[bo],Jp=jo.toLowerCase(),Xp=jo[0].toUpperCase()+jo.slice(1);Jt(Jp,"on"+Xp)}Jt(Xd,"onAnimationEnd");Jt(Zd,"onAnimationIteration");Jt(eh,"onAnimationStart");Jt("dblclick","onDoubleClick");Jt("focusin","onFocus");Jt("focusout","onBlur");Jt(th,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function Ac(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Jm(n,t,void 0,e),e.currentTarget=null}function nh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ac(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ac(s,l,u),i=c}}}if(di)throw e=oa,di=!1,oa=null,e}function Z(e,t){var r=t[ga];r===void 0&&(r=t[ga]=new Set);var n=e+"__bubble";r.has(n)||(sh(t,e,2,!1),r.add(n))}function So(e,t,r){var n=0;t&&(n|=4),sh(r,e,n,t)}var Ts="_reactListening"+Math.random().toString(36).slice(2);function Xn(e){if(!e[Ts]){e[Ts]=!0,dd.forEach(function(r){r!=="selectionchange"&&(Zp.has(r)||So(r,!1,e),So(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ts]||(t[Ts]=!0,So("selectionchange",!1,t))}}function sh(e,t,r,n){switch(Ud(t)){case 1:var s=fp;break;case 4:s=mp;break;default:s=ml}r=s.bind(null,t,r,e),s=void 0,!ia||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function No(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=lr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Ed(function(){var u=i,d=ul(r),f=[];e:{var h=rh.get(e);if(h!==void 0){var p=gl,v=e;switch(e){case"keypress":if(Js(r)===0)break e;case"keydown":case"keyup":p=Pp;break;case"focusin":v="focus",p=wo;break;case"focusout":v="blur",p=wo;break;case"beforeblur":case"afterblur":p=wo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Op;break;case Xd:case Zd:case eh:p=xp;break;case th:p=Mp;break;case"scroll":p=pp;break;case"wheel":p=Ap;break;case"copy":case"cut":case"paste":p=kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Nc}var x=(t&4)!==0,S=!x&&e==="scroll",g=x?h!==null?h+"Capture":null:h;x=[];for(var m=u,y;m!==null;){y=m;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,g!==null&&(_=qn(m,g),_!=null&&x.push(Zn(m,_,y)))),S)break;m=m.return}0<x.length&&(h=new p(h,v,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==na&&(v=r.relatedTarget||r.fromElement)&&(lr(v)||v[bt]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?lr(v):null,v!==null&&(S=xr(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(x=jc,_="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=Nc,_="onPointerLeave",g="onPointerEnter",m="pointer"),S=p==null?h:Mr(p),y=v==null?h:Mr(v),h=new x(_,m+"leave",p,r,d),h.target=S,h.relatedTarget=y,_=null,lr(d)===u&&(x=new x(g,m+"enter",v,r,d),x.target=y,x.relatedTarget=S,_=x),S=_,p&&v)t:{for(x=p,g=v,m=0,y=x;y;y=jr(y))m++;for(y=0,_=g;_;_=jr(_))y++;for(;0<m-y;)x=jr(x),m--;for(;0<y-m;)g=jr(g),y--;for(;m--;){if(x===g||g!==null&&x===g.alternate)break t;x=jr(x),g=jr(g)}x=null}else x=null;p!==null&&$c(f,h,p,x,!1),v!==null&&S!==null&&$c(f,S,v,x,!0)}}e:{if(h=u?Mr(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=Bp;else if(Pc(h))if(Yd)k=Yp;else{k=Vp;var E=Hp}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=qp);if(k&&(k=k(e,u))){qd(f,k,r,d);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Xo(h,"number",h.value)}switch(E=u?Mr(u):window,e){case"focusin":(Pc(E)||E.contentEditable==="true")&&(Or=E,ua=u,$n=null);break;case"focusout":$n=ua=Or=null;break;case"mousedown":da=!0;break;case"contextmenu":case"mouseup":case"dragend":da=!1,Mc(f,r,d);break;case"selectionchange":if(Kp)break;case"keydown":case"keyup":Mc(f,r,d)}var b;if(vl)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Rr?Hd(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Bd&&r.locale!=="ko"&&(Rr||N!=="onCompositionStart"?N==="onCompositionEnd"&&Rr&&(b=Wd()):(Ft=d,pl="value"in Ft?Ft.value:Ft.textContent,Rr=!0)),E=gi(u,N),0<E.length&&(N=new Sc(N,e,null,r,d),f.push({event:N,listeners:E}),b?N.data=b:(b=Vd(r),b!==null&&(N.data=b)))),(b=Ip?Fp(e,r):zp(e,r))&&(u=gi(u,"onBeforeInput"),0<u.length&&(d=new Sc("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=b))}nh(f,t)})}function Zn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qn(e,r),i!=null&&n.unshift(Zn(e,i,s)),i=qn(e,t),i!=null&&n.push(Zn(e,i,s))),e=e.return}return n}function jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $c(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=qn(r,i),c!=null&&o.unshift(Zn(r,c,l))):s||(c=qn(r,i),c!=null&&o.push(Zn(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var eg=/\r\n?/g,tg=/\u0000|\uFFFD/g;function Ic(e){return(typeof e=="string"?e:""+e).replace(eg,`
`).replace(tg,"")}function Rs(e,t,r){if(t=Ic(t),Ic(e)!==t&&r)throw Error(P(425))}function yi(){}var ha=null,fa=null;function ma(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pa=typeof setTimeout=="function"?setTimeout:void 0,rg=typeof clearTimeout=="function"?clearTimeout:void 0,Fc=typeof Promise=="function"?Promise:void 0,ng=typeof queueMicrotask=="function"?queueMicrotask:typeof Fc<"u"?function(e){return Fc.resolve(null).then(e).catch(sg)}:pa;function sg(e){setTimeout(function(){throw e})}function Eo(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Qn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Qn(t)}function Ht(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cn=Math.random().toString(36).slice(2),ht="__reactFiber$"+cn,es="__reactProps$"+cn,bt="__reactContainer$"+cn,ga="__reactEvents$"+cn,ig="__reactListeners$"+cn,og="__reactHandles$"+cn;function lr(e){var t=e[ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[bt]||r[ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=zc(e);e!==null;){if(r=e[ht])return r;e=zc(e)}return t}e=r,r=e.parentNode}return null}function ms(e){return e=e[ht]||e[bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Wi(e){return e[es]||null}var ya=[],Lr=-1;function Xt(e){return{current:e}}function ee(e){0>Lr||(e.current=ya[Lr],ya[Lr]=null,Lr--)}function X(e,t){Lr++,ya[Lr]=e.current,e.current=t}var Kt={},je=Xt(Kt),Ae=Xt(!1),fr=Kt;function Qr(e,t){var r=e.type.contextTypes;if(!r)return Kt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $e(e){return e=e.childContextTypes,e!=null}function vi(){ee(Ae),ee(je)}function Uc(e,t,r){if(je.current!==Kt)throw Error(P(168));X(je,t),X(Ae,r)}function ih(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,Hm(e)||"Unknown",s));return ie({},r,n)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kt,fr=je.current,X(je,e),X(Ae,Ae.current),!0}function Wc(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=ih(e,t,fr),n.__reactInternalMemoizedMergedChildContext=e,ee(Ae),ee(je),X(je,e)):ee(Ae),X(Ae,r)}var vt=null,Bi=!1,Co=!1;function oh(e){vt===null?vt=[e]:vt.push(e)}function ag(e){Bi=!0,oh(e)}function Zt(){if(!Co&&vt!==null){Co=!0;var e=0,t=G;try{var r=vt;for(G=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vt=null,Bi=!1}catch(s){throw vt!==null&&(vt=vt.slice(e+1)),Rd(dl,Zt),s}finally{G=t,Co=!1}}return null}var Ar=[],$r=0,xi=null,_i=0,qe=[],Ye=0,mr=null,wt=1,xt="";function rr(e,t){Ar[$r++]=_i,Ar[$r++]=xi,xi=e,_i=t}function ah(e,t,r){qe[Ye++]=wt,qe[Ye++]=xt,qe[Ye++]=mr,mr=e;var n=wt;e=xt;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,wt=1<<32-ot(t)+s|r<<s|n,xt=i+e}else wt=1<<i|r<<s|n,xt=e}function xl(e){e.return!==null&&(rr(e,1),ah(e,1,0))}function _l(e){for(;e===xi;)xi=Ar[--$r],Ar[$r]=null,_i=Ar[--$r],Ar[$r]=null;for(;e===mr;)mr=qe[--Ye],qe[Ye]=null,xt=qe[--Ye],qe[Ye]=null,wt=qe[--Ye],qe[Ye]=null}var We=null,Ue=null,re=!1,it=null;function lh(e,t){var r=Ge(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Bc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,We=e,Ue=Ht(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,We=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mr!==null?{id:wt,overflow:xt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ge(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,We=e,Ue=null,!0):!1;default:return!1}}function va(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wa(e){if(re){var t=Ue;if(t){var r=t;if(!Bc(e,t)){if(va(e))throw Error(P(418));t=Ht(r.nextSibling);var n=We;t&&Bc(e,t)?lh(n,r):(e.flags=e.flags&-4097|2,re=!1,We=e)}}else{if(va(e))throw Error(P(418));e.flags=e.flags&-4097|2,re=!1,We=e}}}function Hc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;We=e}function Os(e){if(e!==We)return!1;if(!re)return Hc(e),re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ma(e.type,e.memoizedProps)),t&&(t=Ue)){if(va(e))throw ch(),Error(P(418));for(;t;)lh(e,t),t=Ht(t.nextSibling)}if(Hc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ue=Ht(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=We?Ht(e.stateNode.nextSibling):null;return!0}function ch(){for(var e=Ue;e;)e=Ht(e.nextSibling)}function Kr(){Ue=We=null,re=!1}function kl(e){it===null?it=[e]:it.push(e)}var lg=Nt.ReactCurrentBatchConfig;function yn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function Ds(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vc(e){var t=e._init;return t(e._payload)}function uh(e){function t(g,m){if(e){var y=g.deletions;y===null?(g.deletions=[m],g.flags|=16):y.push(m)}}function r(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Gt(g,m),g.index=0,g.sibling=null,g}function i(g,m,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<m?(g.flags|=2,m):y):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,m,y,_){return m===null||m.tag!==6?(m=Lo(y,g.mode,_),m.return=g,m):(m=s(m,y),m.return=g,m)}function c(g,m,y,_){var k=y.type;return k===Tr?d(g,m,y.props.children,_,y.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ot&&Vc(k)===m.type)?(_=s(m,y.props),_.ref=yn(g,m,y),_.return=g,_):(_=si(y.type,y.key,y.props,null,g.mode,_),_.ref=yn(g,m,y),_.return=g,_)}function u(g,m,y,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Ao(y,g.mode,_),m.return=g,m):(m=s(m,y.children||[]),m.return=g,m)}function d(g,m,y,_,k){return m===null||m.tag!==7?(m=hr(y,g.mode,_,k),m.return=g,m):(m=s(m,y),m.return=g,m)}function f(g,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Lo(""+m,g.mode,y),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ks:return y=si(m.type,m.key,m.props,null,g.mode,y),y.ref=yn(g,null,m),y.return=g,y;case Pr:return m=Ao(m,g.mode,y),m.return=g,m;case Ot:var _=m._init;return f(g,_(m._payload),y)}if(Pn(m)||hn(m))return m=hr(m,g.mode,y,null),m.return=g,m;Ds(g,m)}return null}function h(g,m,y,_){var k=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:l(g,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ks:return y.key===k?c(g,m,y,_):null;case Pr:return y.key===k?u(g,m,y,_):null;case Ot:return k=y._init,h(g,m,k(y._payload),_)}if(Pn(y)||hn(y))return k!==null?null:d(g,m,y,_,null);Ds(g,y)}return null}function p(g,m,y,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(y)||null,l(m,g,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ks:return g=g.get(_.key===null?y:_.key)||null,c(m,g,_,k);case Pr:return g=g.get(_.key===null?y:_.key)||null,u(m,g,_,k);case Ot:var E=_._init;return p(g,m,y,E(_._payload),k)}if(Pn(_)||hn(_))return g=g.get(y)||null,d(m,g,_,k,null);Ds(m,_)}return null}function v(g,m,y,_){for(var k=null,E=null,b=m,N=m=0,L=null;b!==null&&N<y.length;N++){b.index>N?(L=b,b=null):L=b.sibling;var R=h(g,b,y[N],_);if(R===null){b===null&&(b=L);break}e&&b&&R.alternate===null&&t(g,b),m=i(R,m,N),E===null?k=R:E.sibling=R,E=R,b=L}if(N===y.length)return r(g,b),re&&rr(g,N),k;if(b===null){for(;N<y.length;N++)b=f(g,y[N],_),b!==null&&(m=i(b,m,N),E===null?k=b:E.sibling=b,E=b);return re&&rr(g,N),k}for(b=n(g,b);N<y.length;N++)L=p(b,g,N,y[N],_),L!==null&&(e&&L.alternate!==null&&b.delete(L.key===null?N:L.key),m=i(L,m,N),E===null?k=L:E.sibling=L,E=L);return e&&b.forEach(function(q){return t(g,q)}),re&&rr(g,N),k}function x(g,m,y,_){var k=hn(y);if(typeof k!="function")throw Error(P(150));if(y=k.call(y),y==null)throw Error(P(151));for(var E=k=null,b=m,N=m=0,L=null,R=y.next();b!==null&&!R.done;N++,R=y.next()){b.index>N?(L=b,b=null):L=b.sibling;var q=h(g,b,R.value,_);if(q===null){b===null&&(b=L);break}e&&b&&q.alternate===null&&t(g,b),m=i(q,m,N),E===null?k=q:E.sibling=q,E=q,b=L}if(R.done)return r(g,b),re&&rr(g,N),k;if(b===null){for(;!R.done;N++,R=y.next())R=f(g,R.value,_),R!==null&&(m=i(R,m,N),E===null?k=R:E.sibling=R,E=R);return re&&rr(g,N),k}for(b=n(g,b);!R.done;N++,R=y.next())R=p(b,g,N,R.value,_),R!==null&&(e&&R.alternate!==null&&b.delete(R.key===null?N:R.key),m=i(R,m,N),E===null?k=R:E.sibling=R,E=R);return e&&b.forEach(function($){return t(g,$)}),re&&rr(g,N),k}function S(g,m,y,_){if(typeof y=="object"&&y!==null&&y.type===Tr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ks:e:{for(var k=y.key,E=m;E!==null;){if(E.key===k){if(k=y.type,k===Tr){if(E.tag===7){r(g,E.sibling),m=s(E,y.props.children),m.return=g,g=m;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ot&&Vc(k)===E.type){r(g,E.sibling),m=s(E,y.props),m.ref=yn(g,E,y),m.return=g,g=m;break e}r(g,E);break}else t(g,E);E=E.sibling}y.type===Tr?(m=hr(y.props.children,g.mode,_,y.key),m.return=g,g=m):(_=si(y.type,y.key,y.props,null,g.mode,_),_.ref=yn(g,m,y),_.return=g,g=_)}return o(g);case Pr:e:{for(E=y.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){r(g,m.sibling),m=s(m,y.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else t(g,m);m=m.sibling}m=Ao(y,g.mode,_),m.return=g,g=m}return o(g);case Ot:return E=y._init,S(g,m,E(y._payload),_)}if(Pn(y))return v(g,m,y,_);if(hn(y))return x(g,m,y,_);Ds(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(r(g,m.sibling),m=s(m,y),m.return=g,g=m):(r(g,m),m=Lo(y,g.mode,_),m.return=g,g=m),o(g)):r(g,m)}return S}var Jr=uh(!0),dh=uh(!1),ki=Xt(null),bi=null,Ir=null,bl=null;function jl(){bl=Ir=bi=null}function Sl(e){var t=ki.current;ee(ki),e._currentValue=t}function xa(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Vr(e,t){bi=e,bl=Ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function Xe(e){var t=e._currentValue;if(bl!==e)if(e={context:e,memoizedValue:t,next:null},Ir===null){if(bi===null)throw Error(P(308));Ir=e,bi.dependencies={lanes:0,firstContext:e}}else Ir=Ir.next=e;return t}var cr=null;function Nl(e){cr===null?cr=[e]:cr.push(e)}function hh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Nl(t)):(r.next=s.next,s.next=r),t.interleaved=r,jt(e,n)}function jt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Dt=!1;function El(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _t(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,V&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,jt(e,r)}return s=n.interleaved,s===null?(t.next=t,Nl(n)):(t.next=s.next,s.next=t),n.interleaved=t,jt(e,r)}function Xs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,hl(e,r)}}function qc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ji(e,t,r,n){var s=e.updateQueue;Dt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(h=t,p=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=ie({},f,h);break e;case 2:Dt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);gr|=o,e.lanes=o,e.memoizedState=f}}function Yc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var ps={},pt=Xt(ps),ts=Xt(ps),rs=Xt(ps);function ur(e){if(e===ps)throw Error(P(174));return e}function Cl(e,t){switch(X(rs,t),X(ts,e),X(pt,ps),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ea(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ea(t,e)}ee(pt),X(pt,t)}function Xr(){ee(pt),ee(ts),ee(rs)}function mh(e){ur(rs.current);var t=ur(pt.current),r=ea(t,e.type);t!==r&&(X(ts,e),X(pt,r))}function Pl(e){ts.current===e&&(ee(pt),ee(ts))}var ne=Xt(0);function Si(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Po=[];function Tl(){for(var e=0;e<Po.length;e++)Po[e]._workInProgressVersionPrimary=null;Po.length=0}var Zs=Nt.ReactCurrentDispatcher,To=Nt.ReactCurrentBatchConfig,pr=0,se=null,de=null,pe=null,Ni=!1,In=!1,ns=0,cg=0;function _e(){throw Error(P(321))}function Rl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ct(e[r],t[r]))return!1;return!0}function Ol(e,t,r,n,s,i){if(pr=i,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zs.current=e===null||e.memoizedState===null?fg:mg,e=r(n,s),In){i=0;do{if(In=!1,ns=0,25<=i)throw Error(P(301));i+=1,pe=de=null,t.updateQueue=null,Zs.current=pg,e=r(n,s)}while(In)}if(Zs.current=Ei,t=de!==null&&de.next!==null,pr=0,pe=de=se=null,Ni=!1,t)throw Error(P(300));return e}function Dl(){var e=ns!==0;return ns=0,e}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?se.memoizedState=pe=e:pe=pe.next=e,pe}function Ze(){if(de===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var t=pe===null?se.memoizedState:pe.next;if(t!==null)pe=t,de=e;else{if(e===null)throw Error(P(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},pe===null?se.memoizedState=pe=e:pe=pe.next=e}return pe}function ss(e,t){return typeof t=="function"?t(e):t}function Ro(e){var t=Ze(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=de,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((pr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,se.lanes|=d,gr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,ct(n,t.memoizedState)||(Le=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,se.lanes|=i,gr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Oo(e){var t=Ze(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);ct(i,t.memoizedState)||(Le=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function ph(){}function gh(e,t){var r=se,n=Ze(),s=t(),i=!ct(n.memoizedState,s);if(i&&(n.memoizedState=s,Le=!0),n=n.queue,Ml(wh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||pe!==null&&pe.memoizedState.tag&1){if(r.flags|=2048,is(9,vh.bind(null,r,n,s,t),void 0,null),ge===null)throw Error(P(349));pr&30||yh(r,t,s)}return s}function yh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function vh(e,t,r,n){t.value=r,t.getSnapshot=n,xh(t)&&_h(e)}function wh(e,t,r){return r(function(){xh(t)&&_h(e)})}function xh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ct(e,r)}catch{return!0}}function _h(e){var t=jt(e,1);t!==null&&at(t,e,1,-1)}function Gc(e){var t=dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},t.queue=e,e=e.dispatch=hg.bind(null,se,e),[t.memoizedState,e]}function is(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function kh(){return Ze().memoizedState}function ei(e,t,r,n){var s=dt();se.flags|=e,s.memoizedState=is(1|t,r,void 0,n===void 0?null:n)}function Hi(e,t,r,n){var s=Ze();n=n===void 0?null:n;var i=void 0;if(de!==null){var o=de.memoizedState;if(i=o.destroy,n!==null&&Rl(n,o.deps)){s.memoizedState=is(t,r,i,n);return}}se.flags|=e,s.memoizedState=is(1|t,r,i,n)}function Qc(e,t){return ei(8390656,8,e,t)}function Ml(e,t){return Hi(2048,8,e,t)}function bh(e,t){return Hi(4,2,e,t)}function jh(e,t){return Hi(4,4,e,t)}function Sh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nh(e,t,r){return r=r!=null?r.concat([e]):null,Hi(4,4,Sh.bind(null,t,e),r)}function Ll(){}function Eh(e,t){var r=Ze();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ch(e,t){var r=Ze();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ph(e,t,r){return pr&21?(ct(r,t)||(r=Md(),se.lanes|=r,gr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=r)}function ug(e,t){var r=G;G=r!==0&&4>r?r:4,e(!0);var n=To.transition;To.transition={};try{e(!1),t()}finally{G=r,To.transition=n}}function Th(){return Ze().memoizedState}function dg(e,t,r){var n=Yt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Rh(e))Oh(t,r);else if(r=hh(e,t,r,n),r!==null){var s=Ne();at(r,e,n,s),Dh(r,t,n)}}function hg(e,t,r){var n=Yt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Rh(e))Oh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,ct(l,o)){var c=t.interleaved;c===null?(s.next=s,Nl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=hh(e,t,s,n),r!==null&&(s=Ne(),at(r,e,n,s),Dh(r,t,n))}}function Rh(e){var t=e.alternate;return e===se||t!==null&&t===se}function Oh(e,t){In=Ni=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Dh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,hl(e,r)}}var Ei={readContext:Xe,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},fg={readContext:Xe,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:Xe,useEffect:Qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ei(4194308,4,Sh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ei(4194308,4,e,t)},useInsertionEffect:function(e,t){return ei(4,2,e,t)},useMemo:function(e,t){var r=dt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=dt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=dg.bind(null,se,e),[n.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:Gc,useDebugValue:Ll,useDeferredValue:function(e){return dt().memoizedState=e},useTransition:function(){var e=Gc(!1),t=e[0];return e=ug.bind(null,e[1]),dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=se,s=dt();if(re){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),ge===null)throw Error(P(349));pr&30||yh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Qc(wh.bind(null,n,i,e),[e]),n.flags|=2048,is(9,vh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=dt(),t=ge.identifierPrefix;if(re){var r=xt,n=wt;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ns++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=cg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mg={readContext:Xe,useCallback:Eh,useContext:Xe,useEffect:Ml,useImperativeHandle:Nh,useInsertionEffect:bh,useLayoutEffect:jh,useMemo:Ch,useReducer:Ro,useRef:kh,useState:function(){return Ro(ss)},useDebugValue:Ll,useDeferredValue:function(e){var t=Ze();return Ph(t,de.memoizedState,e)},useTransition:function(){var e=Ro(ss)[0],t=Ze().memoizedState;return[e,t]},useMutableSource:ph,useSyncExternalStore:gh,useId:Th,unstable_isNewReconciler:!1},pg={readContext:Xe,useCallback:Eh,useContext:Xe,useEffect:Ml,useImperativeHandle:Nh,useInsertionEffect:bh,useLayoutEffect:jh,useMemo:Ch,useReducer:Oo,useRef:kh,useState:function(){return Oo(ss)},useDebugValue:Ll,useDeferredValue:function(e){var t=Ze();return de===null?t.memoizedState=e:Ph(t,de.memoizedState,e)},useTransition:function(){var e=Oo(ss)[0],t=Ze().memoizedState;return[e,t]},useMutableSource:ph,useSyncExternalStore:gh,useId:Th,unstable_isNewReconciler:!1};function rt(e,t){if(e&&e.defaultProps){t=ie({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _a(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ie({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vi={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ne(),s=Yt(e),i=_t(n,s);i.payload=t,r!=null&&(i.callback=r),t=Vt(e,i,s),t!==null&&(at(t,e,s,n),Xs(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ne(),s=Yt(e),i=_t(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Vt(e,i,s),t!==null&&(at(t,e,s,n),Xs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ne(),n=Yt(e),s=_t(r,n);s.tag=2,t!=null&&(s.callback=t),t=Vt(e,s,n),t!==null&&(at(t,e,n,r),Xs(t,e,n))}};function Kc(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Jn(r,n)||!Jn(s,i):!0}function Mh(e,t,r){var n=!1,s=Kt,i=t.contextType;return typeof i=="object"&&i!==null?i=Xe(i):(s=$e(t)?fr:je.current,n=t.contextTypes,i=(n=n!=null)?Qr(e,s):Kt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Jc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vi.enqueueReplaceState(t,t.state,null)}function ka(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},El(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Xe(i):(i=$e(t)?fr:je.current,s.context=Qr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(_a(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vi.enqueueReplaceState(s,s.state,null),ji(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zr(e,t){try{var r="",n=t;do r+=Bm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Do(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ba(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gg=typeof WeakMap=="function"?WeakMap:Map;function Lh(e,t,r){r=_t(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Pi||(Pi=!0,Da=n),ba(e,t)},r}function Ah(e,t,r){r=_t(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ba(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ba(e,t),typeof n!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Xc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new gg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Tg.bind(null,e,t,r),t.then(e,e))}function Zc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function eu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_t(-1,1),t.tag=2,Vt(r,t,1))),r.lanes|=1),e)}var yg=Nt.ReactCurrentOwner,Le=!1;function Se(e,t,r,n){t.child=e===null?dh(t,null,r,n):Jr(t,e.child,r,n)}function tu(e,t,r,n,s){r=r.render;var i=t.ref;return Vr(t,s),n=Ol(e,t,r,n,i,s),r=Dl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,St(e,t,s)):(re&&r&&xl(t),t.flags|=1,Se(e,t,n,s),t.child)}function ru(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Bl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,$h(e,t,i,n,s)):(e=si(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Jn,r(o,n)&&e.ref===t.ref)return St(e,t,s)}return t.flags|=1,e=Gt(i,n),e.ref=t.ref,e.return=t,t.child=e}function $h(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Jn(i,n)&&e.ref===t.ref)if(Le=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,St(e,t,s)}return ja(e,t,r,n,s)}function Ih(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(zr,ze),ze|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,X(zr,ze),ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,X(zr,ze),ze|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,X(zr,ze),ze|=n;return Se(e,t,s,r),t.child}function Fh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ja(e,t,r,n,s){var i=$e(r)?fr:je.current;return i=Qr(t,i),Vr(t,s),r=Ol(e,t,r,n,i,s),n=Dl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,St(e,t,s)):(re&&n&&xl(t),t.flags|=1,Se(e,t,r,s),t.child)}function nu(e,t,r,n,s){if($e(r)){var i=!0;wi(t)}else i=!1;if(Vr(t,s),t.stateNode===null)ti(e,t),Mh(t,r,n),ka(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Xe(u):(u=$e(r)?fr:je.current,u=Qr(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Jc(t,o,n,u),Dt=!1;var h=t.memoizedState;o.state=h,ji(t,n,o,s),c=t.memoizedState,l!==n||h!==c||Ae.current||Dt?(typeof d=="function"&&(_a(t,r,d,n),c=t.memoizedState),(l=Dt||Kc(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,fh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:rt(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Xe(c):(c=$e(r)?fr:je.current,c=Qr(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&Jc(t,o,n,c),Dt=!1,h=t.memoizedState,o.state=h,ji(t,n,o,s);var v=t.memoizedState;l!==f||h!==v||Ae.current||Dt?(typeof p=="function"&&(_a(t,r,p,n),v=t.memoizedState),(u=Dt||Kc(t,r,u,n,h,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Sa(e,t,r,n,i,s)}function Sa(e,t,r,n,s,i){Fh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Wc(t,r,!1),St(e,t,i);n=t.stateNode,yg.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Jr(t,e.child,null,i),t.child=Jr(t,null,l,i)):Se(e,t,l,i),t.memoizedState=n.state,s&&Wc(t,r,!0),t.child}function zh(e){var t=e.stateNode;t.pendingContext?Uc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uc(e,t.context,!1),Cl(e,t.containerInfo)}function su(e,t,r,n,s){return Kr(),kl(s),t.flags|=256,Se(e,t,r,n),t.child}var Na={dehydrated:null,treeContext:null,retryLane:0};function Ea(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uh(e,t,r){var n=t.pendingProps,s=ne.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),X(ne,s&1),e===null)return wa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Gi(o,n,0,null),e=hr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ea(r),t.memoizedState=Na,e):Al(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vg(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Gt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Gt(l,i):(i=hr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Ea(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Na,n}return i=e.child,e=i.sibling,n=Gt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Al(e,t){return t=Gi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ms(e,t,r,n){return n!==null&&kl(n),Jr(t,e.child,null,r),e=Al(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vg(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Do(Error(P(422))),Ms(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Gi({mode:"visible",children:n.children},s,0,null),i=hr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Jr(t,e.child,null,o),t.child.memoizedState=Ea(o),t.memoizedState=Na,i);if(!(t.mode&1))return Ms(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(P(419)),n=Do(i,n,void 0),Ms(e,t,o,n)}if(l=(o&e.childLanes)!==0,Le||l){if(n=ge,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jt(e,s),at(n,e,s,-1))}return Wl(),n=Do(Error(P(421))),Ms(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Rg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ue=Ht(s.nextSibling),We=t,re=!0,it=null,e!==null&&(qe[Ye++]=wt,qe[Ye++]=xt,qe[Ye++]=mr,wt=e.id,xt=e.overflow,mr=t),t=Al(t,n.children),t.flags|=4096,t)}function iu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),xa(e.return,t,r)}function Mo(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Wh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Se(e,t,n.children,r),n=ne.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iu(e,r,t);else if(e.tag===19)iu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(X(ne,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Si(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Mo(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Si(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Mo(t,!0,r,null,i);break;case"together":Mo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ti(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function St(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=Gt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function wg(e,t,r){switch(t.tag){case 3:zh(t),Kr();break;case 5:mh(t);break;case 1:$e(t.type)&&wi(t);break;case 4:Cl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;X(ki,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(X(ne,ne.current&1),t.flags|=128,null):r&t.child.childLanes?Uh(e,t,r):(X(ne,ne.current&1),e=St(e,t,r),e!==null?e.sibling:null);X(ne,ne.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Wh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),X(ne,ne.current),n)break;return null;case 22:case 23:return t.lanes=0,Ih(e,t,r)}return St(e,t,r)}var Bh,Ca,Hh,Vh;Bh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ca=function(){};Hh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ur(pt.current);var i=null;switch(r){case"input":s=Ko(e,s),n=Ko(e,n),i=[];break;case"select":s=ie({},s,{value:void 0}),n=ie({},n,{value:void 0}),i=[];break;case"textarea":s=Zo(e,s),n=Zo(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yi)}ta(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Z("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Vh=function(e,t,r,n){r!==n&&(t.flags|=4)};function vn(e,t){if(!re)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function xg(e,t,r){var n=t.pendingProps;switch(_l(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(t),null;case 1:return $e(t.type)&&vi(),ke(t),null;case 3:return n=t.stateNode,Xr(),ee(Ae),ee(je),Tl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Os(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,it!==null&&(Aa(it),it=null))),Ca(e,t),ke(t),null;case 5:Pl(t);var s=ur(rs.current);if(r=t.type,e!==null&&t.stateNode!=null)Hh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return ke(t),null}if(e=ur(pt.current),Os(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ht]=t,n[es]=i,e=(t.mode&1)!==0,r){case"dialog":Z("cancel",n),Z("close",n);break;case"iframe":case"object":case"embed":Z("load",n);break;case"video":case"audio":for(s=0;s<Rn.length;s++)Z(Rn[s],n);break;case"source":Z("error",n);break;case"img":case"image":case"link":Z("error",n),Z("load",n);break;case"details":Z("toggle",n);break;case"input":mc(n,i),Z("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Z("invalid",n);break;case"textarea":gc(n,i),Z("invalid",n)}ta(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Rs(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Rs(n.textContent,l,e),s=["children",""+l]):Hn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Z("scroll",n)}switch(r){case"input":bs(n),pc(n,i,!0);break;case"textarea":bs(n),yc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ht]=t,e[es]=n,Bh(e,t,!1,!1),t.stateNode=e;e:{switch(o=ra(r,n),r){case"dialog":Z("cancel",e),Z("close",e),s=n;break;case"iframe":case"object":case"embed":Z("load",e),s=n;break;case"video":case"audio":for(s=0;s<Rn.length;s++)Z(Rn[s],e);s=n;break;case"source":Z("error",e),s=n;break;case"img":case"image":case"link":Z("error",e),Z("load",e),s=n;break;case"details":Z("toggle",e),s=n;break;case"input":mc(e,n),s=Ko(e,n),Z("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ie({},n,{value:void 0}),Z("invalid",e);break;case"textarea":gc(e,n),s=Zo(e,n),Z("invalid",e);break;default:s=n}ta(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?kd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xd(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Vn(e,c):typeof c=="number"&&Vn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Z("scroll",e):c!=null&&ol(e,i,c,o))}switch(r){case"input":bs(e),pc(e,n,!1);break;case"textarea":bs(e),yc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Qt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ur(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ur(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ke(t),null;case 6:if(e&&t.stateNode!=null)Vh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=ur(rs.current),ur(pt.current),Os(t)){if(n=t.stateNode,r=t.memoizedProps,n[ht]=t,(i=n.nodeValue!==r)&&(e=We,e!==null))switch(e.tag){case 3:Rs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ht]=t,t.stateNode=n}return ke(t),null;case 13:if(ee(ne),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(re&&Ue!==null&&t.mode&1&&!(t.flags&128))ch(),Kr(),t.flags|=98560,i=!1;else if(i=Os(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[ht]=t}else Kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ke(t),i=!1}else it!==null&&(Aa(it),it=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ne.current&1?he===0&&(he=3):Wl())),t.updateQueue!==null&&(t.flags|=4),ke(t),null);case 4:return Xr(),Ca(e,t),e===null&&Xn(t.stateNode.containerInfo),ke(t),null;case 10:return Sl(t.type._context),ke(t),null;case 17:return $e(t.type)&&vi(),ke(t),null;case 19:if(ee(ne),i=t.memoizedState,i===null)return ke(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)vn(i,!1);else{if(he!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Si(e),o!==null){for(t.flags|=128,vn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return X(ne,ne.current&1|2),t.child}e=e.sibling}i.tail!==null&&le()>en&&(t.flags|=128,n=!0,vn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Si(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!re)return ke(t),null}else 2*le()-i.renderingStartTime>en&&r!==1073741824&&(t.flags|=128,n=!0,vn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,r=ne.current,X(ne,n?r&1|2:r&1),t):(ke(t),null);case 22:case 23:return Ul(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ze&1073741824&&(ke(t),t.subtreeFlags&6&&(t.flags|=8192)):ke(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function _g(e,t){switch(_l(t),t.tag){case 1:return $e(t.type)&&vi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xr(),ee(Ae),ee(je),Tl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pl(t),null;case 13:if(ee(ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(ne),null;case 4:return Xr(),null;case 10:return Sl(t.type._context),null;case 22:case 23:return Ul(),null;case 24:return null;default:return null}}var Ls=!1,be=!1,kg=typeof WeakSet=="function"?WeakSet:Set,D=null;function Fr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ae(e,t,n)}else r.current=null}function Pa(e,t,r){try{r()}catch(n){ae(e,t,n)}}var ou=!1;function bg(e,t){if(ha=mi,e=Kd(),wl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=o),h===i&&++d===n&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(fa={focusedElem:e,selectionRange:r},mi=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,S=v.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:rt(t.type,x),S);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(_){ae(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return v=ou,ou=!1,v}function Fn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pa(t,r,i)}s=s.next}while(s!==n)}}function qi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ta(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function qh(e){var t=e.alternate;t!==null&&(e.alternate=null,qh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ht],delete t[es],delete t[ga],delete t[ig],delete t[og])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yh(e){return e.tag===5||e.tag===3||e.tag===4}function au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ra(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yi));else if(n!==4&&(e=e.child,e!==null))for(Ra(e,t,r),e=e.sibling;e!==null;)Ra(e,t,r),e=e.sibling}function Oa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Oa(e,t,r),e=e.sibling;e!==null;)Oa(e,t,r),e=e.sibling}var ve=null,nt=!1;function Ct(e,t,r){for(r=r.child;r!==null;)Gh(e,t,r),r=r.sibling}function Gh(e,t,r){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Ii,r)}catch{}switch(r.tag){case 5:be||Fr(r,t);case 6:var n=ve,s=nt;ve=null,Ct(e,t,r),ve=n,nt=s,ve!==null&&(nt?(e=ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ve.removeChild(r.stateNode));break;case 18:ve!==null&&(nt?(e=ve,r=r.stateNode,e.nodeType===8?Eo(e.parentNode,r):e.nodeType===1&&Eo(e,r),Qn(e)):Eo(ve,r.stateNode));break;case 4:n=ve,s=nt,ve=r.stateNode.containerInfo,nt=!0,Ct(e,t,r),ve=n,nt=s;break;case 0:case 11:case 14:case 15:if(!be&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Pa(r,t,o),s=s.next}while(s!==n)}Ct(e,t,r);break;case 1:if(!be&&(Fr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ae(r,t,l)}Ct(e,t,r);break;case 21:Ct(e,t,r);break;case 22:r.mode&1?(be=(n=be)||r.memoizedState!==null,Ct(e,t,r),be=n):Ct(e,t,r);break;default:Ct(e,t,r)}}function lu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kg),t.forEach(function(n){var s=Og.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function et(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,nt=!1;break e;case 3:ve=l.stateNode.containerInfo,nt=!0;break e;case 4:ve=l.stateNode.containerInfo,nt=!0;break e}l=l.return}if(ve===null)throw Error(P(160));Gh(i,o,s),ve=null,nt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ae(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qh(t,e),t=t.sibling}function Qh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(et(t,e),ut(e),n&4){try{Fn(3,e,e.return),qi(3,e)}catch(x){ae(e,e.return,x)}try{Fn(5,e,e.return)}catch(x){ae(e,e.return,x)}}break;case 1:et(t,e),ut(e),n&512&&r!==null&&Fr(r,r.return);break;case 5:if(et(t,e),ut(e),n&512&&r!==null&&Fr(r,r.return),e.flags&32){var s=e.stateNode;try{Vn(s,"")}catch(x){ae(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&yd(s,i),ra(l,o);var u=ra(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?kd(s,f):d==="dangerouslySetInnerHTML"?xd(s,f):d==="children"?Vn(s,f):ol(s,d,f,u)}switch(l){case"input":Jo(s,i);break;case"textarea":vd(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ur(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ur(s,!!i.multiple,i.defaultValue,!0):Ur(s,!!i.multiple,i.multiple?[]:"",!1))}s[es]=i}catch(x){ae(e,e.return,x)}}break;case 6:if(et(t,e),ut(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){ae(e,e.return,x)}}break;case 3:if(et(t,e),ut(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qn(t.containerInfo)}catch(x){ae(e,e.return,x)}break;case 4:et(t,e),ut(e);break;case 13:et(t,e),ut(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Fl=le())),n&4&&lu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(be=(u=be)||d,et(t,e),be=u):et(t,e),ut(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(D=e,d=e.child;d!==null;){for(f=D=d;D!==null;){switch(h=D,p=h.child,h.tag){case 0:case 11:case 14:case 15:Fn(4,h,h.return);break;case 1:Fr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){ae(n,r,x)}}break;case 5:Fr(h,h.return);break;case 22:if(h.memoizedState!==null){uu(f);continue}}p!==null?(p.return=h,D=p):uu(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=_d("display",o))}catch(x){ae(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){ae(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:et(t,e),ut(e),n&4&&lu(e);break;case 21:break;default:et(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Yh(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Vn(s,""),n.flags&=-33);var i=au(e);Oa(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=au(e);Ra(e,l,o);break;default:throw Error(P(161))}}catch(c){ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jg(e,t,r){D=e,Kh(e)}function Kh(e,t,r){for(var n=(e.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ls;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||be;l=Ls;var u=be;if(Ls=o,(be=c)&&!u)for(D=s;D!==null;)o=D,c=o.child,o.tag===22&&o.memoizedState!==null?du(s):c!==null?(c.return=o,D=c):du(s);for(;i!==null;)D=i,Kh(i),i=i.sibling;D=s,Ls=l,be=u}cu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):cu(e)}}function cu(e){for(;D!==null;){var t=D;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:be||qi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!be)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:rt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Yc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Yc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Qn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}be||t.flags&512&&Ta(t)}catch(h){ae(t,t.return,h)}}if(t===e){D=null;break}if(r=t.sibling,r!==null){r.return=t.return,D=r;break}D=t.return}}function uu(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var r=t.sibling;if(r!==null){r.return=t.return,D=r;break}D=t.return}}function du(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qi(4,t)}catch(c){ae(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ae(t,s,c)}}var i=t.return;try{Ta(t)}catch(c){ae(t,i,c)}break;case 5:var o=t.return;try{Ta(t)}catch(c){ae(t,o,c)}}}catch(c){ae(t,t.return,c)}if(t===e){D=null;break}var l=t.sibling;if(l!==null){l.return=t.return,D=l;break}D=t.return}}var Sg=Math.ceil,Ci=Nt.ReactCurrentDispatcher,$l=Nt.ReactCurrentOwner,Qe=Nt.ReactCurrentBatchConfig,V=0,ge=null,ce=null,we=0,ze=0,zr=Xt(0),he=0,os=null,gr=0,Yi=0,Il=0,zn=null,De=null,Fl=0,en=1/0,yt=null,Pi=!1,Da=null,qt=null,As=!1,zt=null,Ti=0,Un=0,Ma=null,ri=-1,ni=0;function Ne(){return V&6?le():ri!==-1?ri:ri=le()}function Yt(e){return e.mode&1?V&2&&we!==0?we&-we:lg.transition!==null?(ni===0&&(ni=Md()),ni):(e=G,e!==0||(e=window.event,e=e===void 0?16:Ud(e.type)),e):1}function at(e,t,r,n){if(50<Un)throw Un=0,Ma=null,Error(P(185));hs(e,r,n),(!(V&2)||e!==ge)&&(e===ge&&(!(V&2)&&(Yi|=r),he===4&&At(e,we)),Ie(e,n),r===1&&V===0&&!(t.mode&1)&&(en=le()+500,Bi&&Zt()))}function Ie(e,t){var r=e.callbackNode;lp(e,t);var n=fi(e,e===ge?we:0);if(n===0)r!==null&&xc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&xc(r),t===1)e.tag===0?ag(hu.bind(null,e)):oh(hu.bind(null,e)),ng(function(){!(V&6)&&Zt()}),r=null;else{switch(Ld(n)){case 1:r=dl;break;case 4:r=Od;break;case 16:r=hi;break;case 536870912:r=Dd;break;default:r=hi}r=sf(r,Jh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Jh(e,t){if(ri=-1,ni=0,V&6)throw Error(P(327));var r=e.callbackNode;if(qr()&&e.callbackNode!==r)return null;var n=fi(e,e===ge?we:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ri(e,n);else{t=n;var s=V;V|=2;var i=Zh();(ge!==e||we!==t)&&(yt=null,en=le()+500,dr(e,t));do try{Cg();break}catch(l){Xh(e,l)}while(!0);jl(),Ci.current=i,V=s,ce!==null?t=0:(ge=null,we=0,t=he)}if(t!==0){if(t===2&&(s=aa(e),s!==0&&(n=s,t=La(e,s))),t===1)throw r=os,dr(e,0),At(e,n),Ie(e,le()),r;if(t===6)At(e,n);else{if(s=e.current.alternate,!(n&30)&&!Ng(s)&&(t=Ri(e,n),t===2&&(i=aa(e),i!==0&&(n=i,t=La(e,i))),t===1))throw r=os,dr(e,0),At(e,n),Ie(e,le()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:nr(e,De,yt);break;case 3:if(At(e,n),(n&130023424)===n&&(t=Fl+500-le(),10<t)){if(fi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ne(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=pa(nr.bind(null,e,De,yt),t);break}nr(e,De,yt);break;case 4:if(At(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sg(n/1960))-n,10<n){e.timeoutHandle=pa(nr.bind(null,e,De,yt),n);break}nr(e,De,yt);break;case 5:nr(e,De,yt);break;default:throw Error(P(329))}}}return Ie(e,le()),e.callbackNode===r?Jh.bind(null,e):null}function La(e,t){var r=zn;return e.current.memoizedState.isDehydrated&&(dr(e,t).flags|=256),e=Ri(e,t),e!==2&&(t=De,De=r,t!==null&&Aa(t)),e}function Aa(e){De===null?De=e:De.push.apply(De,e)}function Ng(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ct(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function At(e,t){for(t&=~Il,t&=~Yi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function hu(e){if(V&6)throw Error(P(327));qr();var t=fi(e,0);if(!(t&1))return Ie(e,le()),null;var r=Ri(e,t);if(e.tag!==0&&r===2){var n=aa(e);n!==0&&(t=n,r=La(e,n))}if(r===1)throw r=os,dr(e,0),At(e,t),Ie(e,le()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nr(e,De,yt),Ie(e,le()),null}function zl(e,t){var r=V;V|=1;try{return e(t)}finally{V=r,V===0&&(en=le()+500,Bi&&Zt())}}function yr(e){zt!==null&&zt.tag===0&&!(V&6)&&qr();var t=V;V|=1;var r=Qe.transition,n=G;try{if(Qe.transition=null,G=1,e)return e()}finally{G=n,Qe.transition=r,V=t,!(V&6)&&Zt()}}function Ul(){ze=zr.current,ee(zr)}function dr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rg(r)),ce!==null)for(r=ce.return;r!==null;){var n=r;switch(_l(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vi();break;case 3:Xr(),ee(Ae),ee(je),Tl();break;case 5:Pl(n);break;case 4:Xr();break;case 13:ee(ne);break;case 19:ee(ne);break;case 10:Sl(n.type._context);break;case 22:case 23:Ul()}r=r.return}if(ge=e,ce=e=Gt(e.current,null),we=ze=t,he=0,os=null,Il=Yi=gr=0,De=zn=null,cr!==null){for(t=0;t<cr.length;t++)if(r=cr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}cr=null}return e}function Xh(e,t){do{var r=ce;try{if(jl(),Zs.current=Ei,Ni){for(var n=se.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ni=!1}if(pr=0,pe=de=se=null,In=!1,ns=0,$l.current=null,r===null||r.return===null){he=1,os=t,ce=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=we,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Zc(o);if(p!==null){p.flags&=-257,eu(p,o,l,i,t),p.mode&1&&Xc(i,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){Xc(i,u,t),Wl();break e}c=Error(P(426))}}else if(re&&l.mode&1){var S=Zc(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),eu(S,o,l,i,t),kl(Zr(c,l));break e}}i=c=Zr(c,l),he!==4&&(he=2),zn===null?zn=[i]:zn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Lh(i,c,t);qc(i,g);break e;case 1:l=c;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(qt===null||!qt.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Ah(i,l,t);qc(i,_);break e}}i=i.return}while(i!==null)}tf(r)}catch(k){t=k,ce===r&&r!==null&&(ce=r=r.return);continue}break}while(!0)}function Zh(){var e=Ci.current;return Ci.current=Ei,e===null?Ei:e}function Wl(){(he===0||he===3||he===2)&&(he=4),ge===null||!(gr&268435455)&&!(Yi&268435455)||At(ge,we)}function Ri(e,t){var r=V;V|=2;var n=Zh();(ge!==e||we!==t)&&(yt=null,dr(e,t));do try{Eg();break}catch(s){Xh(e,s)}while(!0);if(jl(),V=r,Ci.current=n,ce!==null)throw Error(P(261));return ge=null,we=0,he}function Eg(){for(;ce!==null;)ef(ce)}function Cg(){for(;ce!==null&&!Zm();)ef(ce)}function ef(e){var t=nf(e.alternate,e,ze);e.memoizedProps=e.pendingProps,t===null?tf(e):ce=t,$l.current=null}function tf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=_g(r,t),r!==null){r.flags&=32767,ce=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{he=6,ce=null;return}}else if(r=xg(r,t,ze),r!==null){ce=r;return}if(t=t.sibling,t!==null){ce=t;return}ce=t=e}while(t!==null);he===0&&(he=5)}function nr(e,t,r){var n=G,s=Qe.transition;try{Qe.transition=null,G=1,Pg(e,t,r,n)}finally{Qe.transition=s,G=n}return null}function Pg(e,t,r,n){do qr();while(zt!==null);if(V&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(cp(e,i),e===ge&&(ce=ge=null,we=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||As||(As=!0,sf(hi,function(){return qr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qe.transition,Qe.transition=null;var o=G;G=1;var l=V;V|=4,$l.current=null,bg(e,r),Qh(r,e),Qp(fa),mi=!!ha,fa=ha=null,e.current=r,jg(r),ep(),V=l,G=o,Qe.transition=i}else e.current=r;if(As&&(As=!1,zt=e,Ti=s),i=e.pendingLanes,i===0&&(qt=null),np(r.stateNode),Ie(e,le()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Pi)throw Pi=!1,e=Da,Da=null,e;return Ti&1&&e.tag!==0&&qr(),i=e.pendingLanes,i&1?e===Ma?Un++:(Un=0,Ma=e):Un=0,Zt(),null}function qr(){if(zt!==null){var e=Ld(Ti),t=Qe.transition,r=G;try{if(Qe.transition=null,G=16>e?16:e,zt===null)var n=!1;else{if(e=zt,zt=null,Ti=0,V&6)throw Error(P(331));var s=V;for(V|=4,D=e.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(D=u;D!==null;){var d=D;switch(d.tag){case 0:case 11:case 15:Fn(8,d,i)}var f=d.child;if(f!==null)f.return=d,D=f;else for(;D!==null;){d=D;var h=d.sibling,p=d.return;if(qh(d),d===u){D=null;break}if(h!==null){h.return=p,D=h;break}D=p}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var S=x.sibling;x.sibling=null,x=S}while(x!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fn(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,D=g;break e}D=i.return}}var m=e.current;for(D=m;D!==null;){o=D;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,D=y;else e:for(o=m;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qi(9,l)}}catch(k){ae(l,l.return,k)}if(l===o){D=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,D=_;break e}D=l.return}}if(V=s,Zt(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Ii,e)}catch{}n=!0}return n}finally{G=r,Qe.transition=t}}return!1}function fu(e,t,r){t=Zr(r,t),t=Lh(e,t,1),e=Vt(e,t,1),t=Ne(),e!==null&&(hs(e,1,t),Ie(e,t))}function ae(e,t,r){if(e.tag===3)fu(e,e,r);else for(;t!==null;){if(t.tag===3){fu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qt===null||!qt.has(n))){e=Zr(r,e),e=Ah(t,e,1),t=Vt(t,e,1),e=Ne(),t!==null&&(hs(t,1,e),Ie(t,e));break}}t=t.return}}function Tg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ne(),e.pingedLanes|=e.suspendedLanes&r,ge===e&&(we&r)===r&&(he===4||he===3&&(we&130023424)===we&&500>le()-Fl?dr(e,0):Il|=r),Ie(e,t)}function rf(e,t){t===0&&(e.mode&1?(t=Ns,Ns<<=1,!(Ns&130023424)&&(Ns=4194304)):t=1);var r=Ne();e=jt(e,t),e!==null&&(hs(e,t,r),Ie(e,r))}function Rg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),rf(e,r)}function Og(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),rf(e,r)}var nf;nf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ae.current)Le=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Le=!1,wg(e,t,r);Le=!!(e.flags&131072)}else Le=!1,re&&t.flags&1048576&&ah(t,_i,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ti(e,t),e=t.pendingProps;var s=Qr(t,je.current);Vr(t,r),s=Ol(null,t,n,e,s,r);var i=Dl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$e(n)?(i=!0,wi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,El(t),s.updater=Vi,t.stateNode=s,s._reactInternals=t,ka(t,n,e,r),t=Sa(null,t,n,!0,i,r)):(t.tag=0,re&&i&&xl(t),Se(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ti(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Mg(n),e=rt(n,e),s){case 0:t=ja(null,t,n,e,r);break e;case 1:t=nu(null,t,n,e,r);break e;case 11:t=tu(null,t,n,e,r);break e;case 14:t=ru(null,t,n,rt(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),ja(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),nu(e,t,n,s,r);case 3:e:{if(zh(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,s=i.element,fh(e,t),ji(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zr(Error(P(423)),t),t=su(e,t,n,r,s);break e}else if(n!==s){s=Zr(Error(P(424)),t),t=su(e,t,n,r,s);break e}else for(Ue=Ht(t.stateNode.containerInfo.firstChild),We=t,re=!0,it=null,r=dh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kr(),n===s){t=St(e,t,r);break e}Se(e,t,n,r)}t=t.child}return t;case 5:return mh(t),e===null&&wa(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,ma(n,s)?o=null:i!==null&&ma(n,i)&&(t.flags|=32),Fh(e,t),Se(e,t,o,r),t.child;case 6:return e===null&&wa(t),null;case 13:return Uh(e,t,r);case 4:return Cl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Jr(t,null,n,r):Se(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),tu(e,t,n,s,r);case 7:return Se(e,t,t.pendingProps,r),t.child;case 8:return Se(e,t,t.pendingProps.children,r),t.child;case 12:return Se(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,X(ki,n._currentValue),n._currentValue=o,i!==null)if(ct(i.value,o)){if(i.children===s.children&&!Ae.current){t=St(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=_t(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),xa(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),xa(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Se(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Vr(t,r),s=Xe(s),n=n(s),t.flags|=1,Se(e,t,n,r),t.child;case 14:return n=t.type,s=rt(n,t.pendingProps),s=rt(n.type,s),ru(e,t,n,s,r);case 15:return $h(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),ti(e,t),t.tag=1,$e(n)?(e=!0,wi(t)):e=!1,Vr(t,r),Mh(t,n,s),ka(t,n,s,r),Sa(null,t,n,!0,e,r);case 19:return Wh(e,t,r);case 22:return Ih(e,t,r)}throw Error(P(156,t.tag))};function sf(e,t){return Rd(e,t)}function Dg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(e,t,r,n){return new Dg(e,t,r,n)}function Bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mg(e){if(typeof e=="function")return Bl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ll)return 11;if(e===cl)return 14}return 2}function Gt(e,t){var r=e.alternate;return r===null?(r=Ge(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function si(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Bl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tr:return hr(r.children,s,i,t);case al:o=8,s|=8;break;case qo:return e=Ge(12,r,t,s|2),e.elementType=qo,e.lanes=i,e;case Yo:return e=Ge(13,r,t,s),e.elementType=Yo,e.lanes=i,e;case Go:return e=Ge(19,r,t,s),e.elementType=Go,e.lanes=i,e;case md:return Gi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hd:o=10;break e;case fd:o=9;break e;case ll:o=11;break e;case cl:o=14;break e;case Ot:o=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=Ge(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function hr(e,t,r,n){return e=Ge(7,e,n,t),e.lanes=r,e}function Gi(e,t,r,n){return e=Ge(22,e,n,t),e.elementType=md,e.lanes=r,e.stateNode={isHidden:!1},e}function Lo(e,t,r){return e=Ge(6,e,null,t),e.lanes=r,e}function Ao(e,t,r){return t=Ge(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lg(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=go(0),this.expirationTimes=go(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=go(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hl(e,t,r,n,s,i,o,l,c){return e=new Lg(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ge(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},El(i),e}function Ag(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function of(e){if(!e)return Kt;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if($e(r))return ih(e,r,t)}return t}function af(e,t,r,n,s,i,o,l,c){return e=Hl(r,n,!0,e,s,i,o,l,c),e.context=of(null),r=e.current,n=Ne(),s=Yt(r),i=_t(n,s),i.callback=t??null,Vt(r,i,s),e.current.lanes=s,hs(e,s,n),Ie(e,n),e}function Qi(e,t,r,n){var s=t.current,i=Ne(),o=Yt(s);return r=of(r),t.context===null?t.context=r:t.pendingContext=r,t=_t(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Vt(s,t,o),e!==null&&(at(e,s,o,i),Xs(e,s,o)),o}function Oi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Vl(e,t){mu(e,t),(e=e.alternate)&&mu(e,t)}function $g(){return null}var lf=typeof reportError=="function"?reportError:function(e){console.error(e)};function ql(e){this._internalRoot=e}Ki.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Qi(e,t,null,null)};Ki.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){Qi(null,e,null,null)}),t[bt]=null}};function Ki(e){this._internalRoot=e}Ki.prototype.unstable_scheduleHydration=function(e){if(e){var t=Id();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lt.length&&t!==0&&t<Lt[r].priority;r++);Lt.splice(r,0,e),r===0&&zd(e)}};function Yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ji(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pu(){}function Ig(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Oi(o);i.call(u)}}var o=af(t,n,e,0,null,!1,!1,"",pu);return e._reactRootContainer=o,e[bt]=o.current,Xn(e.nodeType===8?e.parentNode:e),yr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Oi(c);l.call(u)}}var c=Hl(e,0,!1,null,null,!1,!1,"",pu);return e._reactRootContainer=c,e[bt]=c.current,Xn(e.nodeType===8?e.parentNode:e),yr(function(){Qi(t,c,r,n)}),c}function Xi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Oi(o);l.call(c)}}Qi(t,o,e,s)}else o=Ig(r,t,e,s,n);return Oi(o)}Ad=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Tn(t.pendingLanes);r!==0&&(hl(t,r|1),Ie(t,le()),!(V&6)&&(en=le()+500,Zt()))}break;case 13:yr(function(){var n=jt(e,1);if(n!==null){var s=Ne();at(n,e,1,s)}}),Vl(e,1)}};fl=function(e){if(e.tag===13){var t=jt(e,134217728);if(t!==null){var r=Ne();at(t,e,134217728,r)}Vl(e,134217728)}};$d=function(e){if(e.tag===13){var t=Yt(e),r=jt(e,t);if(r!==null){var n=Ne();at(r,e,t,n)}Vl(e,t)}};Id=function(){return G};Fd=function(e,t){var r=G;try{return G=e,t()}finally{G=r}};sa=function(e,t,r){switch(t){case"input":if(Jo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Wi(n);if(!s)throw Error(P(90));gd(n),Jo(n,s)}}}break;case"textarea":vd(e,r);break;case"select":t=r.value,t!=null&&Ur(e,!!r.multiple,t,!1)}};Sd=zl;Nd=yr;var Fg={usingClientEntryPoint:!1,Events:[ms,Mr,Wi,bd,jd,zl]},wn={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zg={bundleType:wn.bundleType,version:wn.version,rendererPackageName:wn.rendererPackageName,rendererConfig:wn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pd(e),e===null?null:e.stateNode},findFiberByHostInstance:wn.findFiberByHostInstance||$g,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$s.isDisabled&&$s.supportsFiber)try{Ii=$s.inject(zg),mt=$s}catch{}}He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fg;He.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yl(t))throw Error(P(200));return Ag(e,t,null,r)};He.createRoot=function(e,t){if(!Yl(e))throw Error(P(299));var r=!1,n="",s=lf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Hl(e,1,!1,null,null,r,!1,n,s),e[bt]=t.current,Xn(e.nodeType===8?e.parentNode:e),new ql(t)};He.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Pd(t),e=e===null?null:e.stateNode,e};He.flushSync=function(e){return yr(e)};He.hydrate=function(e,t,r){if(!Ji(t))throw Error(P(200));return Xi(null,e,t,!0,r)};He.hydrateRoot=function(e,t,r){if(!Yl(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=lf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=af(t,null,e,1,r??null,s,!1,i,o),e[bt]=t.current,Xn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ki(t)};He.render=function(e,t,r){if(!Ji(t))throw Error(P(200));return Xi(null,e,t,!1,r)};He.unmountComponentAtNode=function(e){if(!Ji(e))throw Error(P(40));return e._reactRootContainer?(yr(function(){Xi(null,null,e,!1,function(){e._reactRootContainer=null,e[bt]=null})}),!0):!1};He.unstable_batchedUpdates=zl;He.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ji(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return Xi(e,t,r,!1,n)};He.version="18.3.1-next-f1338f8080-20240426";function cf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cf)}catch(e){console.error(e)}}cf(),ld.exports=He;var Ug=ld.exports,uf,gu=Ug;uf=gu.createRoot,gu.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),F=(e,t)=>{const r=w.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>w.createElement("svg",{ref:d,...Wg,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Bg(e)}`,l].join(" "),...u},[...t.map(([f,h])=>w.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=F("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=F("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=F("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=F("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=F("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=F("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=F("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=F("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=F("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=F("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=F("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=F("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=F("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=F("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=F("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=F("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=F("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=F("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=F("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=F("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=F("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=F("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=F("PlaySquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=F("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=F("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=F("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=F("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=F("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=F("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=F("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=F("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=F("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=F("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=F("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),c0="modulepreload",u0=function(e){return"/"+e},wu={},vr=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=u0(c),c in wu)return;wu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":c0,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},d0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>vr(async()=>{const{default:n}=await Promise.resolve().then(()=>un);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Xl extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class h0 extends Xl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class f0 extends Xl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class m0 extends Xl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $a;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($a||($a={}));var p0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class g0{constructor(t,{headers:r={},customFetch:n,region:s=$a.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=d0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return p0(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new h0(v)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new f0(d);if(!d.ok)throw new m0(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield d.json():h==="application/octet-stream"?p=yield d.blob():h==="text/event-stream"?p=d:h==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Me={},Zl={},eo={},gs={},to={},ro={},y0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sn=y0();const v0=sn.fetch,vf=sn.fetch.bind(sn),wf=sn.Headers,w0=sn.Request,x0=sn.Response,un=Object.freeze(Object.defineProperty({__proto__:null,Headers:wf,Request:w0,Response:x0,default:vf,fetch:v0},Symbol.toStringTag,{value:"Module"})),_0=mm(un);var no={};Object.defineProperty(no,"__esModule",{value:!0});class k0 extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}no.default=k0;var xf=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ro,"__esModule",{value:!0});const b0=xf(_0),j0=xf(no);let S0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=b0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,h=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),S=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&S&&S.length>1&&(f=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,p="OK")}catch{i.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new j0.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}};ro.default=S0;var N0=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(to,"__esModule",{value:!0});const E0=N0(ro);let C0=class extends E0.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};to.default=C0;var P0=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gs,"__esModule",{value:!0});const T0=P0(to);let R0=class extends T0.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};gs.default=R0;var O0=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eo,"__esModule",{value:!0});const xn=O0(gs);let D0=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new xn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new xn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new xn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new xn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new xn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};eo.default=D0;var so={},io={};Object.defineProperty(io,"__esModule",{value:!0});io.version=void 0;io.version="0.0.0-automated";Object.defineProperty(so,"__esModule",{value:!0});so.DEFAULT_HEADERS=void 0;const M0=io;so.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${M0.version}`};var _f=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zl,"__esModule",{value:!0});const L0=_f(eo),A0=_f(gs),$0=so;let I0=class kf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},$0.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new L0.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new kf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new A0.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Zl.default=I0;var dn=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Me,"__esModule",{value:!0});Me.PostgrestError=Me.PostgrestBuilder=Me.PostgrestTransformBuilder=Me.PostgrestFilterBuilder=Me.PostgrestQueryBuilder=Me.PostgrestClient=void 0;const bf=dn(Zl);Me.PostgrestClient=bf.default;const jf=dn(eo);Me.PostgrestQueryBuilder=jf.default;const Sf=dn(gs);Me.PostgrestFilterBuilder=Sf.default;const Nf=dn(to);Me.PostgrestTransformBuilder=Nf.default;const Ef=dn(ro);Me.PostgrestBuilder=Ef.default;const Cf=dn(no);Me.PostgrestError=Cf.default;var F0=Me.default={PostgrestClient:bf.default,PostgrestQueryBuilder:jf.default,PostgrestFilterBuilder:Sf.default,PostgrestTransformBuilder:Nf.default,PostgrestBuilder:Ef.default,PostgrestError:Cf.default};const{PostgrestClient:z0,PostgrestQueryBuilder:l1,PostgrestFilterBuilder:c1,PostgrestTransformBuilder:u1,PostgrestBuilder:d1}=F0,U0="2.10.7",W0={"X-Client-Info":`realtime-js/${U0}`},B0="1.0.0",Pf=1e4,H0=1e3;var Yr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yr||(Yr={}));var Fe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Fe||(Fe={}));var st;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(st||(st={}));var Ia;(function(e){e.websocket="websocket"})(Ia||(Ia={}));var or;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(or||(or={}));class V0{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Tf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(J||(J={}));const xu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=q0(o,e,t,s),i),{})},q0=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Rf(i,o):Fa(o)},Rf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return K0(t,r)}switch(e){case J.bool:return Y0(t);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return G0(t);case J.json:case J.jsonb:return Q0(t);case J.timestamp:return J0(t);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return Fa(t);default:return Fa(t)}},Fa=e=>e,Y0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},G0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Q0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},K0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Rf(t,l))}return e},J0=e=>typeof e=="string"?e.replace(" ","T"):e,Of=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class $o{constructor(t,r,n={},s=Pf){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var _u;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(_u||(_u={}));class Wn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Wn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Wn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(S=>S.presence_ref),p=f.map(S=>S.presence_ref),v=d.filter(S=>p.indexOf(S.presence_ref)<0),x=f.filter(S=>h.indexOf(S.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ku;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ku||(ku={}));var bu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(bu||(bu={}));var ju;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ju||(ju={}));class ec{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new $o(this,st.join,this.params,this.timeout),this.rejoinTimer=new Tf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Wn(this),this.broadcastEndpointURL=Of(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t&&t("CHANNEL_ERROR",d)),this._onClose(()=>t&&t("CLOSED"));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:d})=>{var f;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),d===void 0){t&&t("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,v=[];for(let x=0;x<p;x++){const S=h[x],{filter:{event:g,schema:m,table:y,filter:_}}=S,k=d&&d[x];if(k&&k.event===g&&k.schema===m&&k.table===y&&k.filter===_)v.push(Object.assign(Object.assign({},S),{id:k.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t("SUBSCRIBED");return}}).receive("error",d=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Fe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new $o(this,st.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new $o(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=st;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,x,S;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((S=(x=p.filter)===null||x===void 0?void 0:x.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,x,S,g,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,k=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const _=(m=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:x,table:S,commit_timestamp:g,type:m,errors:y}=v;h=Object.assign(Object.assign({},{schema:x,table:S,commit_timestamp:g,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(h,n)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ec.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=xu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=xu(t.columns,t.old_record)),r}}const X0=()=>{},Z0=typeof WebSocket<"u",ey=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ty{constructor(t,r){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=W0,this.params={},this.timeout=Pf,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=X0,this.conn=null,this.sendBuffer=[],this.serializer=new V0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>vr(async()=>{const{default:c}=await Promise.resolve().then(()=>un);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Ia.websocket}`,this.httpEndpoint=Of(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Tf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Z0){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new ry(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),vr(async()=>{const{default:t}=await import("./browser-CjPjscU1.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Yr.connecting:return or.Connecting;case Yr.open:return or.Open;case Yr.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}channel(t,r={config:{}}){const n=new ec(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(st.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:B0}))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(H0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ey],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ry{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Yr.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class tc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class ny extends tc{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class za extends tc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var sy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Df=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>vr(async()=>{const{default:n}=await Promise.resolve().then(()=>un);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},iy=()=>sy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vr(()=>Promise.resolve().then(()=>un),void 0)).Response:Response}),Ua=e=>{if(Array.isArray(e))return e.map(r=>Ua(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ua(n)}),t};var _r=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Io=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oy=(e,t,r)=>_r(void 0,void 0,void 0,function*(){const n=yield iy();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new ny(Io(s),e.status||500))}).catch(s=>{t(new za(Io(s),s))}):t(new za(Io(e),e))}),ay=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function ys(e,t,r,n,s,i){return _r(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,ay(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>oy(c,l,n))})})}function Di(e,t,r,n){return _r(this,void 0,void 0,function*(){return ys(e,"GET",t,r,n)})}function Mt(e,t,r,n,s){return _r(this,void 0,void 0,function*(){return ys(e,"POST",t,n,s,r)})}function ly(e,t,r,n,s){return _r(this,void 0,void 0,function*(){return ys(e,"PUT",t,n,s,r)})}function cy(e,t,r,n){return _r(this,void 0,void 0,function*(){return ys(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Mf(e,t,r,n,s){return _r(this,void 0,void 0,function*(){return ys(e,"DELETE",t,n,s,r)})}var Re=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const uy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Su={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dy{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Df(s)}uploadOrUpdate(t,r,n,s){return Re(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Su),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(me(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Re(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Su.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Mt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new tc("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}update(t,r,n){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Re(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield Mt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Mt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Re(this,void 0,void 0,function*(){try{const s=yield Mt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}download(t,r){return Re(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Di(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(me(l))return{data:null,error:l};throw l}})}info(t){return Re(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Di(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ua(n),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}exists(t){return Re(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield cy(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(me(n)&&n instanceof za){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Mf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}list(t,r,n){return Re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},uy),r),{prefix:t||""});return{data:yield Mt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const hy="2.7.1",fy={"X-Client-Info":`storage-js/${hy}`};var Sr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class my{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},fy),r),this.fetch=Df(n)}listBuckets(){return Sr(this,void 0,void 0,function*(){try{return{data:yield Di(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}})}getBucket(t){return Sr(this,void 0,void 0,function*(){try{return{data:yield Di(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Sr(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Sr(this,void 0,void 0,function*(){try{return{data:yield ly(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Sr(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Sr(this,void 0,void 0,function*(){try{return{data:yield Mf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}}class py extends my{constructor(t,r={},n){super(t,r,n)}from(t){return new dy(this.url,this.headers,t,this.fetch)}}const gy="2.46.1";let On="";typeof Deno<"u"?On="deno":typeof document<"u"?On="web":typeof navigator<"u"&&navigator.product==="ReactNative"?On="react-native":On="node";const yy={"X-Client-Info":`supabase-js-${On}/${gy}`},vy={headers:yy},wy={schema:"public"},xy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_y={};var ky=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const by=e=>{let t;return e?t=e:typeof fetch>"u"?t=vf:t=fetch,(...r)=>t(...r)},jy=()=>typeof Headers>"u"?wf:Headers,Sy=(e,t,r)=>{const n=by(r),s=jy();return(i,o)=>ky(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Ny=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Ey(e){return e.replace(/\/$/,"")}function Cy(e,t){const{db:r,auth:n,realtime:s,global:i}=e,{db:o,auth:l,realtime:c,global:u}=t,d={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>Ny(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const Lf="2.65.1",Py="http://localhost:9999",Ty="supabase.auth.token",Ry={"X-Client-Info":`gotrue-js/${Lf}`},Nu=10,Wa="X-Supabase-Api-Version",Af={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Oy(e){return Math.round(Date.now()/1e3)+e}function Dy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const tt=()=>typeof document<"u",tr={tested:!1,writable:!1},Bn=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tr.tested)return tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tr.tested=!0,tr.writable=!0}catch{tr.tested=!0,tr.writable=!1}return tr.writable};function Fo(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const $f=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>vr(async()=>{const{default:n}=await Promise.resolve().then(()=>un);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},My=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",If=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Is=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fs=async(e,t)=>{await e.removeItem(t)};function Ly(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,s,i,o,l,c,u,d=0;for(e=e.replace("-","+").replace("_","/");d<e.length;)o=t.indexOf(e.charAt(d++)),l=t.indexOf(e.charAt(d++)),c=t.indexOf(e.charAt(d++)),u=t.indexOf(e.charAt(d++)),n=o<<2|l>>4,s=(l&15)<<4|c>>2,i=(c&3)<<6|u,r=r+String.fromCharCode(n),c!=64&&s!=0&&(r=r+String.fromCharCode(s)),u!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class oo{constructor(){this.promise=new oo.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}oo.promiseConstructor=Promise;function Eu(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=e.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(Ly(n))}async function Ay(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $y(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Iy(e){return("0"+e.toString(16)).substr(-2)}function Fy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Iy).join("")}async function zy(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function Uy(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wy(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await zy(e);return Uy(r)}async function Nr(e,t,r=!1){const n=Fy();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await If(e,`${t}-code-verifier`,s);const i=await Wy(n);return[i,n===i?"plain":"s256"]}const By=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hy(e){const t=e.headers.get(Wa);if(!t||!t.match(By))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class rc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Vy extends rc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function qy(e){return z(e)&&e.name==="AuthApiError"}class Ff extends rc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class kr extends rc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Tt extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yy(e){return z(e)&&e.name==="AuthSessionMissingError"}class zo extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zs extends kr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Us extends kr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cu extends kr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ba extends kr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Uo(e){return z(e)&&e.name==="AuthRetryableFetchError"}class Pu extends kr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}var Gy=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qy=[502,503,504];async function Tu(e){var t;if(!My(e))throw new Ba(sr(e),0);if(Qy.includes(e.status))throw new Ba(sr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Ff(sr(i),i)}let n;const s=Hy(e);if(s&&s.getTime()>=Af["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Pu(sr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Tt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Pu(sr(r),e.status,r.weak_password.reasons);throw new Vy(sr(r),e.status||500,n)}const Ky=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function B(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Wa]||(i[Wa]=Af["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Jy(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Jy(e,t,r,n,s,i){const o=Ky(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Ba(sr(c),0)}if(l.ok||await Tu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Tu(c)}}function Rt(e){var t;let r=null;tv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Oy(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Ru(e){const t=Rt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function It(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Xy(e){return{data:e,error:null}}function Zy(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Gy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function ev(e){return e}function tv(e){return e.access_token&&e.refresh_token&&e.expires_in}var rv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class nv{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=$f(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:It})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=rv(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Zy,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:It})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ev});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(v.split(";")[1].split("=")[1]);u[`${S}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await B(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:It})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:It})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:It})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await B(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}}const sv={getItem:e=>Bn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Bn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Bn()&&globalThis.localStorage.removeItem(e)}};function Ou(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function iv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Er={debug:!!(globalThis&&Bn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ov extends zf{}async function av(e,t,r){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Er.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ov(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Er.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}iv();const lv={url:Py,storageKey:Ty,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ry,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},_n=30*1e3,Du=3;async function Mu(e,t,r){return await r()}class ls{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ls.nextInstanceID,ls.nextInstanceID+=1,this.instanceID>0&&tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},lv),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new nv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$f(s.fetch),this.lock=s.lock||Mu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:tt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=av:this.lock=Mu,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Bn()?this.storage=sv:(this.memoryStorage={},this.storage=Ou(this.memoryStorage)):(this.memoryStorage={},this.storage=Ou(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Lf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=tt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:n}=await this._getSessionFromURL(t);if(n)return this._debug("#_initialize()","error detecting session from URL",n),(n==null?void 0:n.code)==="identity_already_exists"?{error:n}:(await this._removeSession(),{error:n});const{session:s,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return z(t)?{error:t}:{error:new Ff("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Rt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Nr(this.storage,this.storageKey)),i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:Rt})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Rt})}else throw new zs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ru})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ru})}else throw new zs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new zo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await Is(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Rt});if(await Fs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new zo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Rt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new zo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Nr(this.storage,this.storageKey));const{error:f}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new zs("You must provide either an email or phone number.")}catch(l){if(z(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Rt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Nr(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Xy})}catch(i){if(z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Tt;const{error:s}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await B(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await B(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new zs("You must provide either an email or phone number and a type")}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:It}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tt}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:It})})}catch(r){if(z(r))return Yy(r)&&(await this._removeSession(),await Fs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Tt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Nr(this.storage,this.storageKey));const{data:u,error:d}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:It});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return Eu(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Tt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const o=Eu(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(z(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Tt;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t){try{if(!tt())throw new Us("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Us("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Cu("Not a valid PKCE flow url.");const r=Fo(window.location.href);if(t){if(!r.code)throw new Cu("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(r.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Us(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=r;if(!i||!l||!o||!u)throw new Us("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=_n&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:x,error:S}=await this._getUser(i);if(S)throw S;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:r.type},error:null}}catch(r){if(z(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const t=Fo(window.location.href);return!!(tt()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=Fo(window.location.href),r=await Is(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(qy(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Fs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Dy(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Nr(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return tt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(z(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await $y(async s=>(s>0&&await Ay(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Rt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Uo(i)&&Date.now()+o-n<_n})}catch(n){if(this._debug(r,"error",n),z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),tt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Is(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<s+Nu;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Nu}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Uo(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new oo;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Tt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),z(i)){const o={session:null,error:i};return Uo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await If(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Fs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_n);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/_n);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${_n}ms, refresh threshold is ${Du} ticks`),s<=Du&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Nr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await B(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await B(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}}ls.nextInstanceID=0;const cv=ls;class uv extends cv{constructor(t){super(t)}}var dv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class hv{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Ey(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:wy,realtime:_y,auth:Object.assign(Object.assign({},xy),{storageKey:c}),global:vy},d=Cy(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Sy(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},d.realtime)),this.rest=new z0(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new g0(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new py(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return dv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){var f;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uv({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:(f="Authorization"in this.headers)!==null&&f!==void 0?f:!1})}_initRealtimeClient(t){return new ty(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fv=(e,t,r)=>new hv(e,t,r),mv="https://oqdkwfddbxexdthfavig.supabase.co",pv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xZGt3ZmRkYnhleGR0aGZhdmlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3MTMyMzksImV4cCI6MjA0NjI4OTIzOX0.6SJHbdRXq1lq2a3SJC-0HSsx9IN9IQerO0TxgIdF42Q",T=fv(mv,pv,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:{getItem:e=>{try{return localStorage.getItem(e)}catch(t){return console.error("Error accessing localStorage:",t),null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(r){console.error("Error setting localStorage:",r)}},removeItem:e=>{try{localStorage.removeItem(e)}catch(t){console.error("Error removing from localStorage:",t)}}},flowType:"pkce",debug:!1}}),Lu=async()=>{try{const{error:e}=await T.from("users").select("id").limit(1);return!e}catch{return!1}};let kn=null;const gv=async()=>{kn&&clearInterval(kn),kn=setInterval(async()=>{try{const{data:{session:t},error:r}=await T.auth.getSession();if(t&&!r){const{error:n}=await T.auth.refreshSession();n&&console.error("Error refreshing session:",n)}}catch(t){console.error("Error in session refresh:",t)}},23*60*60*1e3);const{data:{session:e}}=await T.auth.getSession();if(e){const{error:t}=await T.auth.refreshSession();t&&console.error("Error in initial session refresh:",t)}window.addEventListener("unload",()=>{kn&&clearInterval(kn)})};gv();function vs(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(!0);w.useEffect(()=>{(async()=>{const h=await Lu();l(h),h?u():(i("Unable to connect to the server. Please check your internet connection."),n(!1))})(),c()},[]);const c=()=>{const f=T.channel("families_changes").on("postgres_changes",{event:"*",schema:"public",table:"family_members"},()=>{u()}).subscribe(h=>{h==="SUBSCRIBED"&&console.log("Successfully subscribed to family changes")});return()=>{T.removeChannel(f)}},u=async()=>{try{const{data:{user:f}}=await T.auth.getUser();if(!f){i("Not authenticated"),n(!1);return}const{data:h,error:p}=await T.from("family_members").select(`
          families (
            id,
            name,
            display_name,
            color,
            join_code,
            family_picture
          )
        `).eq("user_id",f.id);if(p){console.error("Error fetching families:",p),i(p.message);return}if(!h){t([]);return}const v=h.map(x=>({...x.families,display_name:x.families.display_name||x.families.name,color:x.families.color||"#056aa0",family_picture:x.families.family_picture||null}));t(v),i(null)}catch(f){console.error("Error fetching families:",f),i("Failed to load families. Please try again.")}finally{n(!1)}};return{families:e,loading:r,error:s,isConnected:o,refreshFamilies:u,retryConnection:async()=>{n(!0),i(null);const f=await Lu();l(f),f?await u():i("Still unable to connect. Please check your internet connection."),n(!1)}}}const yv=({currentFamilyId:e})=>{const{families:t}=vs(),r=t.find(n=>n.id===e);return a.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-10",children:a.jsxs("div",{className:"flex items-center justify-between px-4 h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zi,{className:"w-6 h-6 text-primary-500"}),a.jsx("h1",{className:"ml-2 text-xl font-bold bg-gradient-to-r from-primary-500 to-primary-400 bg-clip-text text-transparent",children:"Familis"})]}),r&&a.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 text-center",children:a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Family of ",r.display_name||r.name]})})]})})};function Uf(e){const[t,r]=w.useState(!1),[n,s]=w.useState(localStorage.getItem("lastCheckedReminders")||new Date().toISOString());return w.useEffect(()=>{if(!e)return;(async()=>{try{const{data:c,error:u}=await T.from("reminders").select("created_at").eq("family_id",e).gt("created_at",n).limit(1);if(u)throw u;r(c&&c.length>0)}catch(c){console.error("Error checking new reminders:",c)}})();const l=T.channel("reminder_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"reminders",filter:"family_id=eq."+e},()=>{r(!0)}).subscribe();return()=>{T.removeChannel(l)}},[e,n]),{hasNewReminders:t,markAsRead:()=>{const o=new Date().toISOString();localStorage.setItem("lastCheckedReminders",o),s(o),r(!1)}}}const bn=({icon:e,label:t,active:r,onClick:n,primary:s,showNotification:i})=>a.jsxs("button",{onClick:n,className:`flex flex-col items-center justify-center py-2 transition-colors relative ${s?"flex-1 -mt-6 bg-primary-500 text-white rounded-full mx-4 py-4 shadow-lg hover:bg-primary-600":`flex-1 ${r?"text-primary-500":"text-gray-500 hover:text-primary-500"}`}`,children:[a.jsxs("div",{className:`h-6 w-6 ${s?"scale-110":""} relative`,children:[e,i&&a.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),a.jsx("span",{className:`text-xs mt-1 font-medium ${s?"text-white":""}`,children:t})]}),vv=({activeTab:e,setActiveTab:t,familyId:r})=>{const{hasNewReminders:n,markAsRead:s}=Uf(r),i=()=>{t("agenda"),n&&s()};return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 pb-safe",children:a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsx(bn,{icon:a.jsx(ff,{className:"w-6 h-6"}),label:"Feed",active:e==="feed",onClick:()=>t("feed")}),a.jsx(bn,{icon:a.jsx(Ke,{className:"w-6 h-6"}),label:"Join Family",active:e==="join",onClick:()=>t("join")}),a.jsx(bn,{icon:a.jsx(mf,{className:"w-6 h-6"}),label:"Add Photos",active:e==="photos",onClick:()=>t("photos"),primary:!0}),a.jsx(bn,{icon:a.jsx(qg,{className:"w-6 h-6"}),label:"Profile",active:e==="profile",onClick:()=>t("profile")}),a.jsx(bn,{icon:a.jsx(tn,{className:"w-6 h-6"}),label:"Agenda",active:e==="agenda",onClick:i,showNotification:n})]})})};function H(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function gt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Wf(e,t){const r=H(e);if(isNaN(t))return gt(e,NaN);if(!t)return r;const n=r.getDate(),s=gt(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const i=s.getDate();return n>=i?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const Bf=6048e5,wv=864e5,Hf=6e4,Vf=36e5,Ws=43200,Au=1440;let xv={};function ws(){return xv}function cs(e,t){var l,c,u,d;const r=ws(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=H(e),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Mi(e){return cs(e,{weekStartsOn:1})}function qf(e){const t=H(e),r=t.getFullYear(),n=gt(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Mi(n),i=gt(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Mi(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Li(e){const t=H(e);return t.setHours(0,0,0,0),t}function Ai(e){const t=H(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function _v(e,t){const r=Li(e),n=Li(t),s=+r-Ai(r),i=+n-Ai(n);return Math.round((s-i)/wv)}function kv(e){const t=qf(e),r=gt(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Mi(r)}function ii(e,t){const r=H(e),n=H(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function bv(e){return gt(e,Date.now())}function Wo(e,t){const r=Li(e),n=Li(t);return+r==+n}function jv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Sv(e){if(!jv(e)&&typeof e!="number")return!1;const t=H(e);return!isNaN(Number(t))}function Nv(e,t){const r=H(e),n=H(t),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function Ev(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Cv(e,t){return+H(e)-+H(t)}function Pv(e){const t=H(e);return t.setHours(23,59,59,999),t}function Yf(e){const t=H(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Tv(e){const t=H(e);return+Pv(t)==+Yf(t)}function Rv(e,t){const r=H(e),n=H(t),s=ii(r,n),i=Math.abs(Nv(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let l=ii(r,n)===-s;Tv(H(e))&&i===1&&ii(e,n)===1&&(l=!1),o=s*(i-Number(l))}return o===0?0:o}function Ov(e,t,r){const n=Cv(e,t)/1e3;return Ev(r==null?void 0:r.roundingMethod)(n)}function Dv(e,t){const r=H(e.start),n=H(e.end);let s=+r>+n;const i=s?+r:+n,o=s?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push(H(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return s?c.reverse():c}function Mv(e){const t=H(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Lv(e){const t=H(e),r=gt(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Av={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$v=(e,t,r)=>{let n;const s=Av[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Bo(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Iv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zv={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Uv={date:Bo({formats:Iv,defaultWidth:"full"}),time:Bo({formats:Fv,defaultWidth:"full"}),dateTime:Bo({formats:zv,defaultWidth:"full"})},Wv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bv=(e,t,r,n)=>Wv[e];function jn(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const Hv={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qv={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yv={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Gv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kv=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Jv={ordinalNumber:Kv,era:jn({values:Hv,defaultWidth:"wide"}),quarter:jn({values:Vv,defaultWidth:"wide",argumentCallback:e=>e-1}),month:jn({values:qv,defaultWidth:"wide"}),day:jn({values:Yv,defaultWidth:"wide"}),dayPeriod:jn({values:Gv,defaultWidth:"wide",formattingValues:Qv,defaultFormattingWidth:"wide"})};function Sn(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Zv(l,f=>f.test(o)):Xv(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Xv(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Zv(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function ew(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const tw=/^(\d+)(th|st|nd|rd)?/i,rw=/\d+/i,nw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sw={any:[/^b/i,/^(a|c)/i]},iw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ow={any:[/1/i,/2/i,/3/i,/4/i]},aw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fw={ordinalNumber:ew({matchPattern:tw,parsePattern:rw,valueCallback:e=>parseInt(e,10)}),era:Sn({matchPatterns:nw,defaultMatchWidth:"wide",parsePatterns:sw,defaultParseWidth:"any"}),quarter:Sn({matchPatterns:iw,defaultMatchWidth:"wide",parsePatterns:ow,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Sn({matchPatterns:aw,defaultMatchWidth:"wide",parsePatterns:lw,defaultParseWidth:"any"}),day:Sn({matchPatterns:cw,defaultMatchWidth:"wide",parsePatterns:uw,defaultParseWidth:"any"}),dayPeriod:Sn({matchPatterns:dw,defaultMatchWidth:"any",parsePatterns:hw,defaultParseWidth:"any"})},Gf={code:"en-US",formatDistance:$v,formatLong:Uv,formatRelative:Bv,localize:Jv,match:fw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mw(e){const t=H(e);return _v(t,Lv(t))+1}function pw(e){const t=H(e),r=+Mi(t)-+kv(t);return Math.round(r/Bf)+1}function Qf(e,t){var d,f,h,p;const r=H(e),n=r.getFullYear(),s=ws(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=gt(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=cs(o,t),c=gt(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=cs(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function gw(e,t){var l,c,u,d;const r=ws(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Qf(e,t),i=gt(e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),cs(i,t)}function yw(e,t){const r=H(e),n=+cs(r,t)-+gw(r,t);return Math.round(n/Bf)+1}function Y(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Pt={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Y(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Y(r+1,2)},d(e,t){return Y(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Y(e.getHours()%12||12,t.length)},H(e,t){return Y(e.getHours(),t.length)},m(e,t){return Y(e.getMinutes(),t.length)},s(e,t){return Y(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Y(s,t.length)}},Cr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$u={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Pt.y(e,t)},Y:function(e,t,r,n){const s=Qf(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return Y(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Y(i,t.length)},R:function(e,t){const r=qf(e);return Y(r,t.length)},u:function(e,t){const r=e.getFullYear();return Y(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Y(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Y(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Pt.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Y(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=yw(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):Y(s,t.length)},I:function(e,t,r){const n=pw(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Y(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Pt.d(e,t)},D:function(e,t,r){const n=mw(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Y(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Y(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Y(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return Y(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=Cr.noon:n===0?s=Cr.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=Cr.evening:n>=12?s=Cr.afternoon:n>=4?s=Cr.morning:s=Cr.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Pt.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Pt.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Y(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Y(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Pt.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Pt.s(e,t)},S:function(e,t){return Pt.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Fu(n);case"XXXX":case"XX":return ir(n);case"XXXXX":case"XXX":default:return ir(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Fu(n);case"xxxx":case"xx":return ir(n);case"xxxxx":case"xxx":default:return ir(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Iu(n,":");case"OOOO":default:return"GMT"+ir(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Iu(n,":");case"zzzz":default:return"GMT"+ir(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Y(n,t.length)},T:function(e,t,r){const n=e.getTime();return Y(n,t.length)}};function Iu(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+Y(i,2)}function Fu(e,t){return e%60===0?(e>0?"-":"+")+Y(Math.abs(e)/60,2):ir(e,t)}function ir(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Y(Math.trunc(n/60),2),i=Y(n%60,2);return r+s+t+i}const zu=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Kf=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},vw=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return zu(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",zu(n,t)).replace("{{time}}",Kf(s,t))},ww={p:Kf,P:vw},xw=/^D+$/,_w=/^Y+$/,kw=["D","DD","YY","YYYY"];function bw(e){return xw.test(e)}function jw(e){return _w.test(e)}function Sw(e,t,r){const n=Nw(e,t,r);if(console.warn(n),kw.includes(e))throw new RangeError(n)}function Nw(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ew=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Pw=/^'([^]*?)'?$/,Tw=/''/g,Rw=/[a-zA-Z]/;function ft(e,t,r){var d,f,h,p;const n=ws(),s=n.locale??Gf,i=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,l=H(e);if(!Sv(l))throw new RangeError("Invalid time value");let c=t.match(Cw).map(v=>{const x=v[0];if(x==="p"||x==="P"){const S=ww[x];return S(v,s.formatLong)}return v}).join("").match(Ew).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const x=v[0];if(x==="'")return{isToken:!1,value:Ow(v)};if($u[x])return{isToken:!0,value:v};if(x.match(Rw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const x=v.value;(jw(x)||bw(x))&&Sw(x,t,String(e));const S=$u[x[0]];return S(l,x,s.localize,u)}).join("")}function Ow(e){const t=e.match(Pw);return t?t[1].replace(Tw,"'"):e}function Dw(e,t,r){const n=ws(),s=(r==null?void 0:r.locale)??n.locale??Gf,i=2520,o=ii(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=H(t),u=H(e)):(c=H(e),u=H(t));const d=Ov(u,c),f=(Ai(u)-Ai(c))/1e3,h=Math.round((d-f)/60);let p;if(h<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):h===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",h,l);if(h<45)return s.formatDistance("xMinutes",h,l);if(h<90)return s.formatDistance("aboutXHours",1,l);if(h<Au){const v=Math.round(h/60);return s.formatDistance("aboutXHours",v,l)}else{if(h<i)return s.formatDistance("xDays",1,l);if(h<Ws){const v=Math.round(h/Au);return s.formatDistance("xDays",v,l)}else if(h<Ws*2)return p=Math.round(h/Ws),s.formatDistance("aboutXMonths",p,l)}if(p=Rv(u,c),p<12){const v=Math.round(h/Ws);return s.formatDistance("xMonths",v,l)}else{const v=p%12,x=Math.trunc(p/12);return v<3?s.formatDistance("aboutXYears",x,l):v<9?s.formatDistance("overXYears",x,l):s.formatDistance("almostXYears",x+1,l)}}function Ha(e,t){return Dw(e,bv(e),t)}function Mw(e,t){const r=H(e),n=H(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Bs(e,t){const n=Iw(e);let s;if(n.date){const c=Fw(n.date,2);s=zw(c.restDateString,c.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const i=s.getTime();let o=0,l;if(n.time&&(o=Uw(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=Ww(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+o+l)}const Hs={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Lw=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Aw=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$w=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Iw(e){const t={},r=e.split(Hs.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Hs.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Hs.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=Hs.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function Fw(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function zw(e,t){if(t===null)return new Date(NaN);const r=e.match(Lw);if(!r)return new Date(NaN);const n=!!r[4],s=Nn(r[1]),i=Nn(r[2])-1,o=Nn(r[3]),l=Nn(r[4]),c=Nn(r[5])-1;if(n)return Yw(t,l,c)?Bw(t,l,c):new Date(NaN);{const u=new Date(0);return!Vw(t,i,o)||!qw(t,s)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(s,o)),u)}}function Nn(e){return e?parseInt(e):1}function Uw(e){const t=e.match(Aw);if(!t)return NaN;const r=Ho(t[1]),n=Ho(t[2]),s=Ho(t[3]);return Gw(r,n,s)?r*Vf+n*Hf+s*1e3:NaN}function Ho(e){return e&&parseFloat(e.replace(",","."))||0}function Ww(e){if(e==="Z")return 0;const t=e.match($w);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return Qw(n,s)?r*(n*Vf+s*Hf):NaN}function Bw(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,i=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const Hw=[31,null,31,30,31,30,31,31,30,31,30,31];function Jf(e){return e%400===0||e%4===0&&e%100!==0}function Vw(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Hw[t]||(Jf(e)?29:28))}function qw(e,t){return t>=1&&t<=(Jf(e)?366:365)}function Yw(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Gw(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Qw(e,t){return t>=0&&t<=59}function Kw(e,t){return Wf(e,-t)}function Xf(){const[e,t]=w.useState(!1);return{loading:e,toggleLike:async o=>{t(!0);try{const{data:{user:l}}=await T.auth.getUser();if(!l)throw new Error("Not authenticated");const{data:c,error:u}=await T.from("reactions").select().eq("post_id",o).eq("user_id",l.id).eq("reaction_type","LIKE").maybeSingle();if(u&&u.code!=="PGRST116")throw u;if(c){const{error:d}=await T.from("reactions").delete().eq("id",c.id);if(d)throw d}else{const{error:d}=await T.from("reactions").insert([{post_id:o,user_id:l.id,reaction_type:"LIKE"}]);if(d)throw d}}catch(l){throw console.error("Error toggling like:",l),l}finally{t(!1)}},addComment:async(o,l)=>{t(!0);try{const{data:{user:c}}=await T.auth.getUser();if(!c)throw new Error("Not authenticated");const{error:u}=await T.from("reactions").insert([{post_id:o,user_id:c.id,reaction_type:"COMMENT",comment:l}]);if(u)throw u}catch(c){throw console.error("Error adding comment:",c),c}finally{t(!1)}},addElderlyReaction:async(o,l)=>{t(!0);try{const{data:{user:c}}=await T.auth.getUser();if(!c)throw new Error("Not authenticated");const{error:u}=await T.from("reactions").delete().eq("post_id",o).eq("user_id",c.id).eq("reaction_type","SLIDESHOW");if(u)throw u;const{error:d}=await T.from("reactions").insert([{post_id:o,user_id:c.id,reaction_type:"SLIDESHOW",emoji_type:l}]);if(d)throw d}catch(c){throw console.error("Error adding elderly reaction:",c),c}finally{t(!1)}},getCurrentReaction:async o=>{try{const{data:{user:l}}=await T.auth.getUser();if(!l)return null;const{data:c,error:u}=await T.from("reactions").select("emoji_type").eq("post_id",o).eq("user_id",l.id).eq("reaction_type","SLIDESHOW").maybeSingle();if(u&&u.code!=="PGRST116")throw u;return(c==null?void 0:c.emoji_type)||null}catch(l){return console.error("Error getting current reaction:",l),null}}}}const Jw={LOVE:"❤️",SMILE:"😊",HUG:"🤗",PROUD:"👏"},Xw=({reactions:e})=>!e||e.length===0?null:a.jsxs("div",{className:"mt-4 bg-blue-50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 text-blue-800",children:[a.jsx(Zi,{className:"w-5 h-5"}),a.jsx("h4",{className:"font-medium",children:"Elder's Reactions"})]}),a.jsx("div",{className:"space-y-2",children:e.map(t=>{var r;return a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/50 rounded-lg",children:[a.jsx("span",{className:"text-2xl",children:Jw[t.emoji_type]}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-blue-900",children:(r=t.user)==null?void 0:r.name}),a.jsx("span",{className:"text-xs text-blue-600",children:Ha(new Date(t.created_at),{addSuffix:!0})})]})})]},t.id)})})]}),Zw=({onDelete:e,isOwner:t})=>{const[r,n]=w.useState(!1),[s,i]=w.useState(!1),o=()=>{n(!1),i(!0)};return t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>n(!r),className:"p-1 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 transition-colors",children:a.jsx(pf,{className:"w-5 h-5"})}),r&&a.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-100 py-1 z-10",children:a.jsxs("button",{onClick:o,className:"w-full flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 transition-colors text-sm",children:[a.jsx(yf,{className:"w-4 h-4"}),"Delete Post"]})})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full animate-scale-up",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Post"}),a.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(lt,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this post? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{e(),i(!1)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}):null},ex=({post:e,onDelete:t})=>{var Q,fe;const[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,u]=w.useState(!1),[d,f]=w.useState(e.likes_count),[h,p]=w.useState(e.user_has_liked),[v,x]=w.useState([]),{toggleLike:S,addComment:g}=Xf(),[m,y]=w.useState(!1),[_,k]=w.useState(!1);Tm.useEffect(()=>{E()},[]);const E=async()=>{const{data:{user:M}}=await T.auth.getUser();y((M==null?void 0:M.id)===e.user_id)},b=async()=>{try{const{error:M}=await T.from("posts").delete().eq("id",e.id);if(M)throw M;t==null||t()}catch(M){console.error("Error deleting post:",M)}},N=[...((Q=e.reactions)==null?void 0:Q.filter(M=>M.reaction_type==="COMMENT"))||[],...v],L=((fe=e.reactions)==null?void 0:fe.filter(M=>M.reaction_type==="SLIDESHOW"&&M.emoji_type))||[],R=async()=>{if(!o)try{l(!0),p(!h),f(h?d-1:d+1),await S(e.id)}catch(M){p(!h),f(h?d+1:d-1),console.error("Error liking post:",M)}finally{l(!1)}},q=async M=>{if(M.preventDefault(),!(c||!s.trim()))try{u(!0);const{data:{user:oe}}=await T.auth.getUser();if(!oe)throw new Error("Not authenticated");const{data:A,error:j}=await T.from("users").select("name, avatar_url").eq("id",oe.id).single();if(j)throw j;const O={id:`temp-${Date.now()}`,user_id:oe.id,reaction_type:"COMMENT",comment:s.trim(),created_at:new Date().toISOString(),user:{name:A.name,avatar_url:A.avatar_url}};x(C=>[...C,O]),i(""),await g(e.id,s.trim())}catch(oe){console.error("Error adding comment:",oe),x(A=>A.filter(j=>j.id!==`temp-${Date.now()}`))}finally{u(!1)}},$=e.media_url.includes("orientation=vertical");return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transform transition-transform duration-200 hover:translate-y-[-2px] hover:shadow-md",children:[a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("img",{src:e.avatar_url||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=100",alt:e.username,className:"w-10 h-10 rounded-full object-cover"}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:e.username}),a.jsxs("div",{className:"flex items-center bg-orange-100 px-2 py-0.5 rounded-full",children:[a.jsx(hf,{className:"w-4 h-4 text-orange-500 mr-1"}),a.jsxs("span",{className:"text-sm font-medium text-orange-600",children:[e.streak_count," day",e.streak_count!==1?"s":""]})]})]}),a.jsx("p",{className:"text-xs text-gray-500",children:Ha(new Date(e.timestamp),{addSuffix:!0})})]})]}),m&&a.jsx(Zw,{onDelete:b,isOwner:m})]})}),a.jsx("div",{className:`relative ${$?"aspect-[10/16]":"aspect-[16/10]"}`,children:e.media_type==="video"?a.jsx("video",{src:e.media_url,className:"w-full h-full object-cover",controls:!0}):a.jsx("img",{src:e.media_url,alt:"Post content",className:`w-full h-full object-cover ${_?"opacity-100":"opacity-0"}`,style:{transition:"opacity 0.3s ease-in-out"},onLoad:()=>k(!0),loading:"lazy"})}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex gap-4 mb-4",children:[a.jsxs("button",{onClick:R,disabled:o,className:`flex items-center gap-1 transition-colors ${h?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[a.jsx(Zi,{className:`w-6 h-6 ${h?"fill-current":""}`}),d>0&&a.jsx("span",{className:"text-sm font-medium",children:d})]}),a.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-1 text-gray-500 hover:text-primary-500 transition-colors",children:[a.jsx(yu,{className:"w-6 h-6"}),N.length>0&&a.jsx("span",{className:"text-sm font-medium",children:N.length})]})]}),a.jsxs("p",{className:"text-gray-800 mb-2",children:[a.jsx("span",{className:"font-semibold",children:e.username})," ",e.caption]}),L.length>0&&a.jsx(Xw,{reactions:L}),r&&a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-3",children:N.map(M=>{var oe,A,j;return a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("img",{src:((oe=M.user)==null?void 0:oe.avatar_url)||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=100",alt:((A=M.user)==null?void 0:A.name)||"User",className:"w-8 h-8 rounded-full object-cover"}),a.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-sm text-gray-900",children:(j=M.user)==null?void 0:j.name}),a.jsx("span",{className:"text-xs text-gray-500",children:Ha(new Date(M.created_at),{addSuffix:!0})})]}),a.jsx("p",{className:"text-sm text-gray-700 mt-1",children:M.comment})]})]},M.id)})}),a.jsxs("form",{onSubmit:q,className:"relative mt-3",children:[a.jsx("input",{type:"text",value:s,onChange:M=>i(M.target.value),placeholder:"Add a comment...",className:"w-full pl-4 pr-12 py-2 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),a.jsx("button",{type:"submit",disabled:c||!s.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 text-primary-600 hover:text-primary-700 disabled:text-gray-400",children:a.jsx(yu,{className:"w-5 h-5"})})]})]})]})]})};function Zf(e){const[t,r]=w.useState([]),[n,s]=w.useState(!0),[i,o]=w.useState(null);w.useState(!0),w.useEffect(()=>{e&&(c(e),l())},[e]);const l=()=>{if(!e)return;const f=T.channel("posts_changes").on("postgres_changes",{event:"*",schema:"public",table:"posts",filter:`family_id=eq.${e}`},()=>{c(e)}).on("postgres_changes",{event:"*",schema:"public",table:"reactions"},()=>{c(e)}).subscribe();return()=>{T.removeChannel(f)}},c=async f=>{try{const{data:{user:h}}=await T.auth.getUser();if(!h)throw new Error("Not authenticated");const{data:p,error:v}=await T.from("families").select("slideshow_photo_limit").eq("id",f).single();if(v)throw v;const x=p.slideshow_photo_limit||30,{data:S,error:g}=await T.from("posts").select(`
          *,
          post_families!inner (
            family_id
          ),
          reactions (
            id,
            user_id,
            reaction_type,
            emoji_type,
            comment,
            created_at,
            users (
              name,
              avatar_url
            )
          )
        `).eq("post_families.family_id",f).order("timestamp",{ascending:!1});if(g)throw g;const m=(S==null?void 0:S.map(y=>{const _=y.reactions||[],k=_.filter(b=>b.reaction_type==="LIKE"),E=_.filter(b=>b.reaction_type==="COMMENT");return{...y,family_id:f,reactions:_,likes_count:k.length,comments_count:E.length,user_has_liked:k.some(b=>b.user_id===h.id),elderly_reactions:_.filter(b=>b.reaction_type==="SLIDESHOW")}}))||[];if(m.length>x){const y=m.filter(k=>!k.is_favorite).sort((k,E)=>new Date(k.timestamp).getTime()-new Date(E.timestamp).getTime()),_=m.length-x;if(y.length>=_){const k=y.slice(0,_);for(const b of k)await T.from("posts").delete().eq("id",b.id);const E=m.filter(b=>!k.some(N=>N.id===b.id));r(E)}else r(m)}else r(m)}catch(h){console.error("Error fetching posts:",h),o(h instanceof Error?h.message:"Failed to load posts")}finally{s(!1)}};return{posts:t,loading:n,error:i,createPost:async(f,h)=>{try{const{data:{user:p}}=await T.auth.getUser();if(!p)throw new Error("Not authenticated");const{data:v,error:x}=await T.from("users").select("name, avatar_url, streak_count, last_post_date").eq("id",p.id).single();if(x)throw x;const S=new Date().toISOString().split("T")[0],g=v.last_post_date?new Date(v.last_post_date).toISOString().split("T")[0]:null;let m=0;if(g){const N=Math.floor((new Date(S).getTime()-new Date(g).getTime())/864e5);N===1?m=v.streak_count+1:N===0?m=v.streak_count:m=1}else m=1;const{data:y,error:_}=await T.from("posts").insert([{username:v.name,media_url:f.media_url,media_type:f.media_type,caption:f.caption,avatar_url:v.avatar_url||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=100",user_id:p.id,streak_count:m}]).select().single();if(_)throw _;const k=h.map(N=>({post_id:y.id,family_id:N})),{error:E}=await T.from("post_families").insert(k);if(E)throw E;const{error:b}=await T.from("users").update({streak_count:m,last_post_date:S}).eq("id",p.id);if(b)throw b;return y}catch(p){throw console.error("Error creating post:",p),new Error("Failed to create post")}},refreshPosts:()=>e&&c(e),toggleFavorite:async f=>{try{const h=t.find(v=>v.id===f);if(!h)throw new Error("Post not found");const{error:p}=await T.from("posts").update({is_favorite:!h.is_favorite}).eq("id",f);if(p)throw p;r(v=>v.map(x=>x.id===f?{...x,is_favorite:!x.is_favorite}:x))}catch(h){throw console.error("Error toggling favorite:",h),new Error("Failed to update favorite status")}}}}function nc(){const e=w.useCallback(i=>{window.location.hash=`family/${i}`},[]),t=w.useCallback(i=>{window.location.hash=`slideshow/${i}`},[]),r=w.useCallback(()=>{window.location.hash="join"},[]),n=w.useCallback(()=>{window.location.hash="photos"},[]),s=w.useCallback(()=>{window.location.hash="agenda"},[]);return{navigateToFamily:e,navigateToSlideshow:t,navigateToJoin:r,navigateToPhotos:n,navigateToAgenda:s}}const tx=({families:e,totalCost:t,onClose:r})=>{const n=t*12,s=e.length>0?t/e.length:0;return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full relative animate-scale-up",children:[a.jsx("button",{onClick:r,className:"absolute -top-2 -right-2 p-2 bg-white rounded-full shadow-lg text-gray-500 hover:text-gray-700",children:a.jsx(lt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(df,{className:"w-6 h-6 text-primary-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Subscription Management"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600",children:"Active Families"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ke,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-800",children:e.length})]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600",children:"Monthly Cost"}),a.jsxs("span",{className:"font-medium text-gray-800",children:["€",t]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600",children:"Annual Cost"}),a.jsxs("span",{className:"font-medium text-gray-800",children:["€",n]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Cost per Family"}),a.jsxs("span",{className:"font-medium text-gray-800",children:["€",s.toFixed(2)]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:"Your Families"}),e.map(i=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[i.family_picture?a.jsx("img",{src:i.family_picture,alt:i.name,className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx(Ke,{className:"w-4 h-4 text-primary-600"})}),a.jsx("span",{className:"font-medium text-gray-800",children:i.display_name||i.name})]}),a.jsx("span",{className:"text-gray-600",children:"€10/month"})]},i.id))]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>{},className:"w-full bg-primary-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-primary-600 transition-colors",children:"Renew Subscription"}),a.jsx("button",{onClick:()=>{},className:"w-full bg-white text-primary-600 border-2 border-primary-500 py-2 px-4 rounded-lg font-medium hover:bg-primary-50 transition-colors",children:"Manage Payment Method"})]})]})]})})},rx=({family:e,isSelected:t,onSelect:r})=>{const n=w.useCallback(()=>{r(e.id)},[e.id,r]);return a.jsx("button",{onClick:n,className:`w-12 h-12 rounded-full relative group transition-all ${t?"ring-2 ring-primary-500":"hover:ring-2 hover:ring-gray-300"}`,title:e.display_name||e.name,children:e.family_picture?a.jsx("div",{className:"w-full h-full rounded-full overflow-hidden",children:a.jsx("img",{src:e.family_picture,alt:e.display_name||e.name,className:`w-full h-full object-cover transition-opacity ${t?"opacity-100":"opacity-75 group-hover:opacity-100"}`})}):a.jsx("div",{className:`w-full h-full rounded-full flex items-center justify-center transition-colors ${t?"bg-primary-100":"bg-gray-100 group-hover:bg-gray-200"}`,style:{backgroundColor:t?`${e.color}20`:void 0},children:a.jsx(Ke,{className:"w-6 h-6",style:{color:t?e.color:void 0}})})})},nx=({currentPage:e,onFeedClick:t,onFamilyClick:r,onSlideshowClick:n})=>a.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in",children:[e==="feed"?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("button",{onClick:r,className:`w-10 h-10 rounded-full bg-primary-100 text-primary-600 
              hover:bg-primary-200 flex items-center justify-center transition-all
              transform hover:scale-110`,title:"Family Settings",children:a.jsx(Ke,{className:"w-5 h-5"})}),a.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Family"})]}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("button",{onClick:t,className:`w-10 h-10 rounded-full bg-primary-100 text-primary-600 
              hover:bg-primary-200 flex items-center justify-center transition-all
              transform hover:scale-110`,title:"Back to Feed",children:a.jsx(ff,{className:"w-5 h-5"})}),a.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Feed"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("button",{onClick:n,className:`w-10 h-10 rounded-full bg-primary-100 text-primary-600 
            hover:bg-primary-200 flex items-center justify-center transition-all
            transform hover:scale-110`,title:"Start Slideshow",children:a.jsx(e0,{className:"w-5 h-5"})}),a.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Slideshow"})]}),a.jsx("div",{className:"w-8 border-t border-gray-200 my-2"})]}),sx=({onOpenFeedback:e})=>a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("button",{onClick:e,className:`w-12 h-12 rounded-full bg-primary-50 text-primary-600
          hover:bg-primary-100 flex items-center justify-center transition-all
          transform hover:scale-105`,title:"Give Feedback",children:a.jsx(Qg,{className:"w-6 h-6"})}),a.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Feedback"})]}),ix=({onClose:e})=>a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full relative animate-scale-up",children:[a.jsx("button",{onClick:e,className:"absolute -top-2 -right-2 p-2 bg-white rounded-full shadow-lg text-gray-500 hover:text-gray-700",children:a.jsx(lt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(Xg,{className:"w-6 h-6 text-primary-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Share Your Feedback"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-6",children:"We value your input! Help us improve your experience by sharing your thoughts."}),a.jsx("button",{className:`w-full bg-primary-500 text-white py-3 px-4 rounded-lg font-medium 
              hover:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 
              transition-colors`,onClick:()=>{console.log("Open feedback form")},children:"Open Feedback Form"})]})]})}),us=({currentFamilyId:e,onFamilyChange:t,onJoinFamily:r,isCollapsed:n,onToggleCollapse:s,currentPage:i})=>{const{families:o,loading:l,error:c}=vs(),[u,d]=w.useState(!1),[f,h]=w.useState(!1),{navigateToFamily:p,navigateToSlideshow:v,navigateToJoin:x}=nc(),S=w.useCallback(_=>{t(_),p(_)},[t,p]),g=w.useCallback(_=>{_.preventDefault(),_.stopPropagation(),e&&v(e)},[e,v]),m=w.useCallback(_=>{_.preventDefault(),_.stopPropagation(),e&&p(e)},[e,p]),y=w.useCallback(_=>{_.preventDefault(),_.stopPropagation(),x()},[x]);return l?a.jsx("div",{className:`fixed left-0 top-16 bottom-20 bg-white border-r border-gray-200 
        flex flex-col items-center py-4 transition-transform duration-300 z-10
        ${n?"-translate-x-full":"translate-x-0"} w-16`,children:a.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(_=>a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"},_))})}):c?a.jsx("div",{className:`fixed left-0 top-16 bottom-20 bg-white border-r border-gray-200 
        flex flex-col items-center py-4 transition-transform duration-300 z-10
        ${n?"-translate-x-full":"translate-x-0"} w-16`,children:a.jsx("div",{className:"text-red-500 text-xs text-center px-2",children:"Error loading families"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`fixed left-0 top-16 bottom-20 bg-white border-r border-gray-200 
        flex flex-col items-center py-4 transition-transform duration-300 z-10
        ${n?"-translate-x-full":"translate-x-0"} w-16`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 flex-1",children:[o.map(_=>a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(rx,{family:_,isSelected:e===_.id,onSelect:S}),e===_.id&&a.jsx(nx,{currentPage:i,onFeedClick:m,onFamilyClick:y,onSlideshowClick:g})]},_.id)),a.jsx("button",{onClick:r,className:`w-12 h-12 rounded-full bg-gray-100 text-gray-600 
              hover:bg-gray-200 flex items-center justify-center transition-all`,title:"Join or create family",children:a.jsx(Jl,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsx(sx,{onOpenFeedback:()=>h(!0)}),a.jsx("button",{onClick:()=>d(!0),className:`w-12 h-12 rounded-full bg-primary-50 text-primary-600
              hover:bg-primary-100 flex items-center justify-center transition-all`,title:"Manage Subscription",children:a.jsx(df,{className:"w-6 h-6"})})]})]}),a.jsx("button",{onClick:s,className:`fixed top-1/2 -translate-y-1/2 w-6 h-12 
          bg-white border border-gray-200 rounded-r-lg shadow-sm
          flex items-center justify-center text-gray-500 hover:text-gray-700
          transition-all duration-300 z-20
          ${n?"left-0":"left-16"}`,children:n?a.jsx(as,{className:"w-4 h-4"}):a.jsx(Ql,{className:"w-4 h-4"})}),u&&a.jsx(tx,{families:o,totalCost:o.length*10,onClose:()=>d(!1)}),f&&a.jsx(ix,{onClose:()=>h(!1)})]})},em=({familyId:e,onClick:t})=>{const{hasNewReminders:r}=Uf(e);return a.jsxs("button",{onClick:t,className:"relative p-2 text-gray-600 hover:text-primary-600 transition-colors",title:"View Reminders",children:[a.jsx(Gl,{className:"w-6 h-6"}),r&&a.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]})},Uu=({familyId:e})=>{const{posts:t,loading:r,error:n,refreshPosts:s}=Zf(e),[i,o]=w.useState(!1),{navigateToAgenda:l}=nc(),c=h=>{window.location.hash=`family/${h}`},u=()=>{window.location.hash="join"},d=()=>{s()},f=()=>{l()};return e?a.jsxs(a.Fragment,{children:[a.jsx(us,{currentFamilyId:e,onFamilyChange:c,onJoinFamily:u,isCollapsed:i,onToggleCollapse:()=>o(!i),currentPage:"feed"}),a.jsxs("div",{className:`max-w-lg mx-auto px-4 sm:px-6 transition-all duration-300 ${i?"":"pl-24"}`,children:[a.jsx("div",{className:"fixed top-4 right-4 z-20",children:a.jsx(em,{familyId:e,onClick:f})}),r?a.jsx("div",{className:"animate-pulse space-y-6",children:[1,2,3].map(h=>a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),a.jsx("div",{className:"h-64 bg-gray-200 rounded mb-4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},h))}):n?a.jsx("div",{className:"bg-red-50 rounded-xl p-6 text-red-600 text-center",children:n}):t.length===0?a.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-gray-100 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ke,{className:"w-8 h-8 text-primary-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Posts Yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first one to share a moment with your family!"}),a.jsx("button",{onClick:()=>window.location.hash="photos",className:"bg-primary-500 text-white px-6 py-2 rounded-lg hover:bg-primary-600 transition-colors",children:"Share a Photo"})]}):a.jsx("div",{className:"space-y-6",children:t.map(h=>a.jsx(ex,{post:h,onDelete:d},h.id))})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(us,{currentFamilyId:e,onFamilyChange:c,onJoinFamily:u,isCollapsed:i,onToggleCollapse:()=>o(!i),currentPage:"feed"}),a.jsx("div",{className:`max-w-lg mx-auto px-4 sm:px-6 transition-all duration-300 ${i?"":"pl-24"}`,children:a.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-gray-100 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ke,{className:"w-8 h-8 text-primary-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Select a Family"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Choose a family from the sidebar to view their posts"})]})})]})};var Va=function(e,t){return Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Va(e,t)};function ox(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Va(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ye=function(){return ye=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ye.apply(this,arguments)};var Wu=!1,ar,qa,Ya,oi,ai,tm,li,Ga,Qa,Ka,rm,Ja,Xa,nm,sm;function Oe(){if(!Wu){Wu=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Ja=/\b(iPhone|iP[ao]d)/.exec(e),Xa=/\b(iP[ao]d)/.exec(e),Ka=/Android/i.exec(e),nm=/FBAN\/\w+;/i.exec(e),sm=/Mobile/i.exec(e),rm=!!/Win64/.exec(e),t){ar=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,ar&&document&&document.documentMode&&(ar=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);tm=n?parseFloat(n[1])+4:ar,qa=t[2]?parseFloat(t[2]):NaN,Ya=t[3]?parseFloat(t[3]):NaN,oi=t[4]?parseFloat(t[4]):NaN,oi?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),ai=t&&t[1]?parseFloat(t[1]):NaN):ai=NaN}else ar=qa=Ya=ai=oi=NaN;if(r){if(r[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);li=s?parseFloat(s[1].replace("_",".")):!0}else li=!1;Ga=!!r[2],Qa=!!r[3]}else li=Ga=Qa=!1}}var Za={ie:function(){return Oe()||ar},ieCompatibilityMode:function(){return Oe()||tm>ar},ie64:function(){return Za.ie()&&rm},firefox:function(){return Oe()||qa},opera:function(){return Oe()||Ya},webkit:function(){return Oe()||oi},safari:function(){return Za.webkit()},chrome:function(){return Oe()||ai},windows:function(){return Oe()||Ga},osx:function(){return Oe()||li},linux:function(){return Oe()||Qa},iphone:function(){return Oe()||Ja},mobile:function(){return Oe()||Ja||Xa||Ka||sm},nativeApp:function(){return Oe()||nm},android:function(){return Oe()||Ka},ipad:function(){return Oe()||Xa}},ax=Za,Vs=!!(typeof window<"u"&&window.document&&window.document.createElement),lx={canUseDOM:Vs,canUseWorkers:typeof Worker<"u",canUseEventListeners:Vs&&!!(window.addEventListener||window.attachEvent),canUseViewport:Vs&&!!window.screen,isInWorker:!Vs},cx=lx,im=cx,om;im.canUseDOM&&(om=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function ux(e,t){if(!im.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var s=document.createElement("div");s.setAttribute(r,"return;"),n=typeof s[r]=="function"}return!n&&om&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var dx=ux,hx=ax,fx=dx,Bu=10,Hu=40,Vu=800;function am(e){var t=0,r=0,n=0,s=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=t*Bu,s=r*Bu,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||s)&&e.deltaMode&&(e.deltaMode==1?(n*=Hu,s*=Hu):(n*=Vu,s*=Vu)),n&&!t&&(t=n<1?-1:1),s&&!r&&(r=s<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:s}}am.getEventType=function(){return hx.firefox()?"DOMMouseScroll":fx("wheel")?"wheel":"mousewheel"};var mx=am,px=mx;const gx=Ku(px);function yx(e,t,r,n,s,i){i===void 0&&(i=0);var o=on(e,t,i),l=o.width,c=o.height,u=Math.min(l,r),d=Math.min(c,n);return u>d*s?{width:d*s,height:d}:{width:u,height:u/s}}function vx(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function En(e,t,r,n,s){s===void 0&&(s=0);var i=on(t.width,t.height,s),o=i.width,l=i.height;return{x:qu(e.x,o,r.width,n),y:qu(e.y,l,r.height,n)}}function qu(e,t,r,n){var s=t*n/2-r/2;return ao(e,-s,s)}function Yu(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Gu(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function wx(e,t,r,n,s,i,o){i===void 0&&(i=0),o===void 0&&(o=!0);var l=o?xx:_x,c=on(t.width,t.height,i),u=on(t.naturalWidth,t.naturalHeight,i),d={x:l(100,((c.width-r.width/s)/2-e.x/s)/c.width*100),y:l(100,((c.height-r.height/s)/2-e.y/s)/c.height*100),width:l(100,r.width/c.width*100/s),height:l(100,r.height/c.height*100/s)},f=Math.round(l(u.width,d.width*u.width/100)),h=Math.round(l(u.height,d.height*u.height/100)),p=u.width>=u.height*n,v=p?{width:Math.round(h*n),height:h}:{width:f,height:Math.round(f/n)},x=ye(ye({},v),{x:Math.round(l(u.width-v.width,d.x*u.width/100)),y:Math.round(l(u.height-v.height,d.y*u.height/100))});return{croppedAreaPercentages:d,croppedAreaPixels:x}}function xx(e,t){return Math.min(e,Math.max(0,t))}function _x(e,t){return t}function kx(e,t,r,n,s,i){var o=on(t.width,t.height,r),l=ao(n.width/o.width*(100/e.width),s,i),c={x:l*o.width/2-n.width/2-o.width*l*(e.x/100),y:l*o.height/2-n.height/2-o.height*l*(e.y/100)};return{crop:c,zoom:l}}function bx(e,t,r){var n=vx(t);return r.height>r.width?r.height/(e.height*n):r.width/(e.width*n)}function jx(e,t,r,n,s,i){r===void 0&&(r=0);var o=on(t.naturalWidth,t.naturalHeight,r),l=ao(bx(e,t,n),s,i),c=n.height>n.width?n.height/e.height:n.width/e.width,u={x:((o.width-e.width)/2-e.x)*c,y:((o.height-e.height)/2-e.y)*c};return{crop:u,zoom:l}}function Qu(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Sx(e){return e*Math.PI/180}function on(e,t,r){var n=Sx(r);return{width:Math.abs(Math.cos(n)*e)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*e)+Math.abs(Math.cos(n)*t)}}function ao(e,t,r){return Math.min(Math.max(e,t),r)}function qs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var Nx=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Ex=1,Cx=3,Px=1,Tx=function(e){ox(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.imageRef=w.createRef(),r.videoRef=w.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(s){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturemove",r.onGestureMove),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.emitCropData(),r.setInitialCrop(n)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var s=kx(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=s.crop,o=s.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(o)}else if(r.props.initialCroppedAreaPixels){var l=jx(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=l.crop,o=l.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(o)}},r.computeSizes=function(){var n,s,i,o,l,c,u=r.imageRef.current||r.videoRef.current;if(u&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var d=r.containerRect.width/r.containerRect.height,f=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((s=r.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,h=((i=r.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((o=r.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,p=u.offsetWidth<f||u.offsetHeight<h,v=f/h,x=void 0;if(p)switch(r.state.mediaObjectFit){default:case"contain":x=d>v?{width:r.containerRect.height*v,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/v};break;case"horizontal-cover":x={width:r.containerRect.width,height:r.containerRect.width/v};break;case"vertical-cover":x={width:r.containerRect.height*v,height:r.containerRect.height};break}else x={width:u.offsetWidth,height:u.offsetHeight};r.mediaSize=ye(ye({},x),{naturalWidth:f,naturalHeight:h}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var S=r.props.cropSize?r.props.cropSize:yx(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((l=r.state.cropSize)===null||l===void 0?void 0:l.height)!==S.height||((c=r.state.cropSize)===null||c===void 0?void 0:c.width)!==S.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(S),r.setState({cropSize:S},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(S),S}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(t.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(t.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(t.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(t.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureMove),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureMove=function(n){if(n.preventDefault(),!r.isTouching){var s=t.getMousePoint(n),i=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(i,s,{shouldUpdatePosition:!0}),r.props.onRotationChange){var o=r.gestureRotationStart+n.rotation;r.props.onRotationChange(o)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var s,i,o=n.x,l=n.y;r.dragStartPosition={x:o,y:l},r.dragStartCrop=ye({},r.props.crop),(i=(s=r.props).onInteractionStart)===null||i===void 0||i.call(s)},r.onDrag=function(n){var s=n.x,i=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(s===void 0||i===void 0)){var o=s-r.dragStartPosition.x,l=i-r.dragStartPosition.y,c={x:r.dragStartCrop.x+o,y:r.dragStartCrop.y+l},u=r.props.restrictPosition?En(c,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):c;r.props.onCropChange(u)}}))},r.onDragStopped=function(){var n,s;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(s=(n=r.props).onInteractionEnd)===null||s===void 0||s.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var s=t.getMousePoint(n),i=gx(n).pixelY,o=r.props.zoom-i*r.props.zoomSpeed/200;r.setNewZoom(o,s,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=r.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=r.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},r.getPointOnContainer=function(n,s){var i=n.x,o=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(i-s.x),y:r.containerRect.height/2-(o-s.y)}},r.getPointOnMedia=function(n){var s=n.x,i=n.y,o=r.props,l=o.crop,c=o.zoom;return{x:(s+l.x)/c,y:(i+l.y)/c}},r.setNewZoom=function(n,s,i){var o=i===void 0?{}:i,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!r.state.cropSize||!r.props.onZoomChange)){var u=ao(n,r.props.minZoom,r.props.maxZoom);if(c){var d=r.getPointOnContainer(s,r.containerPosition),f=r.getPointOnMedia(d),h={x:f.x*u-d.x,y:f.y*u-d.y},p=r.props.restrictPosition?En(h,r.mediaSize,r.state.cropSize,u,r.props.rotation):h;r.props.onCropChange(p)}r.props.onZoomChange(u)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?En(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return wx(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(s,i),r.props.onCropAreaChange&&r.props.onCropAreaChange(s,i)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(s,i)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var n=r.props.restrictPosition?En(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(n),r.emitCropData()}},r.onKeyDown=function(n){var s=r.props,i=s.crop,o=s.onCropChange,l=s.keyboardStep,c=s.zoom,u=s.rotation,d=l;if(r.state.cropSize){var f=ye({},i);switch(n.key){case"ArrowUp":f.y-=d;break;case"ArrowDown":f.y+=d;break;case"ArrowLeft":f.x-=d;break;case"ArrowRight":f.x+=d;break;default:return}r.props.restrictPosition&&(f=En(f,r.mediaSize,r.state.cropSize,c,u)),o(f)}},r}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Nx,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},t.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(r){var n,s,i,o,l,c,u,d,f;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((i=r.cropSize)===null||i===void 0?void 0:i.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=r.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((u=r.crop)===null||u===void 0?void 0:u.y)!==((d=this.props.crop)===null||d===void 0?void 0:d.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((f=this.videoRef.current)===null||f===void 0||f.load());var h=this.getObjectFit();h!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:h},this.computeSizes)},t.prototype.getAspect=function(){var r=this.props,n=r.cropSize,s=r.aspect;return n?n.width/n.height:s},t.prototype.getObjectFit=function(){var r,n,s,i;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,u=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,d=c/u;return d<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(r){var n=t.getTouchPoint(r.touches[0]),s=t.getTouchPoint(r.touches[1]);this.lastPinchDistance=Yu(n,s),this.lastPinchRotation=Gu(n,s),this.onDragStart(Qu(n,s))},t.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var s=t.getTouchPoint(r.touches[0]),i=t.getTouchPoint(r.touches[1]),o=Qu(s,i);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=Yu(s,i),c=n.props.zoom*(l/n.lastPinchDistance);n.setNewZoom(c,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=l;var u=Gu(s,i),d=n.props.rotation+(u-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(d),n.lastPinchRotation=u})}},t.prototype.render=function(){var r=this,n,s=this.props,i=s.image,o=s.video,l=s.mediaProps,c=s.transform,u=s.crop,d=u.x,f=u.y,h=s.rotation,p=s.zoom,v=s.cropShape,x=s.showGrid,S=s.style,g=S.containerStyle,m=S.cropAreaStyle,y=S.mediaStyle,_=s.classes,k=_.containerClassName,E=_.cropAreaClassName,b=_.mediaClassName,N=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return w.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(R){return r.containerRef=R},"data-testid":"container",style:g,className:qs("reactEasyCrop_Container",k)},i?w.createElement("img",ye({alt:"",className:qs("reactEasyCrop_Image",N==="contain"&&"reactEasyCrop_Contain",N==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",N==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",b)},l,{src:i,ref:this.imageRef,style:ye(ye({},y),{transform:c||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(h,"deg) scale(").concat(p,")")}),onLoad:this.onMediaLoad})):o&&w.createElement("video",ye({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:qs("reactEasyCrop_Video",N==="contain"&&"reactEasyCrop_Contain",N==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",N==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",b)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:ye(ye({},y),{transform:c||"translate(".concat(d,"px, ").concat(f,"px) rotate(").concat(h,"deg) scale(").concat(p,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(L){return w.createElement("source",ye({key:L.src},L))})),this.state.cropSize&&w.createElement("div",{style:ye(ye({},m),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,"data-testid":"cropper",className:qs("reactEasyCrop_CropArea",v==="round"&&"reactEasyCrop_CropAreaRound",x&&"reactEasyCrop_CropAreaGrid",E)}))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Cx,minZoom:Ex,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Px},t.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t}(w.Component);const Rx=e=>new Promise((t,r)=>{const n=new Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",s=>r(s)),n.src=e}),Ox=async(e,t,r,n="image/jpeg")=>{const s=await Rx(e),i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return null;const l=r?1e3:1600,c=r?1600:1e3;i.width=l,i.height=c,o.fillStyle="#000000",o.fillRect(0,0,l,c);const u=Math.min(l/t.width,c/t.height),d=t.width*u,f=t.height*u,h=(l-d)/2,p=(c-f)/2;return o.drawImage(s,t.x,t.y,t.width,t.height,h,p,d,f),new Promise(v=>{i.toBlob(x=>{if(!x){v(null);return}const S=new File([x],"cropped-image.jpg",{type:n});v(S)},n,.95)})},Dx=({onSubmit:e})=>{const{families:t}=vs(),[r,n]=w.useState(null),[s,i]=w.useState("image"),[o,l]=w.useState(""),[c,u]=w.useState([]),[d,f]=w.useState(!1),[h,p]=w.useState(null),v=w.useRef(null),[x,S]=w.useState(null),[g,m]=w.useState(!1),[y,_]=w.useState({x:0,y:0}),[k,E]=w.useState(1),[b,N]=w.useState(!1),[L,R]=w.useState(null),q=w.useCallback(async A=>{var C;const j=(C=A.target.files)==null?void 0:C[0];if(!j)return;if(j.size>10*1024*1024){p("File size must be less than 10MB");return}if(!j.type.startsWith("image/")&&!j.type.startsWith("video/")){p("Please select an image or video file");return}S(j),i(j.type.startsWith("video/")?"video":"image"),p(null);const O=URL.createObjectURL(j);if(n(O),j.type.startsWith("image/")){const I=new Image;I.onload=()=>{const U=I.height>I.width;N(U),m(!0),E(1),_({x:0,y:0})},I.src=O}},[]),$=A=>{u(j=>j.includes(A)?j.filter(O=>O!==A):[...j,A])},Q=(A,j)=>{R(j)},fe=()=>{N(A=>!A),_({x:0,y:0}),E(1)},M=async()=>{if(!(!r||!L))try{const A=await Ox(r,L,b,(x==null?void 0:x.type)||"image/jpeg");if(A){r&&URL.revokeObjectURL(r);const j=URL.createObjectURL(A);n(j),S(A)}m(!1)}catch(A){console.error("Error cropping image:",A),p("Failed to crop image")}},oe=async A=>{if(A.preventDefault(),!x||!o.trim()||c.length===0){p("Please fill in all required fields and select at least one family");return}f(!0),p(null);try{const{data:{user:j},error:O}=await T.auth.getUser();if(O)throw O;if(!j)throw new Error("Not authenticated");const C=Date.now(),I=x.name.split(".").pop(),K=`uploads/${`${j.id}-${C}${b?"-vertical":""}.${I}`}`,{error:te}=await T.storage.from("media").upload(K,x,{cacheControl:"3600",upsert:!1});if(te)throw te;const{data:{publicUrl:Pe}}=T.storage.from("media").getPublicUrl(K),Te=`${Pe}${b?"?orientation=vertical":""}`;await e({media_url:Te,media_type:s,caption:o.trim()},c),r&&URL.revokeObjectURL(r),n(null),l(""),u([]),S(null),m(!1),E(1),_({x:0,y:0}),v.current&&(v.current.value="")}catch(j){console.error("Error creating post:",j),p(j instanceof Error?j.message:"Failed to create post")}finally{f(!1)}};return a.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[a.jsx("div",{className:"relative",children:r?a.jsxs("div",{className:"relative",children:[s==="video"?a.jsx("video",{src:r,className:"w-full aspect-[16/10] rounded-xl object-cover",controls:!0}):g?a.jsxs("div",{className:`relative ${b?"aspect-[10/16]":"aspect-[16/10]"} rounded-xl overflow-hidden bg-black`,children:[a.jsx(Tx,{image:r,crop:y,zoom:k,aspect:b?10/16:16/10,onCropChange:_,onZoomChange:E,onCropComplete:Q,objectFit:"contain",restrictPosition:!1}),a.jsxs("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 bg-black/75 backdrop-blur-sm rounded-full p-2",children:[a.jsx("button",{type:"button",onClick:()=>E(Math.max(1,k-.1)),className:"p-1.5 text-white hover:bg-white/20 rounded-full transition-colors",children:a.jsx(l0,{className:"w-4 h-4"})}),a.jsx("input",{type:"range",value:k,min:1,max:3,step:.1,onChange:A=>E(Number(A.target.value)),className:"w-24"}),a.jsx("button",{type:"button",onClick:()=>E(Math.min(3,k+.1)),className:"p-1.5 text-white hover:bg-white/20 rounded-full transition-colors",children:a.jsx(a0,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:fe,className:"p-1.5 text-white hover:bg-white/20 rounded-full transition-colors",title:"Toggle orientation",children:a.jsx(Zg,{className:"w-4 h-4"})})]}),a.jsx("button",{type:"button",onClick:M,className:"absolute top-4 right-4 z-10 bg-primary-500 text-white p-2 rounded-lg hover:bg-primary-600 transition-colors",children:a.jsx(rn,{className:"w-5 h-5"})})]}):a.jsx("img",{src:r,alt:"Preview",className:`w-full ${b?"aspect-[10/16]":"aspect-[16/10]"} rounded-xl object-cover`}),a.jsx("button",{type:"button",onClick:()=>{r&&URL.revokeObjectURL(r),n(null),S(null),m(!1),E(1),_({x:0,y:0}),v.current&&(v.current.value="")},className:"absolute top-2 right-2 bg-gray-900/50 text-white p-2 rounded-full hover:bg-gray-900/75 transition-colors",children:a.jsx(lt,{className:"w-4 h-4"})})]}):a.jsxs("label",{className:"block w-full aspect-[16/10] rounded-xl border-2 border-dashed border-gray-300 hover:border-primary-500 transition-colors cursor-pointer",children:[a.jsx("input",{ref:v,type:"file",accept:"image/*,video/*",onChange:q,className:"hidden"}),a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[a.jsxs("div",{className:"flex gap-4 mb-2",children:[a.jsx(mf,{className:"w-8 h-8"}),a.jsx(o0,{className:"w-8 h-8"})]}),a.jsx("span",{className:"text-sm font-medium",children:"Click to upload a photo or video"}),a.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Max size: 10MB"})]})]})}),a.jsx("textarea",{value:o,onChange:A=>l(A.target.value),placeholder:"Write a caption...",className:"w-full p-3 rounded-xl border border-gray-200 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors resize-none",rows:3,required:!0}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Share with families"}),a.jsx("div",{className:"space-y-2",children:t.map(A=>a.jsxs("label",{className:"flex items-center p-3 rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",checked:c.includes(A.id),onChange:()=>$(A.id),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),a.jsx("div",{className:"ml-3",children:a.jsx("span",{className:"font-medium text-gray-700",children:A.display_name||A.name})})]},A.id))})]}),h&&a.jsx("div",{className:"p-3 rounded-lg bg-red-50 text-red-600 text-sm",children:h}),a.jsx("button",{type:"submit",disabled:!x||!o.trim()||c.length===0||d||g,className:"w-full bg-primary-500 text-white py-3 px-4 rounded-xl font-medium hover:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?a.jsxs(a.Fragment,{children:[a.jsx($t,{className:"w-5 h-5 animate-spin"}),"Sharing..."]}):"Share with Family"})]})};function sc(e){const[t,r]=w.useState(!1),[n,s]=w.useState(null);return{loading:t,error:n,createReminder:async d=>{r(!0),s(null);try{const{data:{user:f}}=await T.auth.getUser();if(!f)throw new Error("Not authenticated");const{error:h}=await T.from("reminders").insert([{...d,user_id:f.id,is_acknowledged:!1}]);if(h)throw h}catch(f){throw console.error("Error creating reminder:",f),s(f instanceof Error?f.message:"Failed to create reminder"),f}finally{r(!1)}},getActiveReminders:async()=>{try{const d=new Date().toISOString().split("T")[0],{data:f,error:h}=await T.from("reminders").select(`
          *,
          assigned_to:users!reminders_assigned_user_id_fkey (
            id,
            name,
            avatar_url
          )
        `).eq("family_id",e).gte("date",d).order("date",{ascending:!0});if(h)throw h;return f}catch(d){throw console.error("Error fetching reminders:",d),d}},acknowledgeReminder:async d=>{try{const{error:f}=await T.from("reminders").update({is_acknowledged:!0}).eq("id",d);if(f)throw f}catch(f){throw console.error("Error acknowledging reminder:",f),f}},assignReminder:async(d,f)=>{try{const{error:h}=await T.from("reminders").update({assigned_user_id:f}).eq("id",d);if(h)throw h}catch(h){throw console.error("Error assigning reminder:",h),h}},deleteReminder:async d=>{try{const{error:f}=await T.from("reminders").delete().eq("id",d);if(f)throw f}catch(f){throw console.error("Error deleting reminder:",f),f}}}}const Mx=({families:e,onSuccess:t})=>{const[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,f]=w.useState(new Set),[h,p]=w.useState("NONE"),[v,x]=w.useState(null),{createReminder:S,loading:g,error:m}=sc(r),y=async k=>{if(k.preventDefault(),!(!r||!s||!o||d.size===0))try{const E=Array.from(d);await Promise.all(E.map(b=>S({description:s,date:o,time:c||null,family_id:r,target_audience:b,recurrence_type:h,recurrence_day:v}))),i(""),l(""),u(""),f(new Set),p("NONE"),x(null),t==null||t()}catch(E){console.error("Error creating reminder:",E)}},_=k=>{f(E=>{const b=new Set(E);return b.has(k)?b.delete(k):b.add(k),b})};return a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx(nn,{className:"w-5 h-5 text-primary-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Add Reminder"})]}),m&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:m}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Family"}),a.jsxs("select",{value:r,onChange:k=>n(k.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[a.jsx("option",{value:"",children:"Choose a family"}),e.map(k=>a.jsx("option",{value:k.id,children:k.display_name||k.name},k.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s,onChange:k=>i(k.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:3,required:!0,placeholder:"Enter reminder description"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:o,onChange:k=>l(k.target.value),min:new Date().toISOString().split("T")[0],className:"w-full p-3 pl-10 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0}),a.jsx(tn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time (optional)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"time",value:c,onChange:k=>u(k.target.value),className:"w-full p-3 pl-10 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),a.jsx(nn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Show Reminder To"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",checked:d.has("ELDER"),onChange:()=>_("ELDER"),className:"w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Elder (Slideshow)"})]}),a.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",checked:d.has("FAMILY"),onChange:()=>_("FAMILY"),className:"w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Family (Feed)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recurrence"}),a.jsxs("select",{value:h,onChange:k=>{p(k.target.value),x(null)},className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"NONE",children:"One-time reminder"}),a.jsx("option",{value:"DAILY",children:"Daily"}),a.jsx("option",{value:"WEEKLY",children:"Weekly"}),a.jsx("option",{value:"MONTHLY",children:"Monthly"})]}),h==="MONTHLY"&&a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day of Month"}),a.jsxs("select",{value:v||"",onChange:k=>x(parseInt(k.target.value)),className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[a.jsx("option",{value:"",children:"Select day"}),Array.from({length:31},(k,E)=>E+1).map(k=>a.jsx("option",{value:k,children:k},k))]})]})]}),a.jsx("button",{type:"submit",disabled:g||!r||!s||!o||d.size===0,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?a.jsxs(a.Fragment,{children:[a.jsx($t,{className:"w-5 h-5 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jl,{className:"w-5 h-5"}),"Add Reminder"]})})]})]})},xs=({message:e,type:t="success",onClose:r,duration:n=3e3})=>(w.useEffect(()=>{const s=setTimeout(()=>{r()},n);return()=>clearTimeout(s)},[n,r]),a.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:a.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg 
        ${t==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[a.jsx("div",{className:`p-1 rounded-full 
          ${t==="success"?"bg-green-100":"bg-red-100"}`,children:t==="success"?a.jsx(rn,{className:"w-4 h-4"}):a.jsx(Hg,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-sm font-medium",children:e}),a.jsx("button",{onClick:r,className:"p-1 hover:opacity-70 transition-opacity",children:a.jsx(lt,{className:"w-4 h-4"})})]})})),Lx=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(null),{createPost:s}=Zf(null),{families:i}=vs(),[o,l]=w.useState("photos"),c=async(d,f)=>{try{t(null),await s(d,f),n("Photo successfully shared with your family!")}catch(h){throw console.error("Error creating post:",h),t(h instanceof Error?h.message:"Failed to create post"),h}},u=()=>{n("Reminder successfully added!")};return a.jsxs("div",{className:"max-w-lg mx-auto p-4 space-y-6",children:[a.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[a.jsxs("button",{onClick:()=>l("photos"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-colors ${o==="photos"?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(Ke,{className:"w-5 h-5"}),"Add Photos"]}),a.jsxs("button",{onClick:()=>l("reminders"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-colors ${o==="reminders"?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(nn,{className:"w-5 h-5"}),"Add Reminders"]})]}),o==="photos"?a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Share a Moment"}),e&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 rounded-lg",children:e}),a.jsx(Dx,{onSubmit:c})]}):a.jsx(Mx,{families:i,onSuccess:u}),r&&a.jsx(xs,{message:r,type:"success",onClose:()=>n(null)})]})},Ax=({familyId:e,currentPhotoLimit:t,currentSpeed:r,onUpdate:n,onClose:s})=>{const[i,o]=w.useState(t.toString()),[l,c]=w.useState(r.toString()),[u,d]=w.useState(null),[f,h]=w.useState(!1),[p,v]=w.useState(null),x=g=>{var y;const m=(y=g.target.files)==null?void 0:y[0];if(m){if(m.size>5*1024*1024){v("Family picture must be less than 5MB");return}d(m),v(null)}},S=async g=>{g.preventDefault(),h(!0),v(null);try{let m=null;if(u){const k=u.name.split(".").pop(),b=`family-pictures/${`${e}-${Date.now()}.${k}`}`,{error:N}=await T.storage.from("media").upload(b,u);if(N)throw N;const{data:{publicUrl:L}}=T.storage.from("media").getPublicUrl(b);m=L}const y={slideshow_photo_limit:parseInt(i),slideshow_speed:parseInt(l)};m&&(y.family_picture=m);const{error:_}=await T.from("families").update(y).eq("id",e);if(_)throw _;n(),s()}catch(m){console.error("Error updating family settings:",m),v(m instanceof Error?m.message:"Failed to update settings")}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full relative",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:a.jsx(lt,{className:"w-5 h-5"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Family Settings"}),p&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:p}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family Picture"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("label",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden"}),a.jsxs("div",{className:"flex items-center gap-2 p-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[a.jsx(n0,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:u?u.name:"Choose a picture"})]})]})})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Photos to Display"}),a.jsxs("select",{value:i,onChange:g=>o(g.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"10",children:"10 photos"}),a.jsx("option",{value:"20",children:"20 photos"}),a.jsx("option",{value:"30",children:"30 photos"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo Display Duration"}),a.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"10",children:"10 seconds"}),a.jsx("option",{value:"15",children:"15 seconds"}),a.jsx("option",{value:"30",children:"30 seconds"})]})]}),a.jsx("button",{type:"submit",disabled:f,className:"w-full flex items-center justify-center gap-2 py-2 px-4 bg-primary-500 text-white rounded-lg hover:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?a.jsxs(a.Fragment,{children:[a.jsx($t,{className:"w-5 h-5 animate-spin"}),"Updating..."]}):"Save Settings"})]})]})})},$x=({onRemove:e})=>{const[t,r]=w.useState(!1),[n,s]=w.useState(!1),i=()=>{r(!1),s(!0)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>r(!t),className:"p-1 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 transition-colors",children:a.jsx(pf,{className:"w-4 h-4"})}),t&&a.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-100 py-1 z-10",children:a.jsxs("button",{onClick:i,className:"w-full flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 transition-colors text-sm",children:[a.jsx(s0,{className:"w-4 h-4"}),"Remove from Family"]})})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full animate-scale-up",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Remove Member"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(lt,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to remove this member from the family? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{e(),s(!1)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Remove"})]})]})})]})},Ix=({onSuccess:e})=>{var j,O;const[t,r]=w.useState(null);w.useState(!1);const[n,s]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState([]),[u,d]=w.useState({}),[f,h]=w.useState(!1),[p,v]=w.useState(""),[x,S]=w.useState(""),[g,m]=w.useState("#056aa0"),[y,_]=w.useState(""),[k,E]=w.useState(null),[b,N]=w.useState(!1),[L,R]=w.useState(!1);w.useEffect(()=>{q()},[]);const q=async()=>{try{const{data:{user:C}}=await T.auth.getUser();if(!C)throw new Error("Not authenticated");const{data:I,error:U}=await T.from("family_members").select(`
          families (
            id,
            name,
            display_name,
            join_code,
            family_picture,
            slideshow_photo_limit,
            slideshow_speed
          )
        `).eq("user_id",C.id);if(U)throw U;const K=I.map(te=>({...te.families,display_name:te.families.display_name||te.families.name}));c(K);for(const te of K){const{data:Pe,error:Te}=await T.from("family_members").select(`
            users (
              id,
              name,
              avatar_url
            ),
            added_at
          `).eq("family_id",te.id);if(Te)throw Te;d(Et=>({...Et,[te.id]:Pe.map(er=>({id:er.users.id,name:er.users.name,avatar_url:er.users.avatar_url,added_at:er.added_at}))}))}}catch(C){console.error("Error fetching families:",C),s(C instanceof Error?C.message:"Failed to load families")}},$=async(C,I)=>{try{const{error:U}=await T.from("family_members").delete().eq("family_id",C).eq("user_id",I);if(U)throw U;d(K=>({...K,[C]:K[C].filter(te=>te.id!==I)})),o("Member removed successfully")}catch(U){console.error("Error removing member:",U),s(U instanceof Error?U.message:"Failed to remove member")}},Q=async C=>{try{await navigator.clipboard.writeText(C),h(!0),setTimeout(()=>h(!1),2e3)}catch(I){console.error("Failed to copy code:",I)}},fe=C=>{E(C),N(!0)},M=()=>{q(),N(!1)},oe=()=>{N(!1)},A=C=>{E(C),window.location.hash=`family/${C}`};return a.jsxs(a.Fragment,{children:[a.jsx(us,{currentFamilyId:k,onFamilyChange:A,onJoinFamily:()=>{},isCollapsed:L,onToggleCollapse:()=>R(!L),currentPage:"join"}),a.jsxs("div",{className:`max-w-lg mx-auto p-4 transition-all duration-300 ${L?"":"pl-24"}`,children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[l.length>0&&a.jsxs("div",{className:"mb-8 space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Your Families"}),l.map(C=>{var I,U;return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[C.family_picture?a.jsx("img",{src:C.family_picture,alt:C.name,className:"w-12 h-12 rounded-full object-cover"}):a.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx(Ke,{className:"w-6 h-6 text-primary-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800",children:C.display_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[((I=u[C.id])==null?void 0:I.length)||0," members"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>fe(C.id),className:"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-200",title:"Family Settings",children:a.jsx(gf,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>Q(C.join_code),className:"flex items-center gap-2 px-3 py-1.5 bg-primary-50 text-primary-600 rounded-lg hover:bg-primary-100 transition-colors",children:[f?a.jsx(rn,{className:"w-4 h-4"}):a.jsx(Yg,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:C.join_code})]})]})]}),a.jsx("div",{className:"space-y-2",children:(U=u[C.id])==null?void 0:U.map(K=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[K.avatar_url?a.jsx("img",{src:K.avatar_url,alt:K.name,className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(Ke,{className:"w-4 h-4 text-gray-600"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:K.name})]}),a.jsx($x,{onRemove:()=>$(C.id,K.id)})]},K.id))})]},C.id)})]}),t?t==="create"?a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Create a New Family"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family Name"}),a.jsx("input",{type:"text",value:p,onChange:C=>v(C.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter family name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (optional)"}),a.jsx("input",{type:"text",value:x,onChange:C=>S(C.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter display name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family Color"}),a.jsx("input",{type:"color",value:g,onChange:C=>m(C.target.value),className:"w-full h-12 p-1 border border-gray-300 rounded-lg cursor-pointer"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>r(null),className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{},className:"flex-1 py-3 px-4 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"Create Family"})]})]})]}):a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Join a Family"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family Join Code"}),a.jsx("input",{type:"text",value:y,onChange:C=>_(C.target.value.toUpperCase()),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter family code"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>r(null),className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{},className:"flex-1 py-3 px-4 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"Join Family"})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>r("create"),className:"w-full flex items-center justify-center gap-3 p-4 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[a.jsx(Ke,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Create a New Family"})]}),a.jsxs("button",{onClick:()=>r("join"),className:"w-full flex items-center justify-center gap-3 p-4 bg-white text-primary-500 border-2 border-primary-500 rounded-lg hover:bg-primary-50 transition-colors",children:[a.jsx(i0,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Join Existing Family"})]})]})]}),b&&k&&a.jsx(Ax,{familyId:k,currentPhotoLimit:((j=l.find(C=>C.id===k))==null?void 0:j.slideshow_photo_limit)||30,currentSpeed:((O=l.find(C=>C.id===k))==null?void 0:O.slideshow_speed)||15,onUpdate:M,onClose:oe}),i&&a.jsx(xs,{message:i,type:"success",onClose:()=>o(null)})]})]})};function lm(){const[e,t]=w.useState(!0),[r,n]=w.useState(null),[s,i]=w.useState(null);w.useEffect(()=>{o();const{data:{subscription:h}}=T.auth.onAuthStateChange(()=>{o()});return()=>h.unsubscribe()},[]);const o=async()=>{try{const{data:{user:h}}=await T.auth.getUser();if(!h){n(null),t(!1);return}const{data:p,error:v}=await T.from("users").select("*").eq("id",h.id).single();if(v)throw v;n(p)}catch(h){console.error("Error fetching user profile:",h),i(h instanceof Error?h.message:"An error occurred")}finally{t(!1)}};return{user:r,loading:e,error:s,signIn:async({email:h,password:p})=>{try{t(!0),i(null);const{error:v}=await T.auth.signInWithPassword({email:h,password:p});if(v)throw v}catch(v){throw console.error("Error signing in:",v),i(v instanceof Error?v.message:"An error occurred"),v}finally{t(!1)}},signUp:async({email:h,password:p,name:v,familyAction:x,familyName:S,joinCode:g})=>{try{t(!0),i(null);const{data:{user:m},error:y}=await T.auth.signUp({email:h,password:p,options:{data:{name:v}}});if(y)throw y;if(!m)throw new Error("Failed to create user");const{error:_}=await T.from("users").insert([{id:m.id,email:h,name:v,avatar_url:null,streak_count:0,notification_daily_reminder:!0,notification_new_content:!0,notification_streak_alert:!0}]);if(_)throw _;if(x==="create"&&S){const{data:k,error:E}=await T.from("families").insert([{name:S,display_name:S,color:"#056aa0",join_code:Array.from({length:8},()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(Math.random()*36)]).join(""),slideshow_photo_limit:30,slideshow_speed:15}]).select().single();if(E)throw E;const{error:b}=await T.from("family_members").insert([{family_id:k.id,user_id:m.id}]);if(b)throw b}else if(x==="join"&&g){const{data:k,error:E}=await T.from("families").select().eq("join_code",g).single();if(E)throw new Error("Invalid family code");const{error:b}=await T.from("family_members").insert([{family_id:k.id,user_id:m.id}]);if(b)throw b}}catch(m){throw console.error("Error signing up:",m),i(m instanceof Error?m.message:"An error occurred"),m}finally{t(!1)}},signOut:async()=>{try{t(!0),i(null);const{error:h}=await T.auth.signOut();if(h)throw h;n(null)}catch(h){throw console.error("Error signing out:",h),i(h instanceof Error?h.message:"An error occurred"),h}finally{t(!1)}},updateProfile:async h=>{try{t(!0),i(null);const{data:{user:p}}=await T.auth.getUser();if(!p)throw new Error("Not authenticated");if(h.email){const{error:g}=await T.auth.updateUser({email:h.email});if(g)throw g}const{updated_at:v,...x}=h,{error:S}=await T.from("users").update(x).eq("id",p.id);if(S)throw S;return await o(),!0}catch(p){throw console.error("Error updating profile:",p),i(p instanceof Error?p.message:"Failed to update profile"),p}finally{t(!1)}},updatePassword:async h=>{try{t(!0),i(null);const{error:p}=await T.auth.updateUser({password:h});if(p)throw p;return!0}catch(p){throw console.error("Error updating password:",p),i(p instanceof Error?p.message:"Failed to update password"),p}finally{t(!1)}},refreshProfile:o}}const Fx=({streak:e,lastPostDate:t})=>{const r=()=>{if(!t)return"Start your streak by sharing your first photo!";const s=new Date().toISOString().split("T")[0],i=new Date(t).toISOString().split("T")[0],o=Math.floor((new Date(s).getTime()-new Date(i).getTime())/(1e3*60*60*24));return o===0?"You've posted today! 🎉":o===1?"Post today to keep your streak alive!":"Post today to start a new streak!"},n=s=>new Date(s).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(hf,{className:"w-6 h-6 text-orange-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:"Sharing Streak"}),a.jsx("p",{className:"text-sm text-gray-500",children:r()})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-orange-500",children:e}),a.jsx("span",{className:"text-sm text-gray-500",children:"days"})]})]}),t&&a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-4",children:[a.jsx(tn,{className:"w-4 h-4 mr-2"}),a.jsxs("span",{children:["Last shared: ",n(t)]})]}),a.jsx("div",{className:"mt-4 p-4 bg-orange-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-orange-700",children:[a.jsx("strong",{children:"How streaks work:"})," Share a photo every day to build your streak. Miss a day and your streak resets. Multiple posts in one day count as a single day."]})})]})},zx=()=>{const{user:e,loading:t,error:r,updateProfile:n,updatePassword:s,signOut:i}=lm(),[o,l]=w.useState(!1),[c,u]=w.useState(null),[d,f]=w.useState(null),[h,p]=w.useState(!1),[v,x]=w.useState(!1),[S,g]=w.useState(""),[m,y]=w.useState(""),[_,k]=w.useState(!1),[E,b]=w.useState(""),[N,L]=w.useState(""),R=w.useRef(null),q=()=>{var j;(j=R.current)==null||j.click()},$=async j=>{var C;const O=(C=j.target.files)==null?void 0:C[0];if(O){if(O.size>5*1024*1024){u("Photo must be less than 5MB");return}try{l(!0),u(null);const I=O.name.split(".").pop(),K=`avatars/${`${e==null?void 0:e.id}-${Date.now()}.${I}`}`,{error:te}=await T.storage.from("media").upload(K,O);if(te)throw te;const{data:{publicUrl:Pe}}=T.storage.from("media").getPublicUrl(K);await n({avatar_url:Pe}),f("Profile photo updated successfully")}catch(I){console.error("Error updating profile photo:",I),u(I instanceof Error?I.message:"Failed to update profile photo")}finally{l(!1)}}},Q=async j=>{if(j.preventDefault(),!!S.trim())try{l(!0),u(null),await n({name:S.trim()}),f("Name updated successfully"),p(!1)}catch(O){console.error("Error updating name:",O),u(O instanceof Error?O.message:"Failed to update name")}finally{l(!1)}},fe=async j=>{if(j.preventDefault(),!!m.trim())try{l(!0),u(null),await n({email:m.trim()}),f("Email updated successfully"),x(!1)}catch(O){console.error("Error updating email:",O),u(O instanceof Error?O.message:"Failed to update email")}finally{l(!1)}},M=async j=>{if(j.preventDefault(),E!==N){u("New passwords do not match");return}try{l(!0),u(null),await s(E),f("Password updated successfully"),k(!1),b(""),L("")}catch(O){console.error("Error updating password:",O),u(O instanceof Error?O.message:"Failed to update password")}finally{l(!1)}},oe=async()=>{try{await i()}catch(j){console.error("Error signing out:",j),u(j instanceof Error?j.message:"Failed to sign out")}};if(t)return a.jsx("div",{className:"p-4 flex items-center justify-center min-h-[calc(100vh-9rem)]",children:a.jsx($t,{className:"w-8 h-8 text-primary-600 animate-spin"})});if(r||!e)return a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:r||"Please log in to view your profile"})});const A=e.last_post_date?new Date(e.last_post_date):null;return a.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{onClick:q,className:"relative w-24 h-24 rounded-full overflow-hidden border-4 border-white/30 group-hover:border-white transition-all duration-300",children:[a.jsx("img",{src:e.avatar_url||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=100",alt:e.name,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Vg,{className:"w-8 h-8 text-white"})})]}),a.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:$,className:"hidden"})]}),a.jsxs("div",{className:"space-y-2",children:[h?a.jsxs("form",{onSubmit:Q,className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:S,onChange:j=>g(j.target.value),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-white/50 focus:border-transparent",placeholder:e.name,required:!0}),a.jsx("button",{type:"submit",disabled:o,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(rn,{className:"w-5 h-5"})}),a.jsx("button",{type:"button",onClick:()=>p(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(lt,{className:"w-5 h-5"})})]}):a.jsxs("button",{onClick:()=>{g(e.name),p(!0)},className:"text-2xl font-bold hover:text-white/90 flex items-center gap-2 transition-colors",children:[e.name,a.jsx(vu,{className:"w-5 h-5"})]}),v?a.jsxs("form",{onSubmit:fe,className:"flex items-center gap-2",children:[a.jsx("input",{type:"email",value:m,onChange:j=>y(j.target.value),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-white/50 focus:border-transparent",placeholder:e.email,required:!0}),a.jsx("button",{type:"submit",disabled:o,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(rn,{className:"w-5 h-5"})}),a.jsx("button",{type:"button",onClick:()=>x(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(lt,{className:"w-5 h-5"})})]}):a.jsxs("button",{onClick:()=>{y(e.email),x(!0)},className:"text-lg text-white/80 flex items-center gap-2 hover:text-white transition-colors",children:[e.email,a.jsx(vu,{className:"w-4 h-4"})]})]})]}),a.jsx(em,{})]}),c&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/20 text-white rounded-lg text-sm",children:c}),d&&a.jsx(xs,{message:d,type:"success",onClose:()=>f(null)})]}),a.jsx(Fx,{streak:e.streak_count,lastPostDate:A}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx(gf,{className:"w-5 h-5 text-primary-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Account Settings"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>k(!0),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Kl,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-700",children:"Change Password"})]}),a.jsx(as,{className:"w-5 h-5 text-gray-400"})]}),a.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-red-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Kg,{className:"w-5 h-5 text-red-500"}),a.jsx("span",{className:"font-medium text-red-600",children:"Sign Out"})]}),a.jsx(as,{className:"w-5 h-5 text-red-400"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx(Gl,{className:"w-5 h-5 text-primary-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notifications"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"font-medium text-gray-700",children:"Daily reminders"})}),a.jsxs("div",{className:"relative",children:[o&&a.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:a.jsx($t,{className:"w-4 h-4 text-primary-600 animate-spin"})}),a.jsx("input",{type:"checkbox",checked:e.notification_daily_reminder,onChange:()=>n({notification_daily_reminder:!e.notification_daily_reminder}),className:"w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})]})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"font-medium text-gray-700",children:"New content alerts"})}),a.jsxs("div",{className:"relative",children:[o&&a.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:a.jsx($t,{className:"w-4 h-4 text-primary-600 animate-spin"})}),a.jsx("input",{type:"checkbox",checked:e.notification_new_content,onChange:()=>n({notification_new_content:!e.notification_new_content}),className:"w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})]})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"font-medium text-gray-700",children:"Streak alerts"})}),a.jsxs("div",{className:"relative",children:[o&&a.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:a.jsx($t,{className:"w-4 h-4 text-primary-600 animate-spin"})}),a.jsx("input",{type:"checkbox",checked:e.notification_streak_alert,onChange:()=>n({notification_streak_alert:!e.notification_streak_alert}),className:"w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})]})]})]})]})]}),_&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full relative animate-scale-up",children:[a.jsx("button",{onClick:()=>{k(!1),b(""),L(""),u(null)},className:"absolute -top-2 -right-2 p-2 bg-white rounded-full shadow-lg text-gray-500 hover:text-gray-700",children:a.jsx(lt,{className:"w-5 h-5"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Change Password"}),a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),a.jsx("input",{type:"password",value:E,onChange:j=>b(j.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,minLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:N,onChange:j=>L(j.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,minLength:6})]}),c&&a.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:c}),a.jsx("button",{type:"submit",disabled:o||!E||!N,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-primary-500 text-white rounded-lg hover:bg-primary-600 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?a.jsxs(a.Fragment,{children:[a.jsx($t,{className:"w-5 h-5 animate-spin"}),"Updating..."]}):"Update Password"})]})]})})]})};function Ux(e){const[t,r]=w.useState([]),[n,s]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,h]=w.useState(-1),[p,v]=w.useState(!0),[x,S]=w.useState(!1),g=w.useCallback(async()=>{if(e)try{const{data:b,error:N}=await T.from("families").select("*").eq("id",e).single();if(N)throw N;s(b)}catch(b){console.error("Error fetching family settings:",b),d(b instanceof Error?b.message:"Failed to load settings")}},[e]),m=w.useCallback(async()=>{if(e)try{const{data:b,error:N}=await T.from("posts").select(`
          *,
          post_families!inner(family_id)
        `).eq("post_families.family_id",e).order("timestamp",{ascending:!1});if(N)throw N;t.length>0&&b&&b.length>t.length&&(S(!0),setTimeout(()=>S(!1),6e4)),r(b||[])}catch(b){console.error("Error fetching posts:",b),d(b instanceof Error?b.message:"Failed to load posts")}},[e,t.length]),y=w.useCallback(async()=>{if(e)try{const{data:b,error:N}=await T.from("reminders").select("*").eq("family_id",e).eq("target_audience","ELDER").order("date",{ascending:!0});if(N)throw N;o(b||[])}catch(b){console.error("Error fetching reminders:",b),d(b instanceof Error?b.message:"Failed to load reminders")}},[e]);w.useEffect(()=>{if(!e)return;const b=T.channel("slideshow_changes").on("postgres_changes",{event:"*",schema:"public",table:"posts",filter:`family_id=eq.${e}`},N=>{N.eventType==="INSERT"&&(S(!0),setTimeout(()=>S(!1),6e4)),m()}).on("postgres_changes",{event:"*",schema:"public",table:"reminders",filter:`family_id=eq.${e}`},()=>{y()}).subscribe();return()=>{T.removeChannel(b)}},[e,m,y]),w.useEffect(()=>{e&&(c(!0),Promise.all([g(),m(),y()]).finally(()=>{c(!1)}))},[e,g,m,y]);const _=w.useCallback(()=>{if(!n||!t.length)return[];const b=n.slideshow_photo_limit||30,N=t.filter(q=>q.is_favorite),L=t.filter(q=>!q.is_favorite);if(N.length>=b)return N.slice(0,b);const R=b-N.length;return[...N,...L.slice(0,R)]},[t,n]),k=w.useCallback(()=>{const N=_().length+1;h(L=>{const R=(L+1)%N;return R===N-1?-1:R})},[_]),E=w.useCallback(()=>{const N=_().length+1;h(L=>{if(L===-1)return N-2;const R=(L-1+N)%N;return R===N-1?-1:R})},[_]);return{posts:_(),familySettings:n,reminders:i,loading:l,error:u,currentIndex:f,setCurrentIndex:h,nextSlide:k,previousSlide:E,autoplayEnabled:p,setAutoplayEnabled:v,newPhotoAdded:x,setNewPhotoAdded:S,refreshPosts:m,refreshReminders:y}}function Wx({enabled:e,interval:t,onNext:r,paused:n=!1}){const s=w.useRef(null),i=w.useRef(Date.now()),o=w.useCallback(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),l=w.useCallback(()=>{!e||n||(o(),s.current=setTimeout(()=>{Date.now()-i.current>=5e3&&(r(),l())},t))},[e,t,r,n,o]);return w.useEffect(()=>(l(),o),[e,t,r,n,o,l]),w.useEffect(()=>{const u=()=>{e&&!n&&(o(),l())};return window.addEventListener("focus",u),()=>window.removeEventListener("focus",u)},[e,n,o,l]),{recordInteraction:w.useCallback(()=>{i.current=Date.now(),o(),l()},[o,l]),clearTimer:o,startTimer:l}}function Bx(){const[e,t]=w.useState(!1);return{loading:e,toggleFavorite:async(n,s)=>{t(!0);try{const{error:i}=await T.from("posts").update({is_favorite:!s}).eq("id",n);if(i)throw i;return!s}catch(i){throw console.error("Error toggling favorite:",i),i}finally{t(!1)}}}}const Hx=({reminder:e,onAcknowledge:t})=>{const[r,n]=w.useState(!0),[s,i]=w.useState(!1);w.useEffect(()=>{const u=setTimeout(()=>{o()},6e4);return()=>clearTimeout(u)},[]);const o=()=>{s||(i(!0),setTimeout(()=>{n(!1),t()},800))},l=e.time?new Date(`2000-01-01T${e.time}`).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):null,c=()=>{switch(e.recurrence_type){case"DAILY":return"Daily reminder";case"WEEKLY":return`Repeats every ${new Date(e.date).toLocaleDateString("en-US",{weekday:"long"})}`;case"MONTHLY":return`Repeats monthly on day ${e.recurrence_day}`;default:return null}};return r?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75",children:a.jsx("div",{className:`transform ${s?"animate-bounce-out":"animate-bounce-in"}`,children:a.jsxs("button",{onClick:o,className:`bg-primary-500 text-white p-8 rounded-2xl shadow-lg
            transform transition-transform hover:scale-110
            flex flex-col items-center gap-4
            animate-float`,children:[e.target_audience==="ELDER"?a.jsx(nn,{className:"w-16 h-16"}):a.jsx(Gl,{className:"w-16 h-16"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold mb-2",children:e.description}),l&&a.jsxs("div",{className:"text-lg mb-2",children:["Time: ",l]}),c()&&a.jsx("div",{className:"text-sm opacity-75",children:c()})]})]})})}):null},Vx=({onOpen:e})=>{const[t,r]=w.useState(!0),[n,s]=w.useState(!1);w.useEffect(()=>{const o=setTimeout(()=>{i()},6e4);return()=>clearTimeout(o)},[]);const i=()=>{n||(s(!0),setTimeout(()=>{r(!1),e()},800))};return t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75",children:a.jsx("div",{className:`transform ${n?"animate-bounce-out":"animate-bounce-in"}`,children:a.jsxs("button",{onClick:i,className:`bg-primary-500 text-white p-8 rounded-2xl shadow-lg
            transform transition-transform hover:scale-110
            flex flex-col items-center gap-4
            animate-float`,children:[a.jsx(Gg,{className:"w-16 h-16"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold mb-2",children:"New Photo!"}),a.jsx("div",{className:"text-lg",children:"Tap to view"})]})]})})}):null},qx=[{emoji:"❤️",type:"LOVE",label:"Love"},{emoji:"😊",type:"SMILE",label:"Happy"},{emoji:"🤗",type:"HUG",label:"Hug"},{emoji:"👏",type:"PROUD",label:"Proud"}],Yx=({onReact:e,onClose:t,currentReaction:r})=>a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75 backdrop-blur-sm",children:a.jsxs("div",{className:"relative bg-white rounded-3xl p-8 max-w-2xl w-full mx-4 animate-scale-up",children:[a.jsx("button",{onClick:t,className:`absolute -top-4 -right-4 bg-white w-10 h-10 rounded-full shadow-lg
            flex items-center justify-center text-gray-600 hover:text-gray-900
            transform transition-transform hover:scale-110 active:scale-95`,children:a.jsx(lt,{className:"w-6 h-6"})}),a.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:"How do you feel about this photo?"}),a.jsx("div",{className:"grid grid-cols-2 gap-6",children:qx.map(({emoji:n,type:s,label:i})=>a.jsxs("button",{onClick:()=>e(s),className:`flex flex-col items-center gap-4 p-6 rounded-2xl
                transition-all duration-300 transform hover:scale-105 active:scale-95
                ${r===s?"bg-primary-100 ring-2 ring-primary-500":"bg-gray-50 hover:bg-primary-50"}`,children:[a.jsx("span",{className:"text-6xl filter drop-shadow-md",children:n}),a.jsx("span",{className:`text-xl font-medium ${r===s?"text-primary-900":"text-gray-900"}`,children:i})]},s))})]})}),Gx=({reminders:e})=>{const[t,r]=w.useState(new Date),n=new Date(t);n.setDate(t.getDate()-t.getDay());const s=new Date(n);s.setDate(n.getDate()+6),w.useEffect(()=>{const o=setInterval(()=>{r(new Date)},6e4);return()=>clearInterval(o)},[]);const i=e.filter(o=>{const l=new Date(o.date);return o.target_audience==="ELDER"&&l>=n&&l<=s}).sort((o,l)=>new Date(o.date).getTime()-new Date(l.date).getTime());return a.jsxs("div",{className:"absolute inset-0 flex flex-col bg-gradient-to-br from-blue-50 via-blue-100 to-white text-gray-800 p-8 md:p-12",children:[a.jsx("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-blue-100 max-w-2xl mx-auto",children:[a.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4 md:mb-6 bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent",children:ft(t,"EEEE")}),a.jsx("h2",{className:"text-3xl md:text-4xl text-blue-800 mb-4",children:ft(t,"MMMM d, yyyy")}),a.jsxs("div",{className:"flex items-center justify-center gap-3 text-2xl md:text-3xl text-blue-600",children:[a.jsx(nn,{className:"w-6 h-6 md:w-8 md:h-8"}),a.jsx("span",{children:ft(t,"h:mm a")})]})]})}),a.jsx("div",{className:"flex-1 max-w-4xl mx-auto w-full",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-blue-100 h-full",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6 md:mb-8 animate-fade-in",children:[a.jsx(tn,{className:"w-8 h-8 md:w-10 md:h-10 text-blue-600"}),a.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-blue-800",children:"This Week's Schedule"})]}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-400px)] pr-4 -mr-4",children:i.length>0?a.jsx("div",{className:"space-y-4 md:space-y-6 animate-fade-in",children:i.map((o,l)=>a.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 transition-all hover:bg-blue-50 shadow-md border border-blue-100",style:{animationDelay:`${l*100}ms`},children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2 md:mb-3",children:[a.jsx("span",{className:"text-xl md:text-2xl font-medium text-blue-800",children:ft(new Date(o.date),"EEEE, MMMM d")}),o.time&&a.jsx("span",{className:"text-lg md:text-xl text-blue-600 font-medium",children:ft(new Date(`2000-01-01T${o.time}`),"h:mm a")})]}),a.jsx("p",{className:"text-lg md:text-xl text-blue-700 font-medium",children:o.description}),o.recurrence_type!=="NONE"&&a.jsxs("div",{className:"mt-2 text-sm text-blue-500 font-medium",children:[o.recurrence_type==="DAILY"&&"🔄 Repeats daily",o.recurrence_type==="WEEKLY"&&"🔄 Repeats weekly",o.recurrence_type==="MONTHLY"&&`🔄 Repeats monthly on day ${o.recurrence_day}`]})]},o.id))}):a.jsxs("div",{className:"text-center py-8 md:py-12 animate-fade-in",children:[a.jsx("div",{className:"text-xl md:text-2xl text-blue-600 mb-4",children:"No scheduled reminders for this week"}),a.jsx("p",{className:"text-lg text-blue-500",children:"Enjoy your peaceful week ahead! 😊"})]})})]})})]})};function Qx(e){const t=w.useRef(null);return w.useEffect(()=>(t.current||(t.current=new Audio(e)),()=>{t.current&&(t.current.pause(),t.current=null)}),[e]),{play:async()=>{try{t.current&&(t.current.currentTime=0,await t.current.play())}catch(n){console.warn("Audio playback failed:",n)}}}}const Kx=e=>{if(!e.date||!e.time)return!1;const t=new Date,s=(new Date(`${e.date}T${e.time}`).getTime()-t.getTime())/(1e3*60*60);return s<=24&&s>=23.9||s<=.5&&s>=.4},Jx=({familyId:e,setActiveTab:t})=>{const r=w.useRef(null),n=w.useRef(null),s=w.useRef(null),i=w.useRef(null),o=w.useRef(null),l=w.useRef(null),[c,u]=w.useState(!0),[d,f]=w.useState(0),[h,p]=w.useState(!1),[v,x]=w.useState(null),[S,g]=w.useState(!1),[m,y]=w.useState(null);Qx("/sounds/new-photo.mp3");const{toggleFavorite:_,loading:k}=Bx(),{getActiveReminders:E,acknowledgeReminder:b}=sc(e||""),{addElderlyReaction:N,getCurrentReaction:L}=Xf(),{posts:R,familySettings:q,reminders:$,loading:Q,error:fe,currentIndex:M,setCurrentIndex:oe,nextSlide:A,previousSlide:j,autoplayEnabled:O,setAutoplayEnabled:C,newPhotoAdded:I,setNewPhotoAdded:U,refreshPosts:K,refreshReminders:te}=Ux(e),{recordInteraction:Pe}=Wx({enabled:O&&!h&&!S&&!I,interval:((q==null?void 0:q.slideshow_speed)||15)*1e3,onNext:A,paused:h||S||I});w.useEffect(()=>{if(e)return l.current&&clearInterval(l.current),l.current=setInterval(()=>{K(),te()},3e5),()=>{l.current&&clearInterval(l.current)}},[e]),w.useEffect(()=>{const ue=async()=>{if(!e)return;const lo=await E(),ac=lo==null?void 0:lo.find(co=>co.target_audience==="ELDER"&&!co.is_acknowledged&&Kx(co));ac&&(y(ac),g(!0),C(!1))};ue();const br=setInterval(ue,6e4);return()=>clearInterval(br)},[e,E]),w.useEffect(()=>{Te()},[M]);const Te=async()=>{try{if(M<0||!R[M])return;const ue=await L(R[M].id);x(ue)}catch(ue){console.error("Error loading reaction:",ue)}},Et=async()=>{if(M>=0&&R[M]&&!k)try{Pe();const ue=R[M];await _(ue.id,ue.is_favorite),await K()}catch(ue){console.error("Error toggling favorite:",ue)}},er=()=>{o.current=Date.now(),i.current=setInterval(()=>{if(!o.current)return;const ue=Date.now()-o.current,br=Math.min(ue/5e3*100,100);f(br),br>=100&&(clearInterval(i.current),i.current=null,o.current=null,f(0),u(!1),t("feed"))},50)},ic=()=>{i.current&&(clearInterval(i.current),i.current=null),o.current=null,f(0)},cm=ue=>{ue.preventDefault(),ue.stopPropagation(),Pe(),C(!1),p(!0)},um=async ue=>{try{if(M<0||!R[M])return;await N(R[M].id,ue),x(ue),p(!1),C(!0)}catch(br){console.error("Failed to add reaction:",br)}},dm=()=>{U(!1),C(!0)},hm=async()=>{m&&(await b(m.id),g(!1),y(null),C(!0))},fm=()=>{Pe(),j(),C(!1)},oc=()=>{Pe(),A(),C(!1)};return Q?a.jsx("div",{className:"h-screen flex items-center justify-center bg-black",children:a.jsx("p",{className:"text-white text-xl",children:"Loading photos..."})}):fe?a.jsx("div",{className:"h-screen flex items-center justify-center bg-black",children:a.jsx("p",{className:"text-red-500 text-xl",children:fe})}):a.jsxs("div",{ref:r,className:"fixed inset-0 bg-black",children:[a.jsx("button",{onMouseDown:er,onMouseUp:ic,onTouchStart:er,onTouchEnd:ic,className:"absolute top-4 right-4 z-50 p-4 text-white/50 hover:text-white/75 transition-colors rounded-full",style:{background:d>0?`linear-gradient(to right, rgba(59, 130, 246, 0.5) ${d}%, transparent ${d}%)`:void 0},children:c?a.jsx(Kl,{className:"w-8 h-8"}):a.jsx(r0,{className:"w-8 h-8"})}),a.jsxs("div",{className:`relative w-full h-full ${h?"opacity-50":"opacity-100"} transition-opacity duration-300`,children:[M===-1?a.jsx(Gx,{reminders:$}):R[M]&&a.jsxs(a.Fragment,{children:[R[M].media_type==="video"?a.jsx("video",{ref:s,src:R[M].media_url,className:"w-full h-full object-contain",controls:!1,playsInline:!0,autoPlay:!0,onEnded:()=>{oc(),C(!0)}}):a.jsx("img",{ref:n,src:R[M].media_url,alt:R[M].caption,className:"w-full h-full object-contain"}),a.jsx("button",{onClick:Et,disabled:k,className:`absolute top-4 left-4 p-4 transition-all duration-300 favorite-star ${R[M].is_favorite?"active scale-110 drop-shadow-glow":"text-white/50 hover:text-white/75"}`,children:a.jsx(t0,{className:`w-8 h-8 ${R[M].is_favorite?"fill-yellow-400":""}`})}),a.jsx("button",{onClick:cm,className:`absolute bottom-8 right-8 p-6 rounded-full shadow-lg z-10
                transform transition-all duration-300 hover:scale-105 active:scale-95
                ${v?"bg-white/20 backdrop-blur-sm hover:bg-white/30":"bg-primary-500 hover:bg-primary-600"}`,children:v?a.jsx("span",{className:"text-4xl filter drop-shadow-lg",children:{LOVE:"❤️",SMILE:"😊",HUG:"🤗",PROUD:"👏"}[v]}):a.jsx(Zi,{className:"w-12 h-12 text-white"})}),a.jsx("div",{className:"absolute bottom-8 left-8 right-8",children:a.jsxs("div",{className:"inline-flex items-start gap-4 p-4 rounded-2xl bg-black/40 backdrop-blur-sm",children:[a.jsx("img",{src:R[M].avatar_url,alt:R[M].username,className:"w-16 h-16 rounded-full border-2 border-white object-cover flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-2xl font-semibold text-white",children:R[M].username}),a.jsx("p",{className:"text-xl text-white mt-1 line-clamp-2 break-words",children:R[M].caption})]})]})})]}),a.jsx("button",{onClick:fm,className:`absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-4 rounded-full
            hover:bg-black/75 transition-colors transform hover:scale-105 active:scale-95`,children:a.jsx(Ql,{className:"w-10 h-10"})}),a.jsx("button",{onClick:oc,className:`absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-4 rounded-full
            hover:bg-black/75 transition-colors transform hover:scale-105 active:scale-95`,children:a.jsx(as,{className:"w-10 h-10"})})]}),h&&a.jsx(Yx,{onReact:um,onClose:()=>{p(!1),C(!0)},currentReaction:v}),I&&a.jsx(Vx,{onOpen:dm}),S&&m&&a.jsx(Hx,{reminder:m,onAcknowledge:hm})]})},Xx=({familyId:e})=>{const[t,r]=w.useState(new Date),[n,s]=w.useState(!1),[i,o]=w.useState(null),{getActiveReminders:l,acknowledgeReminder:c,assignReminder:u,deleteReminder:d}=sc(e||""),[f,h]=w.useState([]),[p,v]=w.useState(null),{navigateToPhotos:x}=nc();w.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{const $=await l();h($||[])}catch($){console.error("Error fetching reminders:",$)}},g=()=>{r(Kw(t,1)),v(null)},m=()=>{r(Wf(t,1)),v(null)},y=$=>{window.location.hash=`family/${$}`},_=()=>{window.location.hash="join"},k=async $=>{try{const{data:{user:Q}}=await T.auth.getUser();if(!Q)throw new Error("Not authenticated");await u($,Q.id),await S(),o("You've taken charge of this reminder!")}catch(Q){console.error("Error assigning reminder:",Q)}},E=async $=>{try{await d($),await S(),o("Reminder has been removed")}catch(Q){console.error("Error deleting reminder:",Q)}},b=()=>{x()},N=Mv(t),L=Yf(t),R=Dv({start:N,end:L}),q=$=>f.filter(Q=>{const fe=Bs(Q.date);return Wo(fe,$)});return e?a.jsxs(a.Fragment,{children:[a.jsx(us,{currentFamilyId:e,onFamilyChange:y,onJoinFamily:_,isCollapsed:n,onToggleCollapse:()=>s(!n),currentPage:"feed"}),a.jsxs("div",{className:`min-h-screen bg-gray-50 transition-all duration-300 ${n?"":"pl-24"}`,children:[a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-8",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Family Reminders"}),a.jsxs("button",{onClick:b,className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[a.jsx(Jl,{className:"w-5 h-5"}),a.jsx("span",{children:"Add Reminder"})]})]}),f.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No active reminders"}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:f.map($=>a.jsxs("div",{className:"flex flex-col p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-2",children:[a.jsx(tn,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:ft(Bs($.date),"MMM d, yyyy")})]}),$.time&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[a.jsx(nn,{className:"w-4 h-4"}),a.jsx("span",{children:ft(Bs(`2000-01-01T${$.time}`),"h:mm a")})]}),a.jsx("p",{className:"text-gray-700 flex-grow mb-4",children:$.description}),$.assigned_to?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:$.assigned_to.avatar_url||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=100",alt:$.assigned_to.name,className:"w-8 h-8 rounded-full object-cover"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[$.assigned_to.name," will do it"]})]}),a.jsx("button",{onClick:()=>E($.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove reminder",children:a.jsx(yf,{className:"w-4 h-4"})})]}):a.jsxs("button",{onClick:()=>k($.id),className:"flex items-center justify-center gap-2 w-full py-2 px-4 bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 transition-colors font-medium",children:[a.jsx(rn,{className:"w-4 h-4"}),"I'll do it"]})]},$.id))})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Calendar"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Ql,{className:"w-5 h-5 text-gray-600"})}),a.jsx("span",{className:"text-lg font-medium text-gray-700 min-w-[140px] text-center",children:ft(t,"MMMM yyyy")}),a.jsx("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(as,{className:"w-5 h-5 text-gray-600"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map($=>a.jsx("div",{className:"bg-gray-50 text-center py-3 text-sm font-medium text-gray-500",children:$},$)),R.map(($,Q)=>{const fe=q($),M=Wo($,new Date),oe=Mw($,t),A=p&&Wo($,p);return a.jsxs("div",{onClick:()=>v(A?null:$),className:`min-h-[140px] p-3 cursor-pointer transition-all duration-200 ${oe?A?"bg-primary-50 ring-2 ring-primary-500":M?"bg-blue-50 ring-1 ring-blue-200":"bg-white hover:bg-gray-50":"bg-gray-50"}`,children:[a.jsx("div",{className:`text-sm font-medium mb-2 ${M?"text-blue-600":oe?"text-gray-900":"text-gray-400"}`,children:ft($,"d")}),a.jsx("div",{className:"space-y-1.5",children:fe.map(j=>a.jsxs("div",{className:`p-2 rounded-lg transition-all duration-200 ${A?"bg-white shadow-md scale-105":"bg-primary-50 border border-primary-100 hover:bg-primary-100"}`,children:[j.time&&a.jsx("div",{className:"text-xs text-primary-700 font-medium mb-1",children:ft(Bs(`2000-01-01T${j.time}`),"h:mm a")}),a.jsx("div",{className:`text-sm text-primary-800 ${A?"line-clamp-none":"line-clamp-2"}`,children:j.description}),j.assigned_to&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("img",{src:j.assigned_to.avatar_url||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=100",alt:j.assigned_to.name,className:"w-6 h-6 rounded-full object-cover"}),a.jsx("span",{className:"text-xs text-primary-600 font-medium",children:j.assigned_to.name})]})]},j.id))})]},Q)})]})]})})]}),i&&a.jsx(xs,{message:i,type:"success",onClose:()=>o(null)})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(us,{currentFamilyId:e,onFamilyChange:y,onJoinFamily:_,isCollapsed:n,onToggleCollapse:()=>s(!n),currentPage:"feed"}),a.jsx("div",{className:"max-w-4xl mx-auto p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-gray-100 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(tn,{className:"w-8 h-8 text-primary-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Select a Family"}),a.jsx("p",{className:"text-gray-600",children:"Choose a family from the sidebar to view their agenda"})]})})]})},Zx=({onSuccess:e,onSignupClick:t})=>{const[r,n]=w.useState(!1),[s,i]=w.useState(null),[o,l]=w.useState(""),[c,u]=w.useState(""),{signIn:d}=lm(),f=async h=>{h.preventDefault(),i(null),n(!0);try{await d({email:o,password:c}),e==null||e()}catch(p){console.error("Auth error:",p),i(p instanceof Error?p.message:"An error occurred")}finally{n(!1)}};return a.jsxs(a.Fragment,{children:[a.jsxs("form",{className:"space-y-6",onSubmit:f,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:h=>l(h.target.value),className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:a.jsx(Jg,{className:"h-5 w-5 text-gray-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:c,onChange:h=>u(h.target.value),className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:a.jsx(Kl,{className:"h-5 w-5 text-gray-400"})})]})]}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Signing in...":"Sign in"}),a.jsx("button",{type:"button",onClick:t,className:"w-full flex justify-center py-2 px-4 border border-primary-500 rounded-md shadow-sm text-sm font-medium text-primary-500 bg-white hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Create account"})]})]}),s&&a.jsx(xs,{message:s,type:"error",onClose:()=>i(null)})]})},e1=w.lazy(()=>vr(()=>import("./SignupForm-B5__wFG2.js"),[]).then(e=>({default:e.default}))),t1=()=>a.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:a.jsxs("div",{className:"animate-pulse flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full"}),a.jsx("div",{className:"h-4 w-24 bg-primary-100 rounded"})]})}),r1=()=>{const[e,t]=w.useState("login");return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx(Ke,{className:"w-8 h-8 text-primary-500"})})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:e==="login"?"Welcome back":"Create your account"}),e==="signup"&&a.jsx("button",{onClick:()=>t("login"),className:"mt-2 w-full text-center text-sm text-primary-500 hover:text-primary-400",children:"← Back to login"})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsx("div",{className:"bg-white py-8 px-6 shadow rounded-lg sm:px-10",children:e==="login"?a.jsx(Zx,{onSignupClick:()=>t("signup")}):a.jsx(w.Suspense,{fallback:a.jsx(t1,{}),children:a.jsx(e1,{onSuccess:()=>t("login")})})})})]})};function n1(){const[e,t]=w.useState("feed"),[r,n]=w.useState(null),{families:s}=vs(),[i,o]=w.useState(null);if(w.useEffect(()=>{T.auth.getSession().then(({data:{session:u}})=>{n(u)});const{data:{subscription:c}}=T.auth.onAuthStateChange((u,d)=>{n(d)});return()=>c.unsubscribe()},[]),w.useEffect(()=>{s.length>0&&!i&&o(s[0].id)},[s]),w.useEffect(()=>{const c=()=>{const u=window.location.hash.slice(1);if(u.startsWith("family/")){const d=u.split("/")[1];o(d),t("feed")}else if(u.startsWith("slideshow/")){const d=u.split("/")[1];o(d),t("slideshow")}else u==="join"?t("join"):u==="photos"?t("photos"):u==="profile"?t("profile"):u==="agenda"&&t("agenda")};return window.addEventListener("hashchange",c),c(),()=>window.removeEventListener("hashchange",c)},[]),!r)return a.jsx(r1,{});const l=()=>{switch(e){case"feed":return a.jsx(Uu,{familyId:i});case"photos":return a.jsx(Lx,{});case"slideshow":return a.jsx(Jx,{familyId:i,setActiveTab:t});case"join":return a.jsx(Ix,{onSuccess:()=>t("feed")});case"profile":return a.jsx(zx,{});case"agenda":return a.jsx(Xx,{familyId:i});default:return a.jsx(Uu,{familyId:i})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e!=="slideshow"&&a.jsx(yv,{currentFamilyId:i}),a.jsx("div",{className:e==="slideshow"?"h-screen":"pt-16 pb-20",children:a.jsx("main",{className:"mx-auto max-w-2xl transition-all duration-300",children:l()})}),e!=="slideshow"&&a.jsx(vv,{activeTab:e,setActiveTab:t})]})}uf(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(n1,{})}));export{Kl as L,Jg as M,xs as T,vu as U,Ke as a,$t as b,Ku as g,a as j,w as r,lm as u};
//# sourceMappingURL=index-10ZAl_Du.js.map
